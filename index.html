<!doctype html>
<html lang="tr" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ArduMind - Arduino'yu Anlayarak Ã–ÄŸren</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/dracula.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/clike/clike.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/edit/closebrackets.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/selection/active-line.min.js"></script>
  <link rel="stylesheet" href="css/style.css">

  <style>
    @view-transition { navigation: auto; }
    
    /* Tema DeÄŸiÅŸkenleri */
    :root {
      --bg-main: #0f172a; /* slate-900 */
      --bg-card: #1e293b; /* slate-800 */
      --text-main: #f1f5f9; /* slate-100 */
      --text-muted: #94a3b8; /* slate-400 */
      --border-color: #334155; /* slate-700 */
    }

    [data-theme="light"] {
      --bg-main: #f8fafc; /* slate-50 */
      --bg-card: #ffffff;
      --text-main: #0f172a; /* slate-900 */
      --text-muted: #475569; /* slate-600 */
      --border-color: #e2e8f0; /* slate-200 */
    }

    body {
      background-color: var(--bg-main);
      color: var(--text-main);
      transition: background-color 0.3s, color 0.3s;
    }

    .bg-slate-900 { background-color: var(--bg-main) !important; }
    .bg-slate-800 { background-color: var(--bg-card) !important; }
    .text-slate-100 { color: var(--text-main) !important; }
    .text-slate-400 { color: var(--text-muted) !important; }
    .border-slate-700 { border-color: var(--border-color) !important; }

    /* TatlÄ± Kedi Stilleri - Tam VÃ¼cut Sol Alt */
    .cat-container {
      position: fixed;
      bottom: -10px;
      left: 20px;
      width: 120px;
      height: 150px;
      z-index: 9999;
      pointer-events: none;
      transition: transform 0.3s ease;
    }

    .cat-body {
      position: absolute;
      bottom: 0;
      width: 80px;
      height: 90px;
      background: #f1f5f9;
      border-radius: 40px 40px 10px 10px;
      left: 20px;
      box-shadow: inset -5px -5px 15px rgba(0,0,0,0.05);
    }

    .cat-head {
      position: absolute;
      bottom: 70px;
      left: 10px;
      width: 100px;
      height: 80px;
      background: #f1f5f9;
      border-radius: 40px 40px 30px 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .cat-ear {
      position: absolute;
      top: -15px;
      width: 30px;
      height: 40px;
      background: #f1f5f9;
      border-radius: 50% 50% 10% 10%;
    }

    .cat-ear.left { left: 10px; transform: rotate(-15deg); }
    .cat-ear.right { right: 10px; transform: rotate(15deg); }

    .cat-eye {
      position: absolute;
      top: 25px;
      width: 22px;
      height: 22px;
      background: white;
      border-radius: 50%;
      border: 2px solid #334155;
      overflow: hidden;
      animation: blink 5s infinite;
      transform-origin: center;
    }

    @keyframes blink {
      0%, 96%, 100% { transform: scaleY(1); }
      98% { transform: scaleY(0.05); }
    }

    .cat-eye.left { left: 20px; }
    .cat-eye.right { right: 20px; }

    .cat-pupil {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 10px;
      height: 10px;
      background: #0f172a;
      border-radius: 50%;
      transform: translate(-50%, -50%) translate(var(--eye-x, 0px), var(--eye-y, 0px));
      transition: transform 0.1s ease-out;
    }

    .cat-nose {
      position: absolute;
      top: 45px;
      left: 50%;
      width: 10px;
      height: 6px;
      background: #fda4af;
      border-radius: 50%;
      transform: translateX(-50%);
    }

    .cat-mouth {
      position: absolute;
      top: 52px;
      left: 50%;
      width: 16px;
      height: 8px;
      border-bottom: 2px solid #334155;
      border-radius: 0 0 10px 10px;
      transform: translateX(-50%);
    }

    .cat-paw-front {
      position: absolute;
      bottom: 0;
      width: 20px;
      height: 30px;
      background: #f1f5f9;
      border-radius: 10px 10px 5px 5px;
      border-bottom: 2px solid #e2e8f0;
    }

    .cat-paw-front.left { left: 30px; }
    .cat-paw-front.right { left: 70px; }

    .cat-tail {
      position: absolute;
      bottom: 10px;
      right: -10px;
      width: 50px;
      height: 15px;
      background: #f1f5f9;
      border-radius: 10px;
      transform-origin: left center;
      animation: tailWag 3s ease-in-out infinite;
    }

    .cat-container:hover {
      transform: translateY(-5px);
    }

    @keyframes tailWag {
      0%, 100% { transform: rotate(0deg); }
      50% { transform: rotate(25deg); }
    }

    /* Algoritma Åekilleri */
    .shape-capsule { border-radius: 9999px; }
    .shape-parallelogram { transform: skewX(-15deg); }
    .shape-parallelogram > * { transform: skewX(15deg); } /* Metni dÃ¼zelt */
    .shape-rectangle { border-radius: 4px; }
    .shape-diamond { clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%); }
    .shape-document { clip-path: polygon(0% 0%, 100% 0%, 100% 80%, 80% 90%, 60% 80%, 40% 90%, 20% 80%, 0% 90%); }
  </style>
  <!-- <script src="_sdk/data_sdk.js" type="text/javascript"></script> -->
  <!-- <script src="_sdk/element_sdk.js" type="text/javascript"></script> -->
 </head>
 <body class="h-full bg-slate-900 text-slate-100">
  <!-- TatlÄ± Kedi -->
  <div class="cat-container" id="cat">
    <div class="cat-tail"></div>
    <div class="cat-body">
      <div class="cat-paw-front left"></div>
      <div class="cat-paw-front right"></div>
    </div>
    <div class="cat-head">
      <div class="cat-ear left"></div>
      <div class="cat-ear right"></div>
      <div class="cat-eye left">
        <div class="cat-pupil" id="pupil-left"></div>
      </div>
      <div class="cat-eye right">
        <div class="cat-pupil" id="pupil-right"></div>
      </div>
      <div class="cat-nose"></div>
      <div class="cat-mouth"></div>
    </div>
  </div>
  
  <div id="app" class="h-full w-full overflow-auto"></div>
  <script>
    // ==================== STATE MANAGEMENT ====================
    const savedUsers = JSON.parse(localStorage.getItem('ardumind_users') || '[]');
    const savedCurrentUser = JSON.parse(localStorage.getItem('ardumind_current_user') || 'null');
    const savedCode = localStorage.getItem('ardumind_editor_code');

    let appState = {
      currentUser: savedCurrentUser,
      users: savedUsers,
      showAuthModal: false,
      authMode: 'login',
      currentPage: savedCurrentUser ? 'dashboard' : 'home',
      currentVideoFilter: '',
      editorWrap: false,
      editorInstance: null,
      showIntro: true,
      mobileMenuOpen: false,
      theme: localStorage.getItem('ardumind_theme') || 'dark',
      introAutoScheduled: false,
      currentModuleView: null,
      currentDocSection: 'basics',
      collapsedTopics: {}, // AÃ§Ä±lÄ±r-kapanÄ±r bloklar iÃ§in
      editorCode: savedCode || `void setup() {
  pinMode(13, OUTPUT);
}

void loop() {
  digitalWrite(13, HIGH);
  delay(1000);
  digitalWrite(13, LOW);
  delay(1000);
}`,
      simulationRunning: false,
      simulationInterval: null,
      ledStates: {},
      motorStates: {},
      displayMotorStates: {}, // GÃ¶rselleÅŸtirme iÃ§in yumuÅŸatÄ±lmÄ±ÅŸ hÄ±z
      motorAngles: {},        // SÃ¼rekli dÃ¶nÃ¼ÅŸ iÃ§in aÃ§Ä± takibi
      lastUpdate: Date.now(),
      servoStates: {},
      potValue: 512, // 0-1023
      hcsr04Distance: 100, // 0-400 cm
      buttonStates: { 2: false },
      serialInitialized: false,
      serialOutput: [],
      userSerialOutput: [], // Sadece kullanÄ±cÄ±nÄ±n Serial.print Ã§Ä±ktÄ±larÄ±
      currentQuiz: null,
      quizAnswers: {},
      quizCompleted: false,
      quizScore: 0,
      miniQuizAnswers: {},
      learningMetrics: {
        concepts: {
          'algoritma': { score: 0, attempts: 0 },
          'degiskenler': { score: 0, attempts: 0 },
          'donguler': { score: 0, attempts: 0 },
          'kosullar': { score: 0, attempts: 0 },
          'fonksiyonlar': { score: 0, attempts: 0 },
          'dijital_pinler': { score: 0, attempts: 0 },
          'analog_pinler': { score: 0, attempts: 0 },
          'temel_arduino': { score: 0, attempts: 0 }
        },
        totalStudyTime: 0,
        totalErrors: 0,
        lastActive: Date.now()
      },
      flowchartNodes: [],
      flowchartConnections: [],
      algoDraggingNode: null,
      algoConnectingFrom: null
    };

    function updateAnimations() {
      const now = Date.now();
      const dt = (now - appState.lastUpdate) / 1000; // Saniye cinsinden fark
      appState.lastUpdate = now;

      let changed = false;

      // DC Motor YumuÅŸatma ve DÃ¶nÃ¼ÅŸ Takibi
      Object.keys(appState.motorStates).forEach(pin => {
        const targetSpeed = appState.motorStates[pin] || 0;
        const currentSpeed = appState.displayMotorStates[pin] || 0;
        
        // HÄ±z yumuÅŸatma (Lerp)
        if (Math.abs(targetSpeed - currentSpeed) > 0.1) {
          appState.displayMotorStates[pin] = currentSpeed + (targetSpeed - currentSpeed) * 0.1;
          changed = true;
        } else {
          appState.displayMotorStates[pin] = targetSpeed;
        }

        // AÃ§Ä± gÃ¼ncelleme (DÃ¶nÃ¼ÅŸ)
        const speedFactor = appState.displayMotorStates[pin] / 255;
        if (speedFactor > 0) {
          const rotationSpeed = 720 * speedFactor; // Saniyede derece (720 = 2 tur/sn max)
          appState.motorAngles[pin] = ((appState.motorAngles[pin] || 0) + rotationSpeed * dt) % 360;
          changed = true;
        }
      });

      if (changed && appState.simulationRunning) {
        updateSimulationDisplay();
      }

      // Ã‡alÄ±ÅŸma sÃ¼resini takip et (aktiflik durumuna gÃ¶re)
      if (appState.currentUser && !appState.lastMinuteTracked) {
        appState.lastMinuteTracked = now;
      }
      
      if (appState.currentUser && now - (appState.lastMinuteTracked || 0) > 60000) { // Her 1 dakika
        appState.learningMetrics.totalStudyTime += 60;
        appState.lastMinuteTracked = now;
        saveAppState();
      }

      requestAnimationFrame(updateAnimations);
    }
    updateAnimations();

    // ==================== FEEDBACK & LOGIC SYSTEM ====================
    function checkThinking() {
      const code = appState.editorCode;
      const results = [];
      const addTip = (text, type = 'info') => results.push({ text, type });

      // 1. delay() vs millis() - MantÄ±k HatasÄ± KontrolÃ¼
      if (code.includes('delay(') && (code.includes('digitalRead') || code.includes('analogRead'))) {
        addTip('ğŸ’¡ delay() kullanÄ±yorsun. Bu fonksiyon Arduino\'yu tamamen durdurur. EÄŸer sensÃ¶rleri anlÄ±k okumak istiyorsan "millis()" kullanmayÄ± dÃ¼ÅŸÃ¼nmelisiniz.', 'warning');
      }

      // 2. Serial.begin() unutma - MantÄ±k HatasÄ± KontrolÃ¼
      if (code.includes('Serial.print') && !code.includes('Serial.begin')) {
        addTip('âš ï¸ Serial.print kullanÄ±yorsun ama setup() iÃ§inde Serial.begin(9600) baÅŸlatmamÄ±ÅŸsÄ±n. Ekranda hiÃ§bir ÅŸey gÃ¶remezsin!', 'error');
      }

      // 3. PinMode OUTPUT/INPUT kontrolÃ¼
      if (code.includes('digitalWrite') && !code.includes('pinMode')) {
        addTip('ğŸ“ digitalWrite kullanmadan Ã¶nce o pini pinMode() ile OUTPUT olarak ayarlaman gerektiÄŸini unutma.', 'info');
      }

      // 4. Sonsuz DÃ¶ngÃ¼de DeÄŸiÅŸmeyen KoÅŸul
      const whileMatch = code.match(/while\s*\(([^)]+)\)/);
      if (whileMatch) {
        const condition = whileMatch[1];
        if (condition === 'true' || condition === '1') {
          addTip('ğŸ”„ loop() zaten sÃ¼rekli dÃ¶ner, iÃ§eride tekrar "while(true)" kullanmak Arduino\'yu kilitleyebilir.', 'warning');
        }
      }

      // 5. Analog Pin YazÄ±mÄ±
      if (code.includes('analogRead(')) {
        if (!code.match(/analogRead\s*\(\s*A[0-5]\s*\)/)) {
          addTip('ğŸ”Œ analogRead kullanÄ±rken A0, A1 gibi pin isimleri kullanmak daha gÃ¼venlidir.', 'info');
        }
      }

      if (results.length === 0) {
        showToast('Harika! MantÄ±ksal bir hata gÃ¶rÃ¼nmÃ¼yor.', 'success');
        addTip('âœ… Harika! MantÄ±ksal bir hata gÃ¶rÃ¼nmÃ¼yor. Kodun akÄ±ÅŸÄ± doÄŸru gÃ¶rÃ¼nÃ¼yor.', 'success');
      } else {
        showToast('BazÄ± mantÄ±ksal ipuÃ§larÄ± var.', 'info');
      }

      // SonuÃ§larÄ± seri monitÃ¶re yazdÄ±r
      appState.serialOutput = [
        { text: '--- MANTIK KONTROLÃœ BAÅLATILDI ---', type: 'info' },
        ...results,
        { text: '----------------------------------', type: 'info' }
      ];
      renderApp();
      
      // Seri monitÃ¶rÃ¼ en alta kaydÄ±r
      setTimeout(() => {
        const serialMonitor = document.getElementById('serialMonitor');
        if (serialMonitor) serialMonitor.scrollTop = serialMonitor.scrollHeight;
      }, 100);
    }

    function handleSearch(query) {
      appState.searchQuery = query;
      if (!query || query.length < 2) {
        appState.searchResults = [];
        renderApp();
        return;
      }

      const results = [];
      const q = query.toLowerCase();

      // DokÃ¼mantasyon iÃ§inde ara
      Object.entries(documentation).forEach(([sectionKey, section]) => {
        section.topics.forEach(topic => {
          if (topic.title.toLowerCase().includes(q) || topic.description.toLowerCase().includes(q) || topic.content.toLowerCase().includes(q)) {
            results.push({
              type: 'doc',
              title: topic.title,
              description: topic.description,
              key: sectionKey,
              topicTitle: topic.title
            });
          }
        });
      });

      // ModÃ¼ller iÃ§inde ara
      modules.forEach(module => {
        if (module.title.toLowerCase().includes(q) || module.description.toLowerCase().includes(q)) {
          results.push({
            type: 'module',
            title: module.title,
            description: module.description,
            id: module.id
          });
        }
        module.lessons.forEach(lesson => {
          if (lesson.title.toLowerCase().includes(q)) {
            results.push({
              type: 'lesson',
              title: lesson.title,
              description: `${module.title} iÃ§indeki ders`,
              moduleId: module.id,
              lessonId: lesson.id
            });
          }
        });
      });

      appState.searchResults = results.slice(0, 8); // En alakalÄ± 8 sonuÃ§
      renderApp();
    }

    function saveAppState() {
      localStorage.setItem('ardumind_users', JSON.stringify(appState.users));
      localStorage.setItem('ardumind_current_user', JSON.stringify(appState.currentUser));
      localStorage.setItem('ardumind_editor_code', appState.editorCode);
    }

    function toggleTopic(topicKey) {
      appState.collapsedTopics[topicKey] = !appState.collapsedTopics[topicKey];
      renderApp();
    }

    // ==================== DATA STRUCTURES ====================
    const documentation = {
      'algoritma-temelleri': {
        title: 'Algoritma Temelleri',
        icon: 'ğŸ§ ',
        color: 'from-orange-400 to-red-500',
        topics: [
          {
            title: 'Algoritma Nedir?',
            description: 'MantÄ±ksal dÃ¼ÅŸÃ¼nme ve problem Ã§Ã¶zme',
            content: `
              <p class="mb-4">Algoritma, bir problemi Ã§Ã¶zmek veya belirli bir amaca ulaÅŸmak iÃ§in tasarlanan yoldur. Kod yazmadan Ã¶nce algoritma kurmak, hatalarÄ± Ã¶nler.</p>
              <h4 class="font-bold text-lg mb-2 text-orange-400">AlgoritmanÄ±n Ã–zellikleri</h4>
              <ul class="list-disc ml-6 mb-4 space-y-2">
                <li><b>Girdi:</b> Ä°ÅŸlem iÃ§in gerekli veriler.</li>
                <li><b>SÄ±ralÄ±lÄ±k:</b> AdÄ±mlar belirli bir sÄ±rayla izlenir.</li>
                <li><b>Kesinlik:</b> Her adÄ±m net ve anlaÅŸÄ±lÄ±r olmalÄ±dÄ±r.</li>
                <li><b>Sonluluk:</b> Algoritma bir noktada bitmelidir.</li>
              </ul>`
          },
          {
            title: 'AkÄ±ÅŸ DiyagramlarÄ±',
            description: 'GÃ¶rselleÅŸtirme araÃ§larÄ±',
            content: `
              <p class="mb-4">AkÄ±ÅŸ diyagramlarÄ±, algoritmanÄ±n gÃ¶rsel bir temsilidir. Her ÅŸekil farklÄ± bir iÅŸlemi ifade eder:</p>
              <ul class="list-disc ml-6 mb-4 space-y-2">
                <li><b>Oval:</b> BaÅŸla / Bitir</li>
                <li><b>DikdÃ¶rtgen:</b> Ä°ÅŸlem / Atama</li>
                <li><b>EÅŸkenar DÃ¶rtgen:</b> Karar / KoÅŸul</li>
                <li><b>Paralelkenar:</b> Veri GiriÅŸi / Ã‡Ä±kÄ±ÅŸÄ±</li>
              </ul>`
          },
          {
            title: 'SÃ¶zde Kod (Pseudo-code)',
            description: 'YarÄ± kod, yarÄ± konuÅŸma dili',
            content: `
              <p class="mb-4">SÃ¶zde kod, programlama dili kurallarÄ±na takÄ±lmadan, algoritmayÄ± insan diline yakÄ±n bir ÅŸekilde yazmaktÄ±r.</p>
              <div class="doc-code-block mb-4">
                BAÅLA<br>
                SAYI OKU (sicaklik)<br>
                EÄER sicaklik > 30 Ä°SE<br>
                &nbsp;&nbsp;YAZ "Klima AÃ§"<br>
                DEÄÄ°LSE<br>
                &nbsp;&nbsp;YAZ "Klima Kapat"<br>
                BÄ°TÄ°R
              </div>`
          }
        ]
      },
      'temel-yazilim': {
        title: 'Temel YazÄ±lÄ±m Bilgileri',
        icon: 'ğŸ’»',
        color: 'from-purple-500 to-pink-600',
        topics: [
          {
            title: 'Program YapÄ±sÄ± ve SÃ¶zdizimi',
            description: 'Kod yazÄ±m kurallarÄ±',
            content: `
              <p class="mb-4">Arduino programlama dili (C++ tabanlÄ±), belirli yazÄ±m kurallarÄ±na sahiptir.</p>
              
              <h4 class="font-bold text-lg mb-2 text-purple-400">Temel Kurallar</h4>
              <ul class="list-disc ml-6 mb-4 space-y-2">
                <li><b>NoktalÄ± VirgÃ¼l (;):</b> Her komut satÄ±rÄ± ; ile bitmelidir.</li>
                <li><b>SÃ¼slÃ¼ Parantez { }:</b> Kod bloklarÄ±nÄ± (fonksiyon, dÃ¶ngÃ¼, if yapÄ±sÄ± vb.) kapsar.</li>
                <li><b>Yorum SatÄ±rlarÄ±:</b> // (tek satÄ±r) veya /* ... */ (Ã§ok satÄ±r) kullanÄ±lÄ±r. Kodun Ã§alÄ±ÅŸmasÄ±nÄ± etkilemez.</li>
              </ul>

              <h4 class="font-bold text-lg mb-2 text-purple-400">Ã–n Ä°ÅŸlemci KomutlarÄ±</h4>
              <p class="mb-3">Program derlenmeden Ã¶nce iÅŸlenen komutlardÄ±r.</p>
              <div class="doc-code-block mb-4">
<span class="directive">#define</span> LED_PIN <span class="number">13</span>       <span class="comment">// Sabit tanÄ±mlama (HafÄ±zada yer kaplamaz)</span>
<span class="directive">#include</span> &lt;<span class="string">Servo.h</span>&gt; <span class="comment">// KÃ¼tÃ¼phane dahil etme</span></div>`
          },
          {
            title: 'DeÄŸiÅŸkenler ve Veri Tipleri',
            description: 'Programda bilgi saklama',
            content: `
              <p class="mb-4">DeÄŸiÅŸkenler, programÄ±mÄ±zda sayÄ±lar, metinler veya durumlar gibi verileri saklamak iÃ§in kullanÄ±lÄ±r.</p>
              <ul class="list-disc ml-6 mb-4 space-y-2">
                <li><b>int:</b> Tam sayÄ±lar iÃ§in kullanÄ±lÄ±r (-32,768 ile 32,767 arasÄ±).</li>
                <li><b>float:</b> OndalÄ±klÄ± sayÄ±lar iÃ§in kullanÄ±lÄ±r (Ã–rn: 23.45).</li>
                <li><b>bool:</b> Sadece true (doÄŸru) veya false (yanlÄ±ÅŸ) deÄŸerini alÄ±r.</li>
                <li><b>char:</b> Tek bir karakter saklar (Ã–rn: 'A').</li>
                <li><b>String:</b> Metin dizileri iÃ§in kullanÄ±lÄ±r (Ã–rn: "ArduMind").</li>
              </ul>
              
              <h4 class="font-bold text-lg mb-2 text-purple-400">Sabitler</h4>
              <p class="mb-3">Arduino'da tanÄ±mlÄ± Ã¶zel deÄŸerlerdir.</p>
              <ul class="list-disc ml-6 mb-4 space-y-2">
                <li><b>HIGH / LOW:</b> Dijital 1 (5V) ve 0 (0V).</li>
                <li><b>INPUT / OUTPUT:</b> Pin giriÅŸ/Ã§Ä±kÄ±ÅŸ modu.</li>
              </ul>

              <div class="doc-code-block mb-4">
<span class="keyword">int</span> sayac = <span class="number">5</span>;
<span class="keyword">float</span> sicaklik = <span class="number">25.5</span>;
<span class="keyword">bool</span> islemBasarili = <span class="keyword">true</span>;</div>`
          },
          {
            title: 'Diziler (Arrays)',
            description: 'Ã‡oklu veri saklama',
            content: `
              <p class="mb-4">AynÄ± tÃ¼rdeki birden fazla veriyi tek bir deÄŸiÅŸken adÄ± altÄ±nda saklamak iÃ§in kullanÄ±lÄ±r.</p>
              
              <h4 class="font-bold text-lg mb-2 text-purple-400">Dizi TanÄ±mlama ve EriÅŸim</h4>
              <div class="doc-code-block mb-4">
<span class="comment">// 5 elemanlÄ± bir dizi tanÄ±mla</span>
<span class="keyword">int</span> notlar[<span class="number">5</span>] = {<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>};

<span class="comment">// Ä°lk elemana eriÅŸ (Ä°ndeks 0'dan baÅŸlar)</span>
<span class="keyword">int</span> ilkNot = notlar[<span class="number">0</span>]; <span class="comment">// 10</span>

<span class="comment">// Eleman deÄŸiÅŸtirme</span>
notlar[<span class="number">2</span>] = <span class="number">100</span>; <span class="comment">// 30 -> 100 oldu</span></div>

              <h4 class="font-bold text-lg mb-2 text-purple-400">String ve Karakter Dizileri</h4>
              <p class="mb-3">Metinleri saklamak iÃ§in iki yÃ¶ntem vardÄ±r:</p>
              
              <p class="mb-2 text-slate-300"><b>1. String Nesnesi:</b> KullanÄ±mÄ± kolaydÄ±r, hafÄ±zayÄ± dinamik kullanÄ±r.</p>
              <div class="doc-code-block mb-4">
<span class="keyword">String</span> isim = <span class="string">"ArduMind"</span>;
<span class="keyword">String</span> mesaj = isim + <span class="string">" ile Ã¶ÄŸren"</span>;</div>

              <p class="mb-2 text-slate-300"><b>2. Karakter Dizisi (char array):</b> HafÄ±za dostudur, C tabanlÄ±dÄ±r.</p>
              <div class="doc-code-block mb-4">
<span class="keyword">char</span> harfler[<span class="number">6</span>] = {'H', 'e', 'l', 'l', 'o', '\\0'};
<span class="comment">// '\\0' sonlandÄ±rÄ±cÄ± karakterdir</span></div>`
          },
          {
            title: 'KoÅŸul YapÄ±larÄ± (if-else, switch)',
            description: 'Karar verme mekanizmalarÄ±',
            content: `
              <p class="mb-4">ProgramÄ±n belirli durumlara gÃ¶re farklÄ± iÅŸlemler yapmasÄ±nÄ± saÄŸlar.</p>
              
              <h4 class="font-bold text-lg mb-2 text-purple-400">if - else if - else</h4>
              <div class="doc-code-block mb-4">
<span class="keyword">if</span> (sayac > <span class="number">10</span>) {
  <span class="keyword">Serial</span>.<span class="function">println</span>(<span class="string">"BÃ¼yÃ¼k"</span>);
} <span class="keyword">else</span> {
  <span class="keyword">Serial</span>.<span class="function">println</span>(<span class="string">"KÃ¼Ã§Ã¼k"</span>);
}</div>
              
              <h4 class="font-bold text-lg mb-2 text-purple-400">switch - case YapÄ±sÄ±</h4>
              <p class="mb-3">Bir deÄŸiÅŸkenin deÄŸerine gÃ¶re doÄŸrudan ilgili koda dallanÄ±r.</p>
              <div class="doc-code-block mb-4">
<span class="keyword">switch</span> (mod) {
  <span class="keyword">case</span> <span class="number">1</span>:
    <span class="comment">// Mod 1 iÅŸlemleri</span>
    <span class="keyword">break</span>;
  <span class="keyword">case</span> <span class="number">2</span>:
    <span class="comment">// Mod 2 iÅŸlemleri</span>
    <span class="keyword">break</span>;
  <span class="keyword">default</span>:
    <span class="comment">// VarsayÄ±lan iÅŸlem</span>
    <span class="keyword">break</span>;
}</div>

              <ul class="list-disc ml-6 mb-4 space-y-2">
                <li><b>break:</b> Her case sonunda gerekir, aksi halde bir sonraki case'e dÃ¼ÅŸer.</li>
                <li><b>TÃ¼rler:</b> int, char veya enum kullanÄ±labilir. String kullanÄ±lamaz.</li>
                <li><b>default:</b> HiÃ§bir case eÅŸleÅŸmezse Ã§alÄ±ÅŸÄ±r.</li>
              </ul>
              
              <div class="doc-code-block mb-4">
<span class="keyword">int</span> mod = <span class="number">0</span>;<br>
<span class="keyword">void</span> <span class="function">setup</span>() { <span class="function">pinMode</span>(<span class="number">13</span>, OUTPUT); }<br>
<span class="keyword">void</span> <span class="function">loop</span>() {<br>
  <span class="keyword">switch</span> (mod) {<br>
    <span class="keyword">case</span> <span class="number">0</span>: <span class="function">digitalWrite</span>(<span class="number">13</span>, LOW); <span class="keyword">break</span>;<br>
    <span class="keyword">case</span> <span class="number">1</span>: <span class="function">digitalWrite</span>(<span class="number">13</span>, HIGH); <span class="function">delay</span>(<span class="number">500</span>); <span class="function">digitalWrite</span>(<span class="number">13</span>, LOW); <span class="function">delay</span>(<span class="number">500</span>); <span class="keyword">break</span>;<br>
    <span class="keyword">case</span> <span class="number">2</span>: <span class="function">digitalWrite</span>(<span class="number">13</span>, HIGH); <span class="function">delay</span>(<span class="number">200</span>); <span class="function">digitalWrite</span>(<span class="number">13</span>, LOW); <span class="function">delay</span>(<span class="number">200</span>); <span class="keyword">break</span>;<br>
    <span class="keyword">default</span>: <span class="function">digitalWrite</span>(<span class="number">13</span>, LOW); <span class="keyword">break</span>;<br>
  }<br>
  mod = (mod + <span class="number">1</span>) % <span class="number">3</span>;<br>
  <span class="function">delay</span>(<span class="number">1000</span>);<br>
}</div>

              <h4 class="font-bold text-lg mb-2 text-purple-400">Ternary (?) OperatÃ¶rÃ¼</h4>
              <p class="mb-3">KÄ±sa if-else kullanÄ±mÄ±dÄ±r.</p>
              <div class="doc-code-block mb-4">
<span class="comment">// (KoÅŸul) ? DoÄŸruysa : YanlÄ±ÅŸsa</span>
<span class="keyword">String</span> sonuc = (puan >= <span class="number">50</span>) ? <span class="string">"GeÃ§ti"</span> : <span class="string">"KaldÄ±"</span>;</div>`
          },
          {
            title: 'DÃ¶ngÃ¼ler (Loops)',
            description: 'Tekrar eden iÅŸlemler',
            content: `
              <p class="mb-4">AynÄ± kod bloÄŸunu birden fazla kez Ã§alÄ±ÅŸtÄ±rmak iÃ§in kullanÄ±lÄ±r.</p>
              
              <h4 class="font-bold text-lg mb-2 text-purple-400">for DÃ¶ngÃ¼sÃ¼</h4>
              <p class="mb-3">Belirli bir sayÄ±da tekrar yapmak iÃ§in idealdÄ±r.</p>
              <div class="doc-code-block mb-4">
<span class="comment">// 0'dan 4'e kadar saydÄ±r (toplam 5 kez Ã§alÄ±ÅŸÄ±r)</span>
<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < <span class="number">5</span>; i++) {
  <span class="keyword">Serial</span>.<span class="function">println</span>(i);
  <span class="function">delay</span>(<span class="number">1000</span>);
}</div>
              
              <h4 class="font-bold text-lg mb-2 text-purple-400">while DÃ¶ngÃ¼sÃ¼</h4>
              <p class="mb-3">KoÅŸul doÄŸru olduÄŸu sÃ¼rece Ã§alÄ±ÅŸÄ±r.</p>
              <div class="doc-code-block mb-4">
<span class="keyword">int</span> sayac = <span class="number">0</span>;
<span class="keyword">while</span> (sayac < <span class="number">5</span>) {
  <span class="keyword">Serial</span>.<span class="function">println</span>(sayac);
  sayac++;
  <span class="function">delay</span>(<span class="number">1000</span>);
}</div>
              
              <h4 class="font-bold text-lg mb-2 text-purple-400">do-while DÃ¶ngÃ¼sÃ¼</h4>
              <p class="mb-3">En az bir kez Ã§alÄ±ÅŸÄ±r, sonra koÅŸulu kontrol eder.</p>
              <div class="doc-code-block mb-4">
<span class="keyword">int</span> sayac = <span class="number">0</span>;
<span class="keyword">do</span> {
  <span class="keyword">Serial</span>.<span class="function">println</span>(sayac);
  sayac++;
  <span class="function">delay</span>(<span class="number">1000</span>);
} <span class="keyword">while</span> (sayac < <span class="number">5</span>);</div>

              <h4 class="font-bold text-lg mb-2 text-purple-400">DÃ¶ngÃ¼ Kontrol Ä°fadeleri</h4>
              <ul class="list-disc ml-6 mb-4 space-y-2">
                <li><b>break:</b> DÃ¶ngÃ¼yÃ¼ anÄ±nda sonlandÄ±rÄ±r ve dÃ¶ngÃ¼den Ã§Ä±kar.</li>
                <li><b>continue:</b> DÃ¶ngÃ¼nÃ¼n o anki adÄ±mÄ±nÄ± atlar ve bir sonraki adÄ±ma geÃ§er.</li>
              </ul>
              <div class="doc-code-block mb-4">
<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < <span class="number">10</span>; i++) {
  <span class="keyword">if</span> (i == <span class="number">5</span>) <span class="keyword">break</span>;      <span class="comment">// 5 olunca dÃ¶ngÃ¼ biter</span>
  <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) <span class="keyword">continue</span>; <span class="comment">// Ã‡ift sayÄ±larÄ± atla</span>
  <span class="keyword">Serial</span>.<span class="function">println</span>(i);
}</div>`
          },
          {
            title: 'Fonksiyonlar',
            description: 'Yeniden kullanÄ±labilir kod bloklarÄ±',
            content: `
              <p class="mb-4">Fonksiyonlar, belirli bir gÃ¶revi yerine getiren ve tekrar kullanÄ±labilen kod bloklarÄ±dÄ±r. Kodun okunabilirliÄŸini artÄ±rÄ±r ve tekrarÄ± Ã¶nler.</p>
              
              <h4 class="font-bold text-lg mb-2 text-purple-400">1. DeÄŸer DÃ¶ndÃ¼rmeyen, Parametre Almayan (void)</h4>
              <p class="mb-3">Sadece iÃ§indeki iÅŸlemleri yapar, dÄ±ÅŸarÄ±dan bilgi almaz ve geriye sonuÃ§ vermez.</p>
              <div class="doc-code-block mb-4">
<span class="keyword">void</span> <span class="function">selamla</span>() {
  <span class="keyword">Serial</span>.<span class="function">println</span>(<span class="string">"Merhaba!"</span>);
}</div>

              <h4 class="font-bold text-lg mb-2 text-purple-400">2. DeÄŸer DÃ¶ndÃ¼rmeyen, Parametre Alan</h4>
              <p class="mb-3">DÄ±ÅŸarÄ±dan bilgi alÄ±r (parametre), iÅŸlem yapar ama geriye sonuÃ§ dÃ¶ndÃ¼rmez.</p>
              <div class="doc-code-block mb-4">
<span class="keyword">void</span> <span class="function">ledYak</span>(<span class="keyword">int</span> pin, <span class="keyword">int</span> sure) {
  <span class="function">digitalWrite</span>(pin, HIGH);
  <span class="function">delay</span>(sure);
  <span class="function">digitalWrite</span>(pin, LOW);
}

<span class="comment">// KullanÄ±mÄ±:</span>
<span class="function">ledYak</span>(<span class="number">13</span>, <span class="number">1000</span>);</div>

              <h4 class="font-bold text-lg mb-2 text-purple-400">3. DeÄŸer DÃ¶ndÃ¼ren, Parametre Alan</h4>
              <p class="mb-3">DÄ±ÅŸarÄ±dan bilgi alÄ±r, iÅŸlem yapar ve sonucu geri dÃ¶ndÃ¼rÃ¼r (return).</p>
              <div class="doc-code-block mb-4">
<span class="keyword">int</span> <span class="function">kareAl</span>(<span class="keyword">int</span> sayi) {
  <span class="keyword">return</span> sayi * sayi;
}

<span class="comment">// KullanÄ±mÄ±:</span>
<span class="keyword">int</span> sonuc = <span class="function">kareAl</span>(<span class="number">5</span>); <span class="comment">// sonuc 25 olur</span></div>`
          },
          {
            title: 'MantÄ±ksal OperatÃ¶rler',
            description: 'KoÅŸullarÄ± birleÅŸtirme',
            content: `
              <p class="mb-4">MantÄ±ksal operatÃ¶rler, birden fazla koÅŸulu birleÅŸtirmek iÃ§in kullanÄ±lÄ±r.</p>
              <ul class="list-disc ml-6 mb-4 space-y-2">
                <li><b>&& (AND):</b> Ä°ki koÅŸul da doÄŸruysa sonuÃ§ doÄŸru olur.</li>
                <li><b>|| (OR):</b> Ä°ki koÅŸuldan en az biri doÄŸruysa sonuÃ§ doÄŸru olur.</li>
                <li><b>! (NOT):</b> KoÅŸulun tersini alÄ±r.</li>
              </ul>
              <div class="doc-code-block mb-4">
<span class="keyword">if</span> (sicaklik > <span class="number">20</span> && sicaklik < <span class="number">30</span>) {
  <span class="keyword">Serial</span>.<span class="function">println</span>(<span class="string">"MÃ¼kemmel sÄ±caklÄ±k!"</span>);
}

<span class="keyword">if</span> (havaDurumu == <span class="string">"GÃ¼neÅŸli"</span> || havaDurumu == <span class="string">"KapalÄ±"</span>) {
  <span class="keyword">Serial</span>.<span class="function">println</span>(<span class="string">"DÄ±ÅŸarÄ± Ã§Ä±kabilirsin!"</span>);
}

<span class="keyword">if</span> (!isParasut) {
  <span class="keyword">Serial</span>.<span class="function">println</span>(<span class="string">"ParasÃ¼t aÃ§Ä±lmadÄ±!"</span>);
}</div>`
          }
        ]
      },
      basics: {
        title: 'Arduino Temelleri',
        icon: 'ğŸ”Œ',
        color: 'from-blue-500 to-blue-700',
        topics: [
          {
            title: 'setup() ve loop() FonksiyonlarÄ±',
            description: 'Her Arduino programÄ±nÄ±n temel yapÄ± taÅŸlarÄ±',
            content: `
              <p class="mb-4">Arduino programlarÄ± iki ana fonksiyondan oluÅŸur. Bu fonksiyonlar programÄ±n iskeletini oluÅŸturur ve biri olmadan diÄŸeri Ã§alÄ±ÅŸamaz.</p>
              
              <h4 class="font-bold text-lg mb-2 text-blue-400">setup() Fonksiyonu</h4>
              <p class="mb-3">Bu fonksiyon, Arduino'ya gÃ¼Ã§ verildiÄŸinde veya resetlendiÄŸinde <b>sadece bir kez</b> Ã§alÄ±ÅŸÄ±r. Genellikle pin modlarÄ±nÄ± ayarlamak, seri haberleÅŸmeyi baÅŸlatmak veya kÃ¼tÃ¼phaneleri ilklendirmek iÃ§in kullanÄ±lÄ±r.</p>
              
              <div class="doc-code-block mb-4">
<span class="keyword">void</span> <span class="function">setup</span>() {
  <span class="function">pinMode</span>(<span class="number">13</span>, OUTPUT);    <span class="comment">// 13. pini Ã§Ä±kÄ±ÅŸ yap</span>
  <span class="keyword">Serial</span>.<span class="function">begin</span>(<span class="number">9600</span>);   <span class="comment">// HaberleÅŸmeyi baÅŸlat</span>
}</div>

              <h4 class="font-bold text-lg mb-2 text-blue-400">loop() Fonksiyonu</h4>
              <p class="mb-3">setup() fonksiyonu tamamlandÄ±ktan hemen sonra Ã§alÄ±ÅŸmaya baÅŸlar ve Arduino aÃ§Ä±k olduÄŸu sÃ¼rece <b>sonsuz bir dÃ¶ngÃ¼</b> iÃ§inde tekrar eder. Ana program mantÄ±ÄŸÄ± burada yer alÄ±r.</p>
              
              <div class="doc-code-block mb-4">
<span class="keyword">void</span> <span class="function">loop</span>() {
  <span class="function">digitalWrite</span>(<span class="number">13</span>, HIGH); <span class="comment">// LED'i yak</span>
  <span class="function">delay</span>(<span class="number">1000</span>);          <span class="comment">// 1 saniye bekle</span>
  <span class="function">digitalWrite</span>(<span class="number">13</span>, LOW);  <span class="comment">// LED'i sÃ¶ndÃ¼r</span>
  <span class="function">delay</span>(<span class="number">1000</span>);          <span class="comment">// 1 saniye bekle</span>
}</div>`
          },
          {
            title: 'DeÄŸiÅŸkenler ve Veri Tipleri',
            description: 'Verileri saklama ve yÃ¶netme',
            content: `
              <p class="mb-4">Program iÃ§erisinde sayÄ±larÄ±, metinleri veya durumlarÄ± saklamak iÃ§in deÄŸiÅŸkenler kullanÄ±lÄ±r.</p>
              <ul class="list-disc ml-6 mb-4 space-y-2">
                <li><b>int:</b> Tam sayÄ±lar iÃ§in kullanÄ±lÄ±r (-32,768 ile 32,767 arasÄ±).</li>
                <li><b>float:</b> OndalÄ±klÄ± sayÄ±lar iÃ§in kullanÄ±lÄ±r (Ã–rn: 23.45).</li>
                <li><b>bool:</b> Sadece true (doÄŸru) veya false (yanlÄ±ÅŸ) deÄŸerini alÄ±r.</li>
                <li><b>char:</b> Tek bir karakter saklar (Ã–rn: 'A').</li>
                <li><b>String:</b> Metin dizileri iÃ§in kullanÄ±lÄ±r (Ã–rn: "ArduMind").</li>
              </ul>
              <div class="doc-code-block mb-4">
<span class="keyword">int</span> ledPin = <span class="number">13</span>;
<span class="keyword">float</span> sicaklik = <span class="number">25.5</span>;
<span class="keyword">bool</span> butonBasili = <span class="keyword">false</span>;</div>`
          }
        ]
      },
      digital: {
        title: 'Dijital Pin Kontrol',
        icon: 'ğŸ”˜',
        color: 'from-yellow-500 to-orange-600',
        topics: [
          {
            title: 'pinMode() - YapÄ±landÄ±rma',
            description: 'Pinleri giriÅŸ veya Ã§Ä±kÄ±ÅŸ olarak ayarlama',
            content: `
              <p class="mb-4">Her dijital pin, kullanÄ±m amacÄ±na gÃ¶re <b>INPUT</b> (GiriÅŸ) veya <b>OUTPUT</b> (Ã‡Ä±kÄ±ÅŸ) olarak ayarlanmalÄ±dÄ±r.</p>
              
              <h4 class="font-bold text-lg mb-2 text-yellow-400">OUTPUT Modu</h4>
              <p class="mb-3">Arduino'dan dÄ±ÅŸarÄ±ya akÄ±m gÃ¶ndermek iÃ§in kullanÄ±lÄ±r (LED yakmak, motor Ã§alÄ±ÅŸtÄ±rmak vb.).</p>
              
              <h4 class="font-bold text-lg mb-2 text-yellow-400">INPUT Modu</h4>
              <p class="mb-3">DÄ±ÅŸarÄ±dan gelen voltajÄ± okumak iÃ§in kullanÄ±lÄ±r (Buton okumak, sensÃ¶r verisi almak vb.).</p>

              <h4 class="font-bold text-lg mb-2 text-yellow-400">INPUT_PULLUP Modu</h4>
              <p class="mb-3">Dahili direnci aktif ederek butonu harici direnÃ§siz kullanmanÄ±zÄ± saÄŸlar. Buton basÄ±ldÄ±ÄŸÄ±nda 0 (LOW) dÃ¶ner.</p>`,
            miniQuiz: {
              question: "Bir LED'i kontrol etmek iÃ§in ilgili pini hangi modda ayarlamalÄ±yÄ±z?",
              options: ["INPUT", "OUTPUT", "INPUT_PULLUP", "ANALOG"],
              correct: 1,
              explanation: "LED'e akÄ±m gÃ¶ndererek onu yakmak istediÄŸimiz iÃ§in pini OUTPUT (Ã‡Ä±kÄ±ÅŸ) moduna ayarlamalÄ±yÄ±z.",
              concept: "dijital_pinler"
            }
          },
          {
            title: 'digitalWrite() ve digitalRead()',
            description: 'Pinlere yazma ve pinlerden okuma',
            content: `
              <h4 class="font-bold text-lg mb-2 text-yellow-400">digitalWrite(pin, deger)</h4>
              <p class="mb-3">Bir pine 5V (HIGH) veya 0V (LOW) gÃ¶nderir.</p>
              <div class="doc-code-block mb-4">digitalWrite(13, HIGH); <span class="comment">// 5V ver</span></div>

              <h4 class="font-bold text-lg mb-2 text-yellow-400">digitalRead(pin)</h4>
              <p class="mb-3">Bir pindeki voltajÄ±n HIGH (5V) mÄ± yoksa LOW (0V) mu olduÄŸunu okur.</p>
              <div class="doc-code-block mb-4">int durum = digitalRead(2); <span class="comment">// Pin 2'yi oku</span></div>`,
            miniQuiz: {
              question: "digitalRead(2) fonksiyonu ne zaman HIGH (1) deÄŸerini dÃ¶ndÃ¼rÃ¼r?",
              options: [
                "Pin 2'de 0V (GND) olduÄŸunda",
                "Pin 2'ye hiÃ§ baÄŸlantÄ± olmadÄ±ÄŸÄ±nda",
                "Pin 2'de 5V voltaj olduÄŸunda",
                "Pin 2 bir LED'e baÄŸlÄ± olduÄŸunda"
              ],
              correct: 2,
              explanation: "digitalRead() fonksiyonu, pinde 5V (veya ona yakÄ±n bir voltaj) algÄ±ladÄ±ÄŸÄ±nda HIGH dÃ¶ndÃ¼rÃ¼r.",
              concept: "dijital_pinler"
            }
          }
        ]
      },
      analog: {
        title: 'Analog Ä°ÅŸlemler',
        icon: 'ğŸ“‰',
        color: 'from-green-500 to-emerald-600',
        topics: [
          {
            title: 'analogRead() ve ADC MantÄ±ÄŸÄ±',
            description: 'DeÄŸiÅŸken voltajlarÄ± dijital veriye dÃ¶nÃ¼ÅŸtÃ¼rme',
            content: `
              <p class="mb-4">Arduino Uno'da bulunan Analog-Dijital DÃ¶nÃ¼ÅŸtÃ¼rÃ¼cÃ¼ (ADC), 0V ile 5V arasÄ±ndaki voltajÄ± <b>0 ile 1023</b> arasÄ±nda bir sayÄ±ya dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r.</p>
              <div class="doc-code-block mb-4">
<span class="keyword">int</span> sensorDegeri = <span class="function">analogRead</span>(A0);</div>
              <p class="mt-4 text-slate-300">Ã–rneÄŸin: 2.5V okunursa, fonksiyon yaklaÅŸÄ±k 512 deÄŸerini dÃ¶ndÃ¼rÃ¼r.</p>`,
            miniQuiz: {
              question: "Arduino Uno'da analogRead() fonksiyonu maksimum hangi deÄŸeri dÃ¶ndÃ¼rebilir?",
              options: ["255", "512", "1023", "2048"],
              correct: 2,
              explanation: "Arduino Uno 10-bit ADC kullandÄ±ÄŸÄ± iÃ§in 0 ile 1023 (2^10 - 1) arasÄ±nda deÄŸer dÃ¶ndÃ¼rÃ¼r.",
              concept: "analog_pinler"
            }
          },
          {
            title: 'PWM (analogWrite) ve Dimming',
            description: 'Sinyal geniÅŸlik modÃ¼lasyonu ile gÃ¼Ã§ kontrolÃ¼',
            content: `
              <p class="mb-4">Arduino tam bir analog Ã§Ä±kÄ±ÅŸ veremez, ancak <b>PWM (Pulse Width Modulation)</b> tekniÄŸi ile bunu taklit eder. Sinyali Ã§ok hÄ±zlÄ± aÃ§Ä±p kapatarak ortalama voltajÄ± deÄŸiÅŸtirir.</p>
              <ul class="list-disc ml-6 mb-4 space-y-2">
                <li><b>0:</b> Her zaman KAPALI (0V)</li>
                <li><b>127:</b> %50 AÃ‡IK - %50 KAPALI (Ortalama 2.5V)</li>
                <li><b>255:</b> Her zaman AÃ‡IK (5V)</li>
              </ul>
              <div class="doc-code-block mb-4">
<span class="function">analogWrite</span>(<span class="number">9</span>, <span class="number">128</span>); <span class="comment">// LED'i %50 parlaklÄ±kta yak</span></div>`,
            miniQuiz: {
              question: "Bir LED'i tam parlaklÄ±kta yakmak iÃ§in analogWrite(pin, deger) fonksiyonunda 'deger' ne olmalÄ±dÄ±r?",
              options: ["100", "127", "255", "1023"],
              correct: 2,
              explanation: "analogWrite() 8-bit Ã§Ã¶zÃ¼nÃ¼rlÃ¼k kullanÄ±r, bu yÃ¼zden 0-255 arasÄ± deÄŸer alÄ±r. 255 tam parlaklÄ±ÄŸÄ± temsil eder.",
              concept: "analog_pinler"
            }
          },
          {
            title: 'map() Fonksiyonu',
            description: 'DeÄŸer aralÄ±klarÄ±nÄ± dÃ¶nÃ¼ÅŸtÃ¼rme',
            content: `
              <p class="mb-4">Bir aralÄ±ktaki deÄŸeri baÅŸka bir aralÄ±ÄŸa oranlamak iÃ§in kullanÄ±lÄ±r. En yaygÄ±n kullanÄ±mÄ± 0-1023 (analog giriÅŸ) deÄŸerini 0-255 (PWM Ã§Ä±kÄ±ÅŸ) aralÄ±ÄŸÄ±na Ã§ekmektir.</p>
              <div class="doc-code-block mb-4">
<span class="keyword">int</span> parlaklik = <span class="function">map</span>(sensorDegeri, <span class="number">0</span>, <span class="number">1023</span>, <span class="number">0</span>, <span class="number">255</span>);</div>`
          }
        ]
      },
      serial: {
        title: 'Seri HaberleÅŸme',
        icon: 'ğŸ“¡',
        color: 'from-purple-500 to-pink-600',
        topics: [
          {
            title: 'Serial.begin ve println',
            description: 'PC ile veri alÄ±ÅŸveriÅŸi',
            content: `
              <p class="mb-4">Debug ve telemetri iÃ§in seri haberleÅŸme kullanÄ±lÄ±r. Arduino, USB kablosu Ã¼zerinden bilgisayarÄ±nÄ±za metin gÃ¶nderebilir.</p>
              <div class="doc-code-block mb-4">Serial.begin(9600);<br>Serial.println("Hata AyÄ±klama BaÅŸladÄ±...");</div>
              <p class="text-slate-300"><b>Ã–nemli:</b> Baud hÄ±zÄ±nÄ± (9600) Seri MonitÃ¶r ekranÄ± ile aynÄ± yapmalÄ±sÄ±nÄ±z.</p>`,
            miniQuiz: {
              question: "Serial.begin(9600) fonksiyonundaki '9600' deÄŸeri neyi ifade eder?",
              options: ["Pin numarasÄ±", "Veri hÄ±zÄ± (Baud rate)", "Metin uzunluÄŸu", "Gecikme sÃ¼resi"],
              correct: 1,
              explanation: "9600, haberleÅŸme hÄ±zÄ±nÄ± (saniyedeki bit sayÄ±sÄ±) belirten baud hÄ±zÄ±dÄ±r.",
              concept: "temel_arduino"
            }
          },
          {
            title: 'Serial.available() ve Read()',
            description: 'Bilgisayardan veri alma',
            content: `
              <p class="mb-4">Bilgisayardan Arduino'ya komut gÃ¶ndermek iÃ§in kullanÄ±lÄ±r.</p>
              <div class="doc-code-block mb-4">
<span class="keyword">if</span> (<span class="keyword">Serial</span>.<span class="function">available</span>() > <span class="number">0</span>) {
  <span class="keyword">char</span> gelenVeri = <span class="keyword">Serial</span>.<span class="function">read</span>();
}</div>`
          }
        ]
      },
      interrupts: {
        title: 'Kesme (Interrupt)',
        icon: 'âš¡',
        color: 'from-red-500 to-orange-600',
        topics: [
          {
            title: 'attachInterrupt Temelleri',
            description: 'DÄ±ÅŸ tetikleyiciye hÄ±zlÄ± tepki',
            content: `
              <p class="mb-4">Interrupt'lar (Kesmeler), ana program ne yaparsa yapsÄ±n, Ã¶nemli bir olay olduÄŸunda (bir butona basÄ±lmasÄ± gibi) programÄ± durdurup Ã¶zel bir fonksiyonu Ã§alÄ±ÅŸtÄ±rÄ±r.</p>
              <div class="doc-code-block mb-4">attachInterrupt(digitalPinToInterrupt(2), isr, RISING);</div>
              <p class="text-slate-300"><b>RISING:</b> Voltaj 0'dan 5V'a Ã§Ä±ktÄ±ÄŸÄ±nda tetiklenir.</p>`
          }
        ]
      },
      timing: {
        title: 'Zamanlama',
        icon: 'â±ï¸',
        color: 'from-slate-500 to-slate-700',
        topics: [
          {
            title: 'delay vs millis',
            description: 'Engelleyici olmayan yaklaÅŸÄ±m',
            content: `
              <p class="mb-4"><b>delay():</b> Arduino'yu tamamen durdurur (bloklar). Bu sÄ±rada hiÃ§bir sensÃ¶r okunamaz.</p>
              <p class="mb-4"><b>millis():</b> Arduino aÃ§Ä±ldÄ±ÄŸÄ±ndan beri geÃ§en milisaniyeyi dÃ¶ndÃ¼rÃ¼r. ZamanlayÄ±cÄ±lar oluÅŸturmak iÃ§in idealdir.</p>
              
              <h4 class="font-bold text-lg mb-2 text-slate-400">millis() ile LED YakÄ±p SÃ¶ndÃ¼rme (BloklamasÄ±z)</h4>
              <div class="doc-code-block mb-4">
<span class="keyword">unsigned long</span> eskiZaman = <span class="number">0</span>;
<span class="keyword">const long</span> aralik = <span class="number">1000</span>; <span class="comment">// 1 saniye</span>

<span class="keyword">void</span> <span class="function">loop</span>() {
  <span class="keyword">unsigned long</span> yeniZaman = <span class="function">millis</span>();
  
  <span class="keyword">if</span> (yeniZaman - eskiZaman >= aralik) {
    eskiZaman = yeniZaman;
    <span class="comment">// Ä°ÅŸlem yap (Ã–rn: LED durumunu deÄŸiÅŸtir)</span>
  }
}</div>`
          }
        ]
      },
      libraries: {
        title: 'KÃ¼tÃ¼phaneler ve Protokoller',
        icon: 'ğŸ“š',
        color: 'from-indigo-500 to-indigo-700',
        topics: [
          {
            title: 'Servo KÃ¼tÃ¼phanesi',
            description: 'AÃ§Ä± kontrolÃ¼',
            content: `
              <p class="mb-4">Servo motorlarÄ± kolayca kontrol etmek iÃ§in kullanÄ±lÄ±r. 0 ile 180 derece arasÄ± hassas kontrol saÄŸlar.</p>
              <div class="doc-code-block mb-4">
<span class="directive">#include</span> &lt;<span class="string">Servo.h</span>&gt;
<span class="keyword">Servo</span> motor;
motor.<span class="function">attach</span>(<span class="number">9</span>);
motor.<span class="function">write</span>(<span class="number">90</span>);</div>`
          },
          {
            title: 'I2C ProtokolÃ¼ (Wire)',
            description: 'Ä°ki kablo ile haberleÅŸme',
            content: `
              <p class="mb-4">LCD ekranlar, ivmeÃ¶lÃ§erler ve birÃ§ok sensÃ¶r I2C kullanÄ±r. Sadece <b>SDA</b> ve <b>SCL</b> pinleri Ã¼zerinden onlarca cihazla konuÅŸabilirsiniz.</p>
              <div class="doc-code-block mb-4">
<span class="directive">#include</span> &lt;<span class="string">Wire.h</span>&gt;
<span class="keyword">Wire</span>.<span class="function">begin</span>(); <span class="comment">// Master olarak baÅŸlat</span></div>`
          },
          {
            title: 'SPI ProtokolÃ¼',
            description: 'YÃ¼ksek hÄ±zlÄ± haberleÅŸme',
            content: `
              <p class="mb-4">SD kart modÃ¼lleri ve RFID okuyucular gibi yÃ¼ksek hÄ±z gerektiren donanÄ±mlar iÃ§in kullanÄ±lÄ±r.</p>
              <ul class="list-disc ml-6 space-y-1">
                <li><b>MOSI:</b> Veri Ã§Ä±kÄ±ÅŸÄ±</li>
                <li><b>MISO:</b> Veri giriÅŸi</li>
                <li><b>SCK:</b> Saat sinyali</li>
              </ul>`
          }
        ]
      },
      best: {
        title: 'Ä°yi Uygulamalar',
        icon: 'ğŸŒŸ',
        color: 'from-teal-500 to-teal-700',
        topics: [
          {
            title: 'Temiz Kod Prensipleri',
            description: 'Okunabilirlik ve bakÄ±m',
            content: `
              <p class="mb-4">Kodunuzun baÅŸkalarÄ± tarafÄ±ndan anlaÅŸÄ±lmasÄ± iÃ§in ÅŸu kurallara uyun:</p>
              <ul class="list-disc ml-6 space-y-2">
                <li>AnlamlÄ± deÄŸiÅŸken isimleri seÃ§in (Ã–rn: <code>int x</code> yerine <code>int sensorDegeri</code>).</li>
                <li>Bol bol yorum satÄ±rÄ± ekleyin.</li>
                <li>SÄ±k kullanÄ±lan iÅŸlemleri fonksiyonlara bÃ¶lÃ¼n.</li>
              </ul>`
          }
        ]
      }
    };
    
    const modules = [
      {
        id: 'algoritma-temelleri',
        title: 'Algoritma Temelleri',
        description: 'Problem Ã§Ã¶zme mantÄ±ÄŸÄ±, akÄ±ÅŸ diyagramlarÄ± ve sÃ¶zde kod',
        icon: 'ğŸ§ ',
        color: 'from-orange-400 to-red-500',
        xpReward: 100,
        lessons: [
          { id: 'algoritma-nedir', title: 'Algoritma Nedir?', duration: '5 dk' },
          { id: 'akis-diyagramlari', title: 'AkÄ±ÅŸ DiyagramlarÄ±', duration: '10 dk' },
          { id: 'sozde-kod', title: 'SÃ¶zde Kod (Pseudo-code)', duration: '10 dk' },
          { id: 'mantik-operatÃ¶rleri', title: 'MantÄ±ksal OperatÃ¶rler', duration: '8 dk' }
        ]
      },
      {
        id: 'temel-yazilim',
        title: 'Temel YazÄ±lÄ±m Bilgileri',
        description: 'DeÄŸiÅŸkenler, koÅŸullar, dÃ¶ngÃ¼ler ve fonksiyonlar',
        icon: '',
        color: 'from-purple-500 to-pink-600',
        xpReward: 80,
        lessons: [
          { id: 'degiskenler', title: 'DeÄŸiÅŸkenler ve Veri Tipleri', duration: '10 dk' },
          { id: 'kosullar', title: 'KoÅŸul YapÄ±larÄ± (if-else)', duration: '12 dk' },
          { id: 'donguler', title: 'DÃ¶ngÃ¼ler (for, while)', duration: '15 dk' },
          { id: 'fonksiyonlar', title: 'Fonksiyonlar ve Parametreler', duration: '15 dk' }
        ]
      },
      {
        id: 'arduino-basics',
        title: 'Arduino Temelleri',
        description: 'Digital Pin KullanÄ±mÄ±',
        icon: '',
        color: 'from-blue-500 to-purple-600',
        xpReward: 100,
        lessons: [
          { id: 'setup-loop', title: 'setup() ve loop() FonksiyonlarÄ±', duration: '10 dk' },
          { id: 'pinmode', title: 'pinMode() ile Pin YapÄ±landÄ±rma', duration: '15 dk' },
          { id: 'digitalwrite', title: 'digitalWrite() KullanÄ±mÄ±', duration: '12 dk' }
        ]
      },
      {
        id: 'led-projects',
        title: 'LED Kontrol Projeleri',
        description: 'YanÄ±p SÃ¶nen LED',
        icon: '',
        color: 'from-green-500 to-emerald-600',
        xpReward: 150,
        lessons: [
          { id: 'blink', title: 'LED YakÄ±p SÃ¶ndÃ¼rme', duration: '8 dk' },
          { id: 'multiple-leds', title: 'Ã‡oklu LED KontrolÃ¼', duration: '15 dk' },
          { id: 'led-pwm', title: 'PWM ile LED ParlaklÄ±ÄŸÄ± KontrolÃ¼', duration: '12 dk' },
          { id: 'led-seviyesi', title: 'LED Seviyesi GÃ¶sterimi', duration: '15 dk' }
        ]
      },
      {
        id: 'button-control',
        title: 'Buton ve SensÃ¶rler',
        description: 'Dijital GiriÅŸ Ä°ÅŸlemleri',
        icon: '',
        color: 'from-orange-500 to-red-600',
        xpReward: 120,
        lessons: [
          { id: 'button-read', title: 'Buton Okuma Temelleri', duration: '12 dk' },
          { id: 'button-led', title: 'Buton ile LED KontrolÃ¼', duration: '15 dk' },
          { id: 'pull-up-down', title: 'Pull-up ve Pull-down DirenÃ§ler', duration: '10 dk' },
          { id: 'button-state', title: 'Buton Durum YÃ¶netimi', duration: '12 dk' }
        ]
      },
      {
        id: 'analog-operations',
        title: 'Analog Ä°ÅŸlemler',
        description: 'Analog GiriÅŸ ve PWM Ã‡Ä±kÄ±ÅŸ',
        icon: '',
        color: 'from-teal-500 to-cyan-600',
        xpReward: 180,
        lessons: [
          { id: 'analog-read', title: 'analogRead() ve ADC MantÄ±ÄŸÄ±', duration: '15 dk' },
          { id: 'analog-write', title: 'analogWrite() ve PWM', duration: '12 dk' },
          { id: 'potentiometer', title: 'Potansiyometre KullanÄ±mÄ±', duration: '15 dk' },
          { id: 'map-func', title: 'map() Fonksiyonu ile DeÄŸer DÃ¶nÃ¼ÅŸtÃ¼rme', duration: '10 dk' }
        ]
      },
      {
        id: 'serial-communication',
        title: 'Seri HaberleÅŸme',
        description: 'PC ile Veri AlÄ±ÅŸveriÅŸi',
        icon: '',
        color: 'from-indigo-500 to-purple-600',
        xpReward: 150,
        lessons: [
          { id: 'serial-begin', title: 'Serial.begin() ve BaÄŸlantÄ± Kurma', duration: '10 dk' },
          { id: 'serial-print', title: 'Serial.print() ile Veri GÃ¶nderme', duration: '12 dk' },
          { id: 'serial-read', title: 'Serial.read() ile Veri Alma', duration: '15 dk' },
          { id: 'serial-monitor', title: 'Seri MonitÃ¶r KullanÄ±mÄ±', duration: '8 dk' }
        ]
      },
      {
        id: 'motor-control',
        title: 'Motor Kontrol',
        description: 'DC Motor ve Servo KontrolÃ¼',
        icon: '',
        color: 'from-amber-500 to-orange-600',
        xpReward: 200,
        lessons: [
          { id: 'dc-motor', title: 'DC Motor Temelleri', duration: '15 dk' },
          { id: 'l298n-driver', title: 'L298N Motor SÃ¼rÃ¼cÃ¼ KullanÄ±mÄ±', duration: '18 dk' },
          { id: 'servo-basics', title: 'Servo Motor Temelleri', duration: '15 dk' },
          { id: 'servo-control', title: 'Servo Motor AÃ§Ä± KontrolÃ¼', duration: '12 dk' }
        ]
      },
      {
        id: 'sensors-advanced',
        title: 'GeliÅŸmiÅŸ SensÃ¶rler',
        description: 'Mesafe, Ses ve Hareket SensÃ¶rleri',
        icon: '',
        color: 'from-rose-500 to-red-600',
        xpReward: 220,
        lessons: [
          { id: 'hc-sr04', title: 'HC-SR04 Ultrasonik Mesafe SensÃ¶rÃ¼', duration: '18 dk' },
          { id: 'pir-sensor', title: 'PIR Hareket SensÃ¶rÃ¼', duration: '15 dk' },
          { id: 'sound-sensor', title: 'Ses SensÃ¶rÃ¼ KullanÄ±mÄ±', duration: '12 dk' },
          { id: 'temperature', title: 'SÄ±caklÄ±k SensÃ¶rÃ¼ (DS18B20)', duration: '20 dk' }
        ]
      },
      {
        id: 'libraries',
        title: 'KÃ¼tÃ¼phaneler',
        description: 'DÄ±ÅŸ KÃ¼tÃ¼phanelerin KullanÄ±mÄ±',
        icon: '',
        color: 'from-violet-500 to-fuchsia-600',
        xpReward: 160,
        lessons: [
          { id: 'library-basics', title: 'KÃ¼tÃ¼phane Temelleri', duration: '10 dk' },
          { id: 'servo-library', title: 'Servo KÃ¼tÃ¼phanesi', duration: '12 dk' },
          { id: 'wire-library', title: 'Wire (I2C) KÃ¼tÃ¼phanesi', duration: '15 dk' },
          { id: 'spi-library', title: 'SPI KÃ¼tÃ¼phanesi', duration: '15 dk' }
        ]
      },
      {
        id: 'timing-interrupts',
        title: 'Zamanlama ve Kesmeler',
        description: 'Engelleyici Olmayan Zamanlama',
        icon: '',
        color: 'from-slate-500 to-gray-600',
        xpReward: 190,
        lessons: [
          { id: 'delay-vs-millis', title: 'delay() vs millis()', duration: '15 dk' },
          { id: 'millis-timer', title: 'millis() ile ZamanlayÄ±cÄ±', duration: '18 dk' },
          { id: 'interrupts-basics', title: 'Kesmeler (Interrupts) Temelleri', duration: '15 dk' },
          { id: 'attach-interrupt', title: 'attachInterrupt() KullanÄ±mÄ±', duration: '12 dk' }
        ]
      }
    ];

    const videoLessons = [
      { id: 'getting-started', title: 'Arduino BaÅŸlangÄ±Ã§: Kurulum ve Blink', duration: '12 dk', url: 'https://www.youtube.com/results?search_query=arduino+blink+turkce', topic: 'Temeller', step: 1 },
      { id: 'digital-write', title: 'digitalWrite ile LED Kontrol', duration: '10 dk', url: 'https://www.youtube.com/results?search_query=digitalWrite+arduino+turkce', topic: 'Dijital Ã‡Ä±kÄ±ÅŸ', step: 2 },
      { id: 'button', title: 'Buton Okuma ve Pull-down', duration: '14 dk', url: 'https://www.youtube.com/results?search_query=arduino+buton+pull+down+turkce', topic: 'Dijital GiriÅŸ', step: 3 },
      { id: 'analog', title: 'AnalogRead ve Potansiyometre', duration: '15 dk', url: 'https://www.youtube.com/results?search_query=arduino+analogRead+potansiyometre+turkce', topic: 'Analog GiriÅŸ', step: 4 },
      { id: 'servo', title: 'Servo Motor KontrolÃ¼', duration: '13 dk', url: 'https://www.youtube.com/results?search_query=arduino+servo+turkce', topic: 'Hareket', step: 5 },
      { id: 'motor', title: 'PWM ve DC Motor', duration: '16 dk', url: 'https://www.youtube.com/results?search_query=arduino+pwm+dc+motor+turkce', topic: 'PWM Kontrol', step: 6 },
      { id: 'ultrasonic', title: 'HC-SR04 Mesafe SensÃ¶rÃ¼', duration: '18 dk', url: 'https://www.youtube.com/results?search_query=arduino+hc-sr04+mesafe+sensoru+turkce', topic: 'SensÃ¶rler', step: 7 },
      { id: 'millis', title: 'delay() Yerine millis() KullanÄ±mÄ±', duration: '20 dk', url: 'https://www.youtube.com/results?search_query=arduino+millis+kullanimi+turkce', topic: 'Zamanlama', step: 8 },
      { id: 'interrupts', title: 'Kesmeler (Interrupts) Temelleri', duration: '15 dk', url: 'https://www.youtube.com/results?search_query=arduino+kesmeler+interrupts+turkce', topic: 'Ä°leri Seviye', step: 9 },
      { id: 'lcd-i2c', title: 'I2C LCD Ekran KullanÄ±mÄ±', duration: '14 dk', url: 'https://www.youtube.com/results?search_query=arduino+i2c+lcd+ekran+turkce', topic: 'GÃ¶rselleÅŸtirme', step: 10 }
    ];

    const learningPath = [
      { 
        id: 'step-algorithm', 
        title: 'Algoritma EÄŸitimi', 
        description: 'Kod yazmaya baÅŸlamadan Ã¶nce dÃ¼ÅŸÃ¼nme biÃ§imimizi geliÅŸtirelim. Algoritma, bir problemi Ã§Ã¶zmek iÃ§in izlenen yol haritasÄ±dÄ±r.',
        docKey: 'algoritma-temelleri', 
        videoId: 'getting-started',
        quizId: 'algoritma-temelleri',
        algoBuilder: true,
        algorithm: 'BAÅLA -> Problemi TanÄ±mla -> AdÄ±mlarÄ± Belirle -> KoÅŸullarÄ± Kontrol Et -> Ã‡Ã¶zÃ¼me UlaÅŸ -> BÄ°TÄ°R',
        circuit: 'Sadece kaÄŸÄ±t, kalem ve zihniniz yeterli!',
        objectives: ['Problem parÃ§alamayÄ± Ã¶ÄŸren', 'AkÄ±ÅŸ diyagramÄ± Ã§iz', 'KoÅŸul ve dÃ¶ngÃ¼ iliÅŸkisini kavra'],
        tasks: ['Basit bir gÃ¼nlÃ¼k rutinin akÄ±ÅŸÄ±nÄ± Ã§iz', 'Ä°ki koÅŸullu (if/else) Ã¶rnek oluÅŸtur'],
        pitfalls: ['Ã‡ok fazla detaya boÄŸulmak', 'KoÅŸulsuz dÃ¶ngÃ¼ planlamak'],
        challenge: {
          type: 'find-bug',
          question: 'AÅŸaÄŸÄ±daki algoritmada mantÄ±k hatasÄ± nerede?',
          code: '1. BAÅLA\n2. LambayÄ± AÃ§\n3. Hava AydÄ±nlÄ±k mÄ±?\n4. EVET ise 2. AdÄ±ma Git\n5. HAYIR ise 6. AdÄ±ma Git\n6. BÄ°TÄ°R',
          options: [
            'AdÄ±m 4 sonsuz dÃ¶ngÃ¼ye girer',
            'AdÄ±m 3 gereksizdir',
            'HAYIR ise lamba kapatÄ±lmalÄ±ydÄ±',
            'SÃ¶zde kod yanlÄ±ÅŸ yazÄ±lmÄ±ÅŸ'
          ],
          correct: 0,
          explanation: 'EÄŸer hava aydÄ±nlÄ±kken lambayÄ± tekrar aÃ§maya giderseniz (AdÄ±m 4 -> 2), program orada takÄ±lÄ± kalÄ±r ve asla bitmez.',
          concept: 'algoritma'
        }
      },
      { 
        id: 'step-0', 
        title: 'Temel YazÄ±lÄ±m Bilgileri', 
        description: 'Arduino ile Ã§alÄ±ÅŸmadan Ã¶nce temel programlama kavramlarÄ±nÄ± Ã¶ÄŸrenelim: deÄŸiÅŸkenler, koÅŸullar, dÃ¶ngÃ¼ler ve fonksiyonlar.',
        docKey: 'temel-yazilim', 
        videoId: 'getting-started',
        quizId: 'temel-yazilim',
        algorithm: 'Ã–ÄREN -> DeÄŸiÅŸkenler -> KoÅŸullar (if-else) -> DÃ¶ngÃ¼ler -> Fonksiyonlar -> PRATÄ°K ET',
        circuit: 'Bilgisayar ve internet baÄŸlantÄ±sÄ± yeterlidir.',
        objectives: ['Temel kontrol yapÄ±larÄ±', 'Fonksiyon yapÄ±sÄ± ve Ã§aÄŸrÄ±m', 'DeÄŸiÅŸken kapsamÄ±'],
        tasks: ['Ä°ki sayÄ± toplayan fonksiyon yaz', 'KoÅŸulla min/max bul'],
        pitfalls: ['Sonsuz dÃ¶ngÃ¼', 'YanlÄ±ÅŸ tÃ¼r dÃ¶nÃ¼ÅŸÃ¼mÃ¼'],
        challenge: {
          type: 'code-completion',
          question: 'Tam sayÄ± saklamak iÃ§in hangi deÄŸiÅŸken tipini kullanmalÄ±yÄ±z?',
          code: '______ sayi = 10;',
          answer: 'int',
          hint: 'Integer kelimesinin kÄ±saltmasÄ±.',
          concept: 'degiskenler'
        }
      },
      { 
        id: 'step-1', 
        title: 'Kurulum ve Blink', 
        description: 'Arduino dÃ¼nyasÄ±na ilk adÄ±m! YazÄ±lÄ±mÄ± kuracaÄŸÄ±z ve dahili LED\'i yakÄ±p sÃ¶ndÃ¼receÄŸiz.',
        docKey: 'basics', 
        videoId: 'getting-started',
        quizId: 'basics',
        algorithm: 'BAÅLA -> Pin 13 Ã‡Ä±kÄ±ÅŸ Yap -> DÃ–NGÃœ: LED Yak -> 1sn Bekle -> LED SÃ¶ndÃ¼r -> 1sn Bekle -> DÃ–NGÃœ BAÅI',
        circuit: 'Arduino Uno -> USB Kablosu -> Dahili LED (Pin 13)',
        sampleCodeKey: 'blink',
        objectives: ['GeliÅŸtirme ortamÄ±nÄ± kur', 'pinMode/digitalWrite kullan'],
        tasks: ['Blink sÃ¼resini deÄŸiÅŸtir', 'LEDâ€™i 3 kez hÄ±zlÄ± yak-sÃ¶ndÃ¼r'],
        pitfalls: ['YanlÄ±ÅŸ pin seÃ§imi', 'Bekleme sÃ¼resini Ã§ok uzun tutma'],
        challenge: {
          type: 'find-bug',
          question: 'Bu kod neden LED\'i yakmaz?',
          code: 'void setup() {\n  pinMode(13, INPUT);\n}\nvoid loop() {\n  digitalWrite(13, HIGH);\n}',
          options: [
            'Pin 13 OUTPUT olarak ayarlanmalÄ±ydÄ±',
            'delay() fonksiyonu eksik',
            'HIGH yerine 1 yazÄ±lmalÄ±ydÄ±',
            'loop fonksiyonu boÅŸ kalmalÄ±ydÄ±'
          ],
          correct: 0,
          explanation: 'Bir LED\'i kontrol etmek (akÄ±m gÃ¶ndermek) iÃ§in pini OUTPUT moduna almalÄ±sÄ±nÄ±z. INPUT modunda pin sadece voltaj okur.',
          concept: 'dijital_pinler'
        }
      },
      { 
        id: 'step-2', 
        title: 'Dijital Ã‡Ä±kÄ±ÅŸ: LED', 
        description: 'Harici bir LED baÄŸlayarak direnÃ§ kullanÄ±mÄ±nÄ± ve dijital sinyalleri Ã¶ÄŸreneceÄŸiz.',
        docKey: 'digital', 
        videoId: 'digital-write',
        quizId: 'digital',
        algorithm: 'BAÅLA -> Pin 9 Ã‡Ä±kÄ±ÅŸ Yap -> DÃ–NGÃœ: Pin 9 HIGH -> Bekle -> Pin 9 LOW -> Bekle -> DÃ–NGÃœ BAÅI',
        circuit: 'Arduino Pin 9 -> 220 Ohm DirenÃ§ -> LED (+) | LED (-) -> GND',
        objectives: ['LED yÃ¶nÃ¼nÃ¼ doÄŸru baÄŸla', 'DirenÃ§ seÃ§imini Ã¶ÄŸren'],
        tasks: ['220 vs 330 ohm farkÄ±nÄ± gÃ¶zle', 'Morse kodu ile â€œSOSâ€ yak'],
        pitfalls: ['DirenÃ§siz LED', 'GND/5V hatalarÄ±nÄ± karÄ±ÅŸtÄ±rma']
      },
      { 
        id: 'step-3', 
        title: 'Dijital GiriÅŸ: Buton', 
        description: 'Butonlar ile dÄ±ÅŸ dÃ¼nyadan veri almayÄ± ve karar yapÄ±larÄ±nÄ± (if-else) keÅŸfedeceÄŸiz.',
        docKey: 'digital', 
        videoId: 'button',
        quizId: 'digital',
        algorithm: 'BAÅLA -> Pin 2 GiriÅŸ, Pin 13 Ã‡Ä±kÄ±ÅŸ -> DÃ–NGÃœ: Pin 2 OKU -> EÄER BasÄ±lÄ±ysa LED Yak DEÄÄ°LSE SÃ¶ndÃ¼r -> DÃ–NGÃœ BAÅI',
        circuit: '5V -> Buton -> Pin 2 (10k Pull-down direnÃ§ ile GND\'ye baÄŸlÄ±)',
        objectives: ['Pull-up/Pull-down mantÄ±ÄŸÄ±', 'SÄ±Ã§rama (debounce) kavramÄ±'],
        tasks: ['INPUT_PULLUP ile kur', 'BasÄ±lÄ± tutma ve tek tÄ±k farkÄ±nÄ± uygula'],
        pitfalls: ['Debounce yoksa yalancÄ± tetik', 'YanlÄ±ÅŸ direnÃ§ yÃ¶nÃ¼']
      },
      { 
        id: 'step-switch', 
        title: 'Switch-Case ile Mod KontrolÃ¼', 
        description: 'Birden fazla durumu dÃ¼zenli ve okunaklÄ± ÅŸekilde yÃ¶netmeyi Ã¶ÄŸren.',
        docKey: 'temel-yazilim', 
        videoId: 'getting-started',
        quizId: 'temel-yazilim',
        algorithm: 'BAÅLA -> Mod Oku -> SWITCH(mod): 0 KapalÄ±, 1 YavaÅŸ, 2 HÄ±zlÄ± -> LED Kontrol -> DÃ–NGÃœ BAÅI',
        circuit: 'Arduino Pin 13 -> Dahili LED veya harici LED',
        sampleCodeKey: 'switch_modes',
        objectives: ['Ã‡oklu durum yÃ¶netimi', 'default durum gÃ¼venliÄŸi'],
        tasks: ['3 farklÄ± blink modu oluÅŸtur', 'Invalid mod iÃ§in gÃ¼venli fallback'],
        pitfalls: ['break eksikliÄŸi', 'Modlar arasÄ±nda tutarsÄ±z gecikme']
      },
      { 
        id: 'step-4', 
        title: 'Analog GiriÅŸ: Potansiyometre', 
        description: 'SÄ±fÄ±r ve birin Ã¶tesine geÃ§iyoruz! DeÄŸiÅŸken voltaj deÄŸerlerini okuyacaÄŸÄ±z.',
        docKey: 'basics', 
        videoId: 'analog',
        quizId: 'analog',
        algorithm: 'BAÅLA -> Pin A0 Analog GiriÅŸ -> DÃ–NGÃœ: A0 OKU -> DeÄŸeri Seri Porta Yaz -> Bekle -> DÃ–NGÃœ BAÅI',
        circuit: 'Potansiyometre: Sol Pin (GND), Orta Pin (A0), SaÄŸ Pin (5V)',
        sampleCodeKey: 'potentiometer',
        objectives: ['Analog okuma ve map kullanÄ±mÄ±', 'Seri monitÃ¶r Ã§Ä±ktÄ±sÄ±'],
        tasks: ['ParlaklÄ±ÄŸÄ± pot ile kontrol et', 'OkumayÄ± ortalama alarak yumuÅŸat'],
        pitfalls: ['YanlÄ±ÅŸ pin (A0 yerine 0)', 'GÃ¼rÃ¼ltÃ¼lÃ¼ okuma iÃ§in filtresiz kullanÄ±m']
      },
      { 
        id: 'step-5', 
        title: 'Servo ve Hareket', 
        description: 'Harekete geÃ§me vakti! Servo motoru istediÄŸimiz aÃ§Ä±ya dÃ¶ndÃ¼receÄŸiz.',
        docKey: 'basics', 
        videoId: 'servo',
        quizId: 'servo',
        algorithm: 'BAÅLA -> Servo KÃ¼tÃ¼phanesi Ekle -> Pin 9 Servo SeÃ§ -> DÃ–NGÃœ: 0 Dereceye Git -> Bekle -> 180 Dereceye Git -> Bekle',
        circuit: 'Servo: Kahverengi (GND), KÄ±rmÄ±zÄ± (5V), Turuncu (Pin 9)',
        sampleCodeKey: 'servo',
        objectives: ['Servo.attach ve .write', 'Besleme ve akÄ±m ihtiyacÄ±'],
        tasks: ['Pot ile servo aÃ§Ä±sÄ±nÄ± kontrol et', '90Â° merkezleme animasyonu'],
        pitfalls: ['USBâ€™den yetersiz akÄ±m', 'YanlÄ±ÅŸ PWM pin kullanÄ±mÄ±']
      },
      { 
        id: 'step-6', 
        title: 'PWM ve LED ParlaklÄ±ÄŸÄ±', 
        description: 'LED\'lerin parlaklÄ±ÄŸÄ±nÄ± kademeli olarak deÄŸiÅŸtirmeyi (Dimming) Ã¶ÄŸreneceÄŸiz.',
        docKey: 'analog', 
        videoId: 'motor',
        quizId: 'analog',
        algorithm: 'BAÅLA -> Pin 9 (PWM) Ã‡Ä±kÄ±ÅŸ -> DÃ–NGÃœ: 0\'dan 255\'e kadar PARLAKLIK ARTTIR -> Bekle -> 255\'ten 0\'a PARLAKLIK AZALT',
        circuit: 'Arduino Pin 9 (PWM) -> 220 Ohm DirenÃ§ -> LED (+) | LED (-) -> GND',
        sampleCodeKey: 'motor',
        objectives: ['PWM temelleri', 'DÃ¼zgÃ¼n geÃ§iÅŸ iÃ§in adÄ±m ve gecikme'],
        tasks: ['SinÃ¼s tabanlÄ± dimming dene', 'PWM pin olmayanlarda hata kontrolÃ¼'],
        pitfalls: ['PWM olmayan pine analogWrite', 'Ã‡ok bÃ¼yÃ¼k gecikme ile donuk animasyon']
      },
      { 
        id: 'step-7', 
        title: 'Seri HaberleÅŸme', 
        description: 'Arduino ile bilgisayar arasÄ±nda veri alÄ±ÅŸveriÅŸi yaparak sensÃ¶r deÄŸerlerini ekranda gÃ¶receÄŸiz.',
        docKey: 'basics', 
        videoId: 'getting-started',
        quizId: 'serial',
        algorithm: 'BAÅLA -> Seri HaberleÅŸme BaÅŸlat (9600 baud) -> DÃ–NGÃœ: "Merhaba DÃ¼nya" Yaz -> 1sn Bekle',
        circuit: 'Arduino -> USB Kablosu -> Bilgisayar (Seri Port EkranÄ±)',
        objectives: ['Serial.begin ve baud seÃ§imi', 'print vs println'],
        tasks: ['SensÃ¶r verisini formatlÄ± yaz', 'Hata durumunu ayrÄ± satÄ±rda gÃ¶ster'],
        pitfalls: ['Serial.begin unutma', 'YanlÄ±ÅŸ baud']
      },
      { 
        id: 'step-8', 
        title: 'Mesafe SensÃ¶rÃ¼ (HC-SR04)', 
        description: 'Ses dalgalarÄ±yla engel tespiti yapmayÄ± Ã¶ÄŸreneceÄŸiz.',
        docKey: 'basics', 
        videoId: 'ultrasonic',
        quizId: 'sensors',
        algorithm: 'BAÅLA -> Trig Pin Ã‡Ä±kÄ±ÅŸ, Echo Pin GiriÅŸ -> DÃ–NGÃœ: Sinyal GÃ¶nder -> SÃ¼re Ã–lÃ§ -> Mesafeye Ã‡evir -> Seri Porta Yaz',
        circuit: 'Trig: Pin 12, Echo: Pin 11, VCC: 5V, GND: GND',
        sampleCodeKey: 'ultrasonic',
        objectives: ['pulseIn ile sÃ¼re Ã¶lÃ§Ã¼mÃ¼', 'Mesafeye dÃ¶nÃ¼ÅŸÃ¼m'],
        tasks: ['YakÄ±nlÄ±kta LED yak', 'Mesafeye gÃ¶re PWM parlaklÄ±k ayarla'],
        pitfalls: ['YanlÄ±ÅŸ pin eÅŸlemesi', 'YanlÄ±ÅŸ Ã¶lÃ§ek katsayÄ±sÄ±']
      },
      { 
        id: 'step-9',
        title: 'Zamanlama: delayâ€™siz millis()',
        description: 'Engelleyici gecikmeleri bÄ±rak; millis() ile akÄ±cÄ± zamanlama yap.',
        docKey: 'basics',
        videoId: 'millis',
        quizId: 'basics',
        algorithm: 'BAÅLA -> SonZaman=millis -> DÃ–NGÃœ: millis - SonZaman >= aralÄ±k ise eylem -> SonZamanÄ± gÃ¼ncelle',
        circuit: 'LED ve buton ile non-blocking blink',
        objectives: ['Non-blocking akÄ±ÅŸ', 'Ã‡oklu zamanlayÄ±cÄ±'],
        tasks: ['Ä°ki farklÄ± aralÄ±kta iki LED yÃ¶net', 'Butonla zamanlayÄ±cÄ± sÄ±fÄ±rla'],
        pitfalls: ['unsigned long taÅŸmasÄ±', 'millis farkÄ±nÄ± yanlÄ±ÅŸ almak']
      },
      { 
        id: 'step-10',
        title: 'Kesme (Interrupt) ile HÄ±zlÄ± Tepki',
        description: 'Harici olaylara anÄ±nda tepki vermeyi Ã¶ÄŸren.',
        docKey: 'basics',
        videoId: 'interrupts',
        quizId: 'digital',
        algorithm: 'BAÅLA -> attachInterrupt -> ISR iÃ§inde bayrak ayarla -> DÃ–NGÃœ: bayraÄŸa gÃ¶re eylem',
        circuit: 'Pin 2/3 Ã¼zerine buton (debounce dikkat)',
        objectives: ['attachInterrupt parametreleri', 'ISR kÄ±sÄ±tlarÄ±'],
        tasks: ['Butonla sayaÃ§ artÄ±r', 'RISING/FALLING modlarÄ±nÄ± dene'],
        pitfalls: ['ISR iÃ§inde delay', 'DeÄŸiÅŸkenleri volatile yapmama']
      },
      { 
        id: 'step-11',
        title: 'I2C OLED (SSD1306) ile GÃ¶rselleÅŸtirme',
        description: 'Verileri kÃ¼Ã§Ã¼k ekranda gÃ¶rselleÅŸtir.',
        docKey: 'basics',
        videoId: 'lcd-i2c',
        algorithm: 'BAÅLA -> Wire baÅŸlat -> OLED init -> DÃ–NGÃœ: metin/grafik Ã§iz',
        circuit: 'VCC/GND, SCL(A5), SDA(A4) baÄŸlantÄ±larÄ±',
        objectives: ['I2C adres ve init', 'Metin yerleÅŸtirme'],
        tasks: ['Pot deÄŸerini ekranda bar ile gÃ¶ster', 'Mesafe sensÃ¶rÃ¼ grafiÄŸi'],
        pitfalls: ['YanlÄ±ÅŸ adres', 'GÃ¶rÃ¼ntÃ¼ gÃ¼ncellemeyi bloklamak']
      },
      { 
        id: 'step-12',
        title: 'SÄ±caklÄ±k SensÃ¶rÃ¼ (LM35)',
        description: 'Analog okumayÄ± sÄ±caklÄ±ÄŸa Ã§evir.',
        docKey: 'analog',
        videoId: 'analog',
        algorithm: 'BAÅLA -> A0 oku -> mVâ€™ye Ã§evir -> Â°C hesapla -> yazdÄ±r',
        circuit: 'LM35: Vout -> A0, Vcc -> 5V, GND -> GND',
        objectives: ['Ã–lÃ§eklendirme', 'Ortalama alma'],
        tasks: ['Son 10 Ã¶lÃ§Ã¼m ortalamasÄ±', 'SÄ±caklÄ±ÄŸa gÃ¶re fan PWM'],
        pitfalls: ['YanlÄ±ÅŸ katsayÄ±', 'GÃ¼rÃ¼ltÃ¼yÃ¼ filtrelememe']
      },
      { 
        id: 'step-13',
        title: 'Fonksiyonlar ve ModÃ¼ler TasarÄ±m',
        description: 'Kodunu parÃ§alara ayÄ±r ve yeniden kullanÄ±labilir yap.',
        docKey: 'temel-yazilim',
        videoId: 'getting-started',
        algorithm: 'BAÅLA -> SensÃ¶r okuma fonksiyonu -> Ä°ÅŸleme fonksiyonu -> GÃ¶sterim fonksiyonu',
        circuit: 'Mevcut devreler',
        objectives: ['Fonksiyon parametre/dÃ¶nÃ¼ÅŸ', 'Dosya dÃ¼zeni'],
        tasks: ['Blinkâ€™i fonksiyonlaÅŸtÄ±r', 'SensÃ¶r okuma modÃ¼lÃ¼'],
        pitfalls: ['Global baÄŸÄ±mlÄ±lÄ±k', 'Tekrarlanan kod']
      },
      { 
        id: 'step-14',
        title: 'Mini Proje: AkÄ±llÄ± IÅŸÄ±k',
        description: 'SensÃ¶re dayalÄ± aydÄ±nlatma sistemi: yakÄ±nlÄ±k ve ortam Ä±ÅŸÄ±ÄŸÄ±na gÃ¶re parlaklÄ±k.',
        docKey: 'basics',
        videoId: 'getting-started',
        algorithm: 'BAÅLA -> Mesafe/Ä±ÅŸÄ±k oku -> Karar ver -> PWM ile sÃ¼r',
        circuit: 'HC-SR04 + LDR + LED (PWM pin)',
        objectives: ['SensÃ¶r fÃ¼zyonu', 'Zamanlama ve durum makinesi'],
        tasks: ['Gece modu', 'Enerji tasarruf davranÄ±ÅŸÄ±'],
        pitfalls: ['Ã‡akÄ±ÅŸan koÅŸullar', 'YanlÄ±ÅŸ kalibrasyon']
      }
    ];

    const codeExamples = {
      blink: {
        name: "YanÄ±p SÃ¶nen LED",
        code: `void setup() {\n  pinMode(13, OUTPUT);\n}\n\nvoid loop() {\n  digitalWrite(13, HIGH);\n  delay(1000);\n  digitalWrite(13, LOW);\n  delay(1000);\n}`
      },
      button: {
        name: "Buton KontrolÃ¼",
        code: `void setup() {\n  pinMode(13, OUTPUT);\n  pinMode(2, INPUT);\n}\n\nvoid loop() {\n  int buttonState = digitalRead(2);\n  if (buttonState == HIGH) {\n    digitalWrite(13, HIGH);\n  } else {\n    digitalWrite(13, LOW);\n  }\n}`
      },
      motor: {
        name: "Motor KontrolÃ¼",
        code: `void setup() {\n  pinMode(9, OUTPUT);\n  pinMode(8, OUTPUT);\n  pinMode(7, OUTPUT);\n}\n\nvoid loop() {\n  digitalWrite(8, HIGH);\n  digitalWrite(7, LOW);\n  analogWrite(9, 191);\n  delay(2000);\n  analogWrite(9, 0);\n  delay(1000);\n}`
      },
      servo: {
        name: "Servo Motor",
        code: `#include <Servo.h>\nServo servo;\n\nvoid setup() {\n  servo.attach(9);\n}\n\nvoid loop() {\n  servo.write(0);\n  delay(1000);\n  servo.write(90);\n  delay(1000);\n  servo.write(180);\n  delay(1000);\n}`
      },
      potentiometer: {
        name: "Potansiyometre ve LED",
        code: `void setup() {\n  pinMode(9, OUTPUT);\n  Serial.begin(9600);\n}\n\nvoid loop() {\n  int deger = analogRead(A0);\n  int parlaklik = map(deger, 0, 1023, 0, 255);\n  analogWrite(9, parlaklik);\n  Serial.print("Pot: ");\n  Serial.print(deger);\n  Serial.print(" -> Parlaklik: ");\n  Serial.println(parlaklik);\n  delay(50);\n}`
      },
      ultrasonic: {
        name: "HC-SR04 Mesafe SensÃ¶rÃ¼",
        code: `void setup() {\n  pinMode(12, OUTPUT); // Trig\n  pinMode(11, INPUT);  // Echo\n  Serial.begin(9600);\n}\n\nvoid loop() {\n  digitalWrite(12, LOW);\n  delayMicroseconds(2);\n  digitalWrite(12, HIGH);\n  delayMicroseconds(10);\n  digitalWrite(12, LOW);\n\n  long sure = pulseIn(11, HIGH);\n  int mesafe = (sure * 0.034) / 2;\n\n  Serial.print("Mesafe: ");\n  Serial.print(mesafe);\n  Serial.println(" cm");\n  \n  if (mesafe < 20) {\n    digitalWrite(13, HIGH);\n  } else {\n    digitalWrite(13, LOW);\n  }\n  delay(200);\n}`
      },
      switch_modes: {
        name: "Switch-Case ile Modlar",
        code: `void setup() {\n  pinMode(13, OUTPUT);\n}\n\nint mod = 0;\n\nvoid loop() {\n  switch (mod) {\n    case 0:\n      digitalWrite(13, LOW);\n      break;\n    case 1:\n      digitalWrite(13, HIGH);\n      delay(500);\n      digitalWrite(13, LOW);\n      delay(500);\n      break;\n    case 2:\n      digitalWrite(13, HIGH);\n      delay(200);\n      digitalWrite(13, LOW);\n      delay(200);\n      break;\n    default:\n      digitalWrite(13, LOW);\n      break;\n  }\n  mod = (mod + 1) % 3;\n  delay(1000);\n}`
      }
    };

    const quizzes = [
      {
        id: 'algoritma-temelleri',
        title: 'Algoritma Temelleri',
        description: 'Problem Ã§Ã¶zme, akÄ±ÅŸ diyagramlarÄ± ve mantÄ±ksal dÃ¼ÅŸÃ¼nme',
        difficulty: 'Kolay',
        icon: 'ğŸ§ ',
        color: 'from-orange-400 to-red-500',
        xpReward: 50,
        questions: [
          {
            id: 1,
            question: 'Algoritma nedir?',
            options: [
              'Bir problemin Ã§Ã¶zÃ¼mÃ¼ iÃ§in izlenen adÄ±mlar',
              'Bir bilgisayar markasÄ±',
              'Sadece matematik problemleridir',
              'Bir programlama dilidir'
            ],
            correct: 0,
            concept: 'algoritma',
            explanation: 'Algoritma, belirli bir iÅŸi yapmak veya bir problemi Ã§Ã¶zmek iÃ§in tasarlanan mantÄ±ksal adÄ±mlar bÃ¼tÃ¼nÃ¼dÃ¼r.'
          },
          {
            id: 2,
            question: 'AkÄ±ÅŸ diyagramÄ±nda "EÅŸkenar DÃ¶rtgen" neyi ifade eder?',
            options: ['BaÅŸlangÄ±Ã§', 'Ä°ÅŸlem', 'Karar/KoÅŸul', 'BitiÅŸ'],
            correct: 2,
            concept: 'algoritma',
            explanation: 'AkÄ±ÅŸ diyagramlarÄ±nda eÅŸkenar dÃ¶rtgen (baklava dilimi), bir koÅŸulun kontrol edildiÄŸi karar mekanizmalarÄ±nÄ± temsil eder.'
          },
          {
            id: 3,
            question: 'SÃ¶zde kod (Pseudo-code) yazmanÄ±n temel amacÄ± nedir?',
            options: [
              'Bilgisayarda Ã§alÄ±ÅŸtÄ±rmak',
              'AlgoritmayÄ± daha iyi anlamak ve planlamak',
              'Kodun hÄ±zÄ±nÄ± artÄ±rmak',
              'Bellek tasarrufu saÄŸlamak'
            ],
            correct: 1,
            concept: 'algoritma',
            explanation: 'SÃ¶zde kod, programlama diline geÃ§meden Ã¶nce algoritmanÄ±n mantÄ±ÄŸÄ±nÄ± netleÅŸtirmek iÃ§in kullanÄ±lan bir ara adÄ±mdÄ±r.'
          }
        ]
      },
      {
        id: 'temel-yazilim',
        title: 'Temel YazÄ±lÄ±m Bilgileri',
        description: 'DeÄŸiÅŸkenler, koÅŸullar, dÃ¶ngÃ¼ler ve fonksiyonlar',
        difficulty: 'Kolay',
        icon: '',
        color: 'from-purple-500 to-pink-600',
        xpReward: 50,
        questions: [
          {
            id: 1,
            question: 'Bir tam sayÄ±yÄ± saklamak iÃ§in hangi veri tipi kullanÄ±lÄ±r?',
            options: ['float', 'int', 'bool', 'char'],
            correct: 1,
            concept: 'degiskenler',
            explanation: 'int (integer - tam sayÄ±) veri tipi -32,768 ile 32,767 arasÄ±nda tam sayÄ±lar saklamak iÃ§in kullanÄ±lÄ±r.'
          },
          {
            id: 2,
            question: 'if-else yapÄ±sÄ± ne iÃ§in kullanÄ±lÄ±r?',
            options: ['Tekrar eden iÅŸlemler', 'Karar verme', 'Veriler saklama', 'Fonksiyon tanÄ±mlama'],
            correct: 1,
            concept: 'kosullar',
            explanation: 'if-else yapÄ±larÄ±, programÄ±n farklÄ± koÅŸullara gÃ¶re farklÄ± davranmasÄ±nÄ± saÄŸlar.'
          },
          {
            id: 3,
            question: 'Belirli sayÄ±da tekrar yapmak iÃ§in en uygun dÃ¶ngÃ¼ tipi hangisidir?',
            options: ['while', 'do-while', 'for', 'loop'],
            correct: 2,
            concept: 'donguler',
            explanation: 'for dÃ¶ngÃ¼sÃ¼, baÅŸlangÄ±Ã§, bitiÅŸ ve artÄ±ÅŸ deÄŸerleri belirli olduÄŸu durumlarda en uygun olanÄ±dÄ±r.'
          },
          {
            id: 4,
            question: 'Fonksiyonlar neden kullanÄ±lÄ±r?',
            options: ['Kodun tekrar kullanÄ±labilirliÄŸini artÄ±rÄ±r', 'Sadece karmaÅŸÄ±k iÅŸlemler iÃ§in', 'Bellek kullanÄ±mÄ±nÄ± artÄ±rÄ±r', 'ProgramÄ± yavaÅŸlatÄ±r'],
            correct: 0,
            concept: 'fonksiyonlar',
            explanation: 'Fonksiyonlar, aynÄ± kod bloÄŸunu birden fazla kez kullanmamÄ±zÄ± saÄŸlar ve kodu daha organize hale getirir.'
          },
          {
            id: 5,
            question: '&& operatÃ¶rÃ¼ ne anlama gelir?',
            options: ['OR (veya)', 'AND (ve)', 'NOT (deÄŸil)', 'BÃ¶lme'],
            correct: 1,
            concept: 'kosullar',
            explanation: '&& (AND) operatÃ¶rÃ¼, iki koÅŸul da doÄŸru olduÄŸu durumda sonucu true yapar.'
          }
        ]
      },
      {
        id: 'basics',
        title: 'Arduino Temelleri',
        description: 'setup(), loop() ve temel kavramlar',
        difficulty: 'Kolay',
        icon: '',
        color: 'from-blue-500 to-blue-700',
        xpReward: 50,
        questions: [
          {
            id: 1,
            question: 'Arduino programÄ±nda setup() fonksiyonu kaÃ§ kez Ã§alÄ±ÅŸÄ±r?',
            options: ['Her loop dÃ¶ngÃ¼sÃ¼nde', 'Sadece bir kez', 'Ä°ki kez', 'HiÃ§ Ã§alÄ±ÅŸmaz'],
            correct: 1,
            concept: 'temel_arduino',
            explanation: 'setup() fonksiyonu program baÅŸladÄ±ÄŸÄ±nda sadece bir kez Ã§alÄ±ÅŸÄ±r ve baÅŸlangÄ±Ã§ ayarlarÄ±nÄ± yapar.'
          },
          {
            id: 2,
            question: 'loop() fonksiyonu ne zaman Ã§alÄ±ÅŸÄ±r?',
            options: ['Sadece baÅŸlangÄ±Ã§ta', 'Setup\'tan sonra sÃ¼rekli tekrar eder', 'Manuel olarak Ã§aÄŸÄ±rÄ±lÄ±nca', 'HiÃ§ Ã§alÄ±ÅŸmaz'],
            correct: 1,
            concept: 'temel_arduino',
            explanation: 'loop() fonksiyonu setup() bittikten sonra sÃ¼rekli olarak tekrar eder. Bu Arduino\'nun ana Ã§alÄ±ÅŸma prensibidir.'
          },
          {
            id: 3,
            question: 'pinMode(13, OUTPUT) komutu ne iÅŸe yarar?',
            options: ['13 numaralÄ± pini okur', '13 numaralÄ± pini Ã§Ä±kÄ±ÅŸ olarak ayarlar', '13 numaralÄ± pini siler', 'LED yakar'],
            correct: 1,
            concept: 'dijital_pinler',
            explanation: 'pinMode() fonksiyonu bir pini INPUT (giriÅŸ) veya OUTPUT (Ã§Ä±kÄ±ÅŸ) olarak yapÄ±landÄ±rÄ±r.'
          }
        ]
      },
      {
        id: 'digital',
        title: 'Dijital Pin KontrolÃ¼',
        description: 'digitalWrite, digitalRead kullanÄ±mÄ±',
        difficulty: 'Kolay',
        icon: '',
        color: 'from-yellow-500 to-orange-600',
        xpReward: 75,
        questions: [
          {
            id: 1,
            question: 'digitalWrite(13, HIGH) komutu ne yapar?',
            options: ['13 numaralÄ± pini kapatÄ±r', '13 numaralÄ± pini aÃ§ar (5V)', 'Pin 13\'Ã¼ okur', 'HiÃ§bir ÅŸey yapmaz'],
            correct: 1,
            concept: 'dijital_pinler',
            explanation: 'digitalWrite(pin, HIGH) komutu belirtilen pine 5V voltaj uygular, LED gibi cihazlarÄ± aÃ§mak iÃ§in kullanÄ±lÄ±r.'
          },
          {
            id: 2,
            question: 'LED yakmak iÃ§in hangi komut kullanÄ±lÄ±r?',
            options: ['analogWrite()', 'digitalRead()', 'digitalWrite()', 'pinMode()'],
            correct: 2,
            concept: 'dijital_pinler',
            explanation: 'digitalWrite() komutu dijital pinleri HIGH veya LOW yapmak iÃ§in kullanÄ±lÄ±r. LED yakmak iÃ§in HIGH deÄŸeri kullanÄ±lÄ±r.'
          },
          {
            id: 3,
            question: 'delay(1000) komutu ne iÅŸe yarar?',
            options: ['1 saniye bekler', '1 milisaniye bekler', '1000 saniye bekler', 'ProgramÄ± durdurur'],
            correct: 0,
            concept: 'temel_arduino',
            explanation: 'delay() fonksiyonu milisaniye cinsinden bekleme yapar. delay(1000) = 1 saniye bekler.'
          },
          {
            id: 4,
            question: 'Buton durumunu okumak iÃ§in hangi komut kullanÄ±lÄ±r?',
            options: ['digitalWrite()', 'pinMode()', 'digitalRead()', 'analogRead()'],
            correct: 2,
            concept: 'dijital_pinler',
            explanation: 'digitalRead() fonksiyonu dijital pinlerin durumunu (HIGH veya LOW) okumak iÃ§in kullanÄ±lÄ±r.'
          }
        ]
      },
      {
        id: 'analog',
        title: 'Analog DÃ¼nyasÄ±',
        description: 'analogRead, analogWrite ve SensÃ¶rler',
        difficulty: 'Orta',
        icon: '',
        color: 'from-green-500 to-emerald-600',
        xpReward: 100,
        questions: [
          {
            id: 1,
            question: 'analogRead() fonksiyonu hangi deÄŸer aralÄ±ÄŸÄ±nda sonuÃ§ dÃ¶ndÃ¼rÃ¼r?',
            options: ['0 - 1', '0 - 255', '0 - 1023', '0 - 5000'],
            correct: 2,
            concept: 'analog_pinler',
            explanation: 'Arduino\'nun 10-bit ADC\'si sayesinde analogRead() 0 ile 1023 arasÄ±nda bir deÄŸer dÃ¶ndÃ¼rÃ¼r.'
          },
          {
            id: 2,
            question: 'PWM sinyali oluÅŸturmak iÃ§in hangi fonksiyon kullanÄ±lÄ±r?',
            options: ['analogRead()', 'digitalWrite()', 'analogWrite()', 'pwmWrite()'],
            correct: 2,
            concept: 'analog_pinler',
            explanation: 'analogWrite() fonksiyonu PWM destekleyen pinlerde analog benzeri bir Ã§Ä±kÄ±ÅŸ (0-255) oluÅŸturmak iÃ§in kullanÄ±lÄ±r.'
          },
          {
            id: 3,
            question: 'Potansiyometre Arduino\'nun hangi pinlerine baÄŸlanmalÄ±dÄ±r?',
            options: ['Dijital Pinler', 'Analog Pinler (A0-A5)', 'Sadece GND ve 5V', 'Seri Port Pinleri'],
            correct: 1,
            concept: 'analog_pinler',
            explanation: 'Potansiyometre gibi deÄŸiÅŸken voltaj Ã¼reten elemanlar analog giriÅŸ (A0-A5) pinlerine baÄŸlanÄ±r.'
          }
        ]
      },
      {
        id: 'servo',
        title: 'Hareket ve Servolar',
        description: 'Servo kÃ¼tÃ¼phanesi ve aÃ§Ä± kontrolÃ¼',
        difficulty: 'Orta',
        icon: '',
        color: 'from-purple-500 to-indigo-600',
        xpReward: 120,
        questions: [
          {
            id: 1,
            question: 'Servo motoru kontrol etmek iÃ§in hangi kÃ¼tÃ¼phane eklenmelidir?',
            options: ['#include <Motor.h>', '#include <Servo.h>', '#include <Wire.h>', '#include <SPI.h>'],
            correct: 1,
            explanation: 'Arduino\'da standart servo motorlarÄ± kontrol etmek iÃ§in Servo.h kÃ¼tÃ¼phanesi kullanÄ±lÄ±r.'
          },
          {
            id: 2,
            question: 'servo.write(90) komutu ne yapar?',
            options: ['Motoru 90 hÄ±zÄ±nda dÃ¶ndÃ¼rÃ¼r', 'Motoru 90 derece aÃ§Ä±sÄ±na getirir', 'Motoru 90 saniye Ã§alÄ±ÅŸtÄ±rÄ±r', '90 numaralÄ± pini aÃ§ar'],
            correct: 1,
            explanation: 'write() fonksiyonu servo motoru belirtilen dereceye (0-180 arasÄ±) konumlandÄ±rÄ±r.'
          },
          {
            id: 3,
            question: 'Servo motorun turuncu kablosu genellikle nereye baÄŸlanÄ±r?',
            options: ['GND', '5V', 'Sinyal (PWM) Pini', 'Vin'],
            correct: 2,
            explanation: 'Servolarda genellikle Kahverengi/Siyah: GND, KÄ±rmÄ±zÄ±: 5V, Turuncu/SarÄ±: Sinyal pinidir.'
          }
        ]
      },
      {
        id: 'serial',
        title: 'Seri HaberleÅŸme',
        description: 'Bilgisayar ile veri alÄ±ÅŸveriÅŸi',
        difficulty: 'Kolay',
        icon: '',
        color: 'from-orange-500 to-red-600',
        xpReward: 80,
        questions: [
          {
            id: 1,
            question: 'Seri haberleÅŸmeyi baÅŸlatmak iÃ§in setup() iÃ§inde hangi komut kullanÄ±lÄ±r?',
            options: ['Serial.begin(9600)', 'Serial.start()', 'Serial.open()', 'Serial.init()'],
            correct: 0,
            explanation: 'Serial.begin(baudrate) komutu seri haberleÅŸmeyi belirtilen hÄ±zda baÅŸlatÄ±r.'
          },
          {
            id: 2,
            question: 'Ekrana bir satÄ±r yazÄ± yazÄ±p alt satÄ±ra geÃ§mek iÃ§in hangi komut kullanÄ±lÄ±r?',
            options: ['Serial.print()', 'Serial.write()', 'Serial.println()', 'Serial.send()'],
            correct: 2,
            explanation: 'println() komutu veriyi yazar ve ardÄ±ndan yeni bir satÄ±ra geÃ§er.'
          }
        ]
      },
      {
        id: 'sensors',
        title: 'SensÃ¶r Teknolojileri',
        description: 'Mesafe, sÄ±caklÄ±k ve Ä±ÅŸÄ±k sensÃ¶rleri',
        difficulty: 'Zor',
        icon: '',
        color: 'from-pink-500 to-rose-600',
        xpReward: 150,
        questions: [
          {
            id: 1,
            question: 'HC-SR04 mesafe sensÃ¶rÃ¼ hangi prensiple Ã§alÄ±ÅŸÄ±r?',
            options: ['Lazer', 'KÄ±zÄ±lÃ¶tesi', 'Ultrasonik (Ses)', 'Radyo DalgalarÄ±'],
            correct: 2,
            explanation: 'HC-SR04 ses dalgalarÄ± gÃ¶nderip yankÄ±sÄ±nÄ± alarak mesafe Ã¶lÃ§er (Ultrasonik).'
          },
          {
            id: 2,
            question: 'LDR (IÅŸÄ±ÄŸa BaÄŸÄ±mlÄ± DirenÃ§) karanlÄ±kta nasÄ±l bir direnÃ§ gÃ¶sterir?',
            options: ['DÃ¼ÅŸÃ¼k DirenÃ§', 'YÃ¼ksek DirenÃ§', 'DirenÃ§ GÃ¶stermez', 'Sabit DirenÃ§'],
            correct: 1,
            explanation: 'LDR\'nin direnci Ã¼zerindeki Ä±ÅŸÄ±k miktarÄ± azaldÄ±kÃ§a (karanlÄ±kta) artar.'
          }
        ]
      }
    ];

    // ==================== HELPER FUNCTIONS ====================
    function showToast(message, type = 'info') {
      const toast = document.createElement('div');
      const colors = {
        success: '#10B981',
        error: '#EF4444',
        info: '#3B82F6'
      };
      
      toast.innerHTML = message;
      toast.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: ${colors[type]};
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        z-index: 10000;
        font-weight: 500;
        animation: slideIn 0.3s ease-out;
      `;
      
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.style.animation = 'slideOut 0.3s ease-out';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    function handleStart() {
      if (appState.currentUser) {
        navigateTo('dashboard');
      } else {
        appState.showAuthModal = true;
        appState.authMode = 'register';
        renderApp();
      }
    }

    function handleModuleClick(moduleId, isCompleted) {
      if (!isCompleted) {
        appState.currentModuleView = moduleId;
        renderApp();
      }
    }

    function handleAuthSubmit(event, form) {
      event.preventDefault();
      if (appState.authMode === 'login') {
        handleLogin(form.email.value, form.password.value);
      } else {
        handleRegister(
          form.name.value, 
          form.email.value, 
          form.password.value, 
          form.level.value, 
          form.goal.value
        );
      }
    }

    function handleQuizStart(quizId) {
      if (appState.currentUser) {
        startQuiz(quizId);
      } else {
        appState.showAuthModal = true;
        appState.authMode = 'register';
        renderApp();
      }
    }

    function handleAboutCTA() {
      navigateTo(appState.currentUser ? 'dashboard' : 'home');
    }

    function navigateTo(page) {
      const change = () => {
        appState.currentPage = page;
        if (page !== 'editor' && appState.simulationRunning) {
          stopSimulation();
        }
        renderApp();
      };
      if (document.startViewTransition) {
        document.startViewTransition(change);
      } else {
        change();
      }
    }

    const badgeDefinitions = {
      'welcome': { title: 'HoÅŸ Geldin', icon: 'ğŸ‘‹', description: 'ArduMind ailesine katÄ±ldÄ±n!', color: 'from-blue-400 to-blue-600' },
      'first-quiz': { title: 'Ä°lk AdÄ±m', icon: 'ğŸ¯', description: 'Ä°lk testini baÅŸarÄ±yla tamamladÄ±n!', color: 'from-green-400 to-emerald-600' },
      'xp-hunter': { title: 'XP AvcÄ±sÄ±', icon: 'ğŸ’', description: '100 XP sÄ±nÄ±rÄ±nÄ± aÅŸtÄ±n!', color: 'from-yellow-400 to-orange-500' },
      'module-master': { title: 'ModÃ¼l UstasÄ±', icon: 'ğŸ†', description: 'Bir eÄŸitim modÃ¼lÃ¼nÃ¼ tamamen bitirdin!', color: 'from-purple-500 to-pink-600' },
      'perfect-score': { title: 'Kusursuz', icon: 'ğŸŒŸ', description: 'Bir testten 100 tam puan aldÄ±n!', color: 'from-cyan-400 to-blue-500' }
    };

    function checkBadges() {
      if (!appState.currentUser) return;
      
      const badges = appState.currentUser.badges || [];
      const newBadges = [];

      // HoÅŸ Geldin Rozeti
      if (!badges.includes('welcome')) {
        newBadges.push('welcome');
      }

      // Ä°lk AdÄ±m Rozeti
      if (!badges.includes('first-quiz') && appState.currentUser.activities.some(a => a.text.includes('testini tamamladÄ±n'))) {
        newBadges.push('first-quiz');
      }

      // XP AvcÄ±sÄ± Rozeti
      if (!badges.includes('xp-hunter') && appState.currentUser.xp >= 100) {
        newBadges.push('xp-hunter');
      }

      // ModÃ¼l UstasÄ± Rozeti
      if (!badges.includes('module-master') && appState.currentUser.completedModules.length >= 1) {
        newBadges.push('module-master');
      }

      if (newBadges.length > 0) {
        appState.currentUser.badges = [...badges, ...newBadges];
        newBadges.forEach(badgeId => {
          const badge = badgeDefinitions[badgeId];
          showToast(`Yeni Rozet KazanÄ±ldÄ±: ${badge.title}`, 'success');
          addActivity(`"${badge.title}" rozetini kazandÄ±n! ${badge.description}`, badge.icon, 'purple');
        });
        saveAppState();
      }
    }

    function addActivity(text, icon, color) {
      if (!appState.currentUser) return;
      
      appState.currentUser.activities.unshift({
        text,
        icon,
        color,
        timestamp: new Date().toISOString()
      });
      
      if (appState.currentUser.activities.length > 20) {
        appState.currentUser.activities = appState.currentUser.activities.slice(0, 20);
      }
      saveAppState();
    }

    function addXP(amount, reason) {
      if (!appState.currentUser) return;
      
      appState.currentUser.xp += amount;
      
      const today = new Date().toISOString().split('T')[0];
      if (!appState.currentUser.dailyXP) appState.currentUser.dailyXP = {};
      appState.currentUser.dailyXP[today] = (appState.currentUser.dailyXP[today] || 0) + amount;
      
      addActivity(`${amount} XP kazandÄ±n! ${reason}`, '', 'blue');
      showToast(`+${amount} XP kazandÄ±n!`, 'success');
      checkBadges();
      saveAppState();
    }

    function getWeeklyProgress() {
      if (!appState.currentUser || !appState.currentUser.dailyXP) return [0, 0, 0, 0, 0, 0, 0];
      
      const today = new Date();
      const progress = [];
      
      for (let i = 6; i >= 0; i--) {
        const date = new Date(today);
        date.setDate(date.getDate() - i);
        const dateStr = date.toISOString().split('T')[0];
        const xp = appState.currentUser.dailyXP[dateStr] || 0;
        progress.push(xp);
      }
      
      return progress;
    }

    function getModuleProgress(moduleId) {
      if (!appState.currentUser) return 0;
      const completed = appState.currentUser.completedModules.find(m => m.moduleId === moduleId);
      return completed ? 100 : 0;
    }

    // ==================== AUTH FUNCTIONS ====================
    function handleLogin(email, password) {
      const user = appState.users.find(u => u.email === email && u.password === password);
      
      if (user) {
        appState.currentUser = user;
        appState.showAuthModal = false;
        appState.currentPage = 'dashboard';
        saveAppState();
        renderApp();
        showToast('BaÅŸarÄ±yla giriÅŸ yaptÄ±nÄ±z!', 'success');
      } else {
        showToast('E-posta veya ÅŸifre hatalÄ±!', 'error');
      }
    }

    function handleRegister(name, email, password, level, goal) {
      if (appState.users.find(u => u.email === email)) {
        showToast('Bu e-posta adresi zaten kayÄ±tlÄ±!', 'error');
        return;
      }

      const newUser = {
        id: Date.now().toString(),
        name,
        email,
        password,
        level,
        goal,
        xp: 0,
        completedModules: [],
        activities: [],
        badges: [],
        dailyXP: {},
        createdAt: new Date().toISOString()
      };

      appState.users.push(newUser);
      appState.currentUser = newUser;
      appState.showAuthModal = false;
      appState.currentPage = 'dashboard';
      checkBadges();
      saveAppState();
      renderApp();
      showToast('HoÅŸ geldin! Arduino serÃ¼venine baÅŸlayalÄ±m', 'success');
    }

    function logout() {
      appState.currentUser = null;
      appState.currentPage = 'home';
      saveAppState();
      renderApp();
    }

    // ==================== CLAUDE AI INTEGRATION (via Serverless Function) ====================
    const CLAUDE_PROXY_URL = '/api/claude'; // Claude sunucusuz fonksiyonunun adresi

    let isAILoading = false;
    async function callClaudeAI(prompt, systemInstruction = "Sen deneyimli bir Arduino eÄŸitmenisin. Ã–ÄŸrencilere nazik, yol gÃ¶sterici ve teknik aÃ§Ä±dan doÄŸru geri bildirimler verirsin. YanÄ±tlarÄ±nÄ± kÄ±sa ve Ã¶z tut.") {
      if (isAILoading) {
        showToast('AI ÅŸu an meÅŸgul, lÃ¼tfen bekleyin...', 'info');
        return "LÃ¼tfen bekleyin, Ã¶nceki istek tamamlanÄ±yor.";
      }
      
      isAILoading = true;
      try {
        const response = await fetch(CLAUDE_PROXY_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            system: systemInstruction,
            prompt: prompt 
          })
        });

        const data = await response.json();

        if (!response.ok) {
          throw new Error(data.error || 'AI API hatasÄ±: ' + response.statusText);
        }

        // Claude'un yanÄ±t yapÄ±sÄ±ndan metni al
        if (data.content && data.content.length > 0 && data.content[0].text) {
          return data.content[0].text;
        }

        return "AI'dan geÃ§erli bir yanÄ±t alÄ±namadÄ±.";
      } catch (error) {
        console.error('Claude AI Error:', error);
        return `ÃœzgÃ¼nÃ¼m, ÅŸu an AI yanÄ±tÄ± oluÅŸturulamadÄ±. Hata: ${error.message}`;
      } finally {
        isAILoading = false;
      }
    }

    function submitChallenge(stepId, answer) {
      const step = learningPath.find(s => s.id === stepId);
      if (!step || !step.challenge) return;
      
      const challengeKey = `challenge-${stepId}`;
      if (appState.miniQuizAnswers[challengeKey] !== undefined) return;
      
      let isCorrect = false;
      if (step.challenge.type === 'code-completion') {
        isCorrect = answer.trim().toLowerCase() === step.challenge.answer.toLowerCase();
      } else {
        isCorrect = parseInt(answer) === step.challenge.correct;
      }
      
      appState.miniQuizAnswers[challengeKey] = isCorrect ? 'correct' : 'wrong';
      
      if (appState.learningMetrics) {
        const concept = step.challenge.concept;
        if (concept && appState.learningMetrics.concepts[concept]) {
          const current = appState.learningMetrics.concepts[concept];
          current.attempts += 1;
          if (isCorrect) {
            current.score = Math.min(100, Math.round((current.score * (current.attempts - 1) + 100) / current.attempts));
            addXP(20, `MÃ¼cadele tamamlandÄ±: ${step.title}`);
            showToast('Tebrikler! MÃ¼cadeleyi tamamladÄ±n.', 'success');
          } else {
            current.score = Math.max(0, Math.round((current.score * (current.attempts - 1) + 0) / current.attempts));
            appState.learningMetrics.totalErrors += 1;
            showToast('Maalesef yanlÄ±ÅŸ. Tekrar dene!', 'error');
          }
        }
      }
      
      saveAppState();
      renderApp();
    }

    // ==================== QUIZ FUNCTIONS ====================
    function startQuiz(quizId) {
      appState.currentQuiz = quizId;
      appState.quizAnswers = {};
      appState.quizCompleted = false;
      appState.quizScore = 0;
      renderApp();
    }

    function selectAnswer(questionId, answerIndex) {
      appState.quizAnswers[questionId] = answerIndex;
      renderApp();
    }

    function submitQuiz() {
      const quiz = quizzes.find(q => q.id === appState.currentQuiz);
      if (!quiz) return;
      
      let correctCount = 0;
      quiz.questions.forEach(question => {
        if (appState.quizAnswers[question.id] === question.correct) {
          correctCount++;
        }
      });
      
      appState.quizScore = correctCount;
      appState.quizCompleted = true;
      
      // Ã–ÄŸrenme metriklerini gÃ¼ncelle
      if (appState.learningMetrics) {
        quiz.questions.forEach(question => {
          const concept = question.concept;
          const isCorrect = appState.quizAnswers[question.id] === question.correct;
          
          if (concept && appState.learningMetrics.concepts[concept]) {
            const current = appState.learningMetrics.concepts[concept];
            current.attempts += 1;
            
            // Hareketli ortalama veya basit baÅŸarÄ± oranÄ±
            if (isCorrect) {
              current.score = Math.min(100, Math.round((current.score * (current.attempts - 1) + 100) / current.attempts));
            } else {
              current.score = Math.max(0, Math.round((current.score * (current.attempts - 1) + 0) / current.attempts));
              appState.learningMetrics.totalErrors += 1;
            }
          }
        });
        appState.learningMetrics.lastActive = Date.now();
      }

      if (appState.currentUser) {
        const percentage = (correctCount / quiz.questions.length) * 100;
        if (percentage >= 70) {
          const xpEarned = Math.floor(quiz.xpReward * (percentage / 100));
          addXP(xpEarned, `"${quiz.title}" testi tamamlandÄ±`);
          addActivity(`"${quiz.title}" testini tamamladÄ±n! %${percentage.toFixed(0)} baÅŸarÄ±`, '', 'green');
          
          if (percentage === 100) {
            const badges = appState.currentUser.badges || [];
            if (!badges.includes('perfect-score')) {
              appState.currentUser.badges = [...badges, 'perfect-score'];
              const badge = badgeDefinitions['perfect-score'];
              showToast(`Yeni Rozet KazanÄ±ldÄ±: ${badge.title}`, 'success');
              addActivity(`"${badge.title}" rozetini kazandÄ±n! ${badge.description}`, badge.icon, 'purple');
            }
          }
          checkBadges();
        }
      }
      
      renderApp();
    }

    async function getAIQuizExplanation(questionId, userAnswerIndex) {
      const quiz = quizzes.find(q => q.id === appState.currentQuiz);
      if (!quiz) return;
      const question = quiz.questions.find(q => q.id === questionId);
      if (!question) return;

      const prompt = `Arduino quiz sorusuna yanlÄ±ÅŸ cevap verdim.\n\nSoru: ${question.question}\nBenim cevabÄ±m: ${question.options[userAnswerIndex]}\nDoÄŸru cevap: ${question.options[question.correct]}\n\nLÃ¼tfen neden yanlÄ±ÅŸ yaptÄ±ÄŸÄ±mÄ± ve doÄŸru cevabÄ±n mantÄ±ÄŸÄ±nÄ± daha detaylÄ± bir ÅŸekilde aÃ§Ä±klar mÄ±sÄ±n?`;
      
      const elementId = `ai-explanation-${questionId}`;
      const el = document.getElementById(elementId);
      if (el) el.innerHTML = '<div class="animate-pulse text-blue-400">ğŸ¤– AI DÃ¼ÅŸÃ¼nÃ¼yor...</div>';
      
      const aiResponse = await callClaudeAI(prompt, "Sen bir Arduino eÄŸitmenisin. Ã–ÄŸrencilerin yanlÄ±ÅŸ cevaplarÄ±nÄ± analiz eder ve onlara konuyu daha iyi kavramalarÄ± iÃ§in derinlemesine ama anlaÅŸÄ±lÄ±r aÃ§Ä±klamalar yaparsÄ±n.");
      
      if (el) el.innerHTML = `<div class="mt-2 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg text-blue-200 text-xs"><b>ğŸ¤– AI AÃ§Ä±klamasÄ±:</b><br>${aiResponse.replace(/\n/g, '<br>')}</div>`;
    }

    function resetQuiz() {
      appState.currentQuiz = null;
      appState.quizAnswers = {};
      appState.quizCompleted = false;
      appState.quizScore = 0;
      renderApp();
    }

    function submitMiniQuiz(sectionKey, topicIndex, selectedOption) {
      const section = documentation[sectionKey];
      const topic = section.topics[topicIndex];
      const quizKey = `mini-${sectionKey}-${topicIndex}`;
      
      if (appState.miniQuizAnswers[quizKey] !== undefined) return;
      
      appState.miniQuizAnswers[quizKey] = selectedOption;
      const isCorrect = selectedOption === topic.miniQuiz.correct;
      
      // Ã–ÄŸrenme metriklerini gÃ¼ncelle
      if (appState.learningMetrics) {
        const concept = topic.miniQuiz.concept;
        if (concept && appState.learningMetrics.concepts[concept]) {
          const current = appState.learningMetrics.concepts[concept];
          current.attempts += 1;
          
          if (isCorrect) {
            current.score = Math.min(100, Math.round((current.score * (current.attempts - 1) + 100) / current.attempts));
            addXP(10, `Mini test tamamlandÄ±: ${topic.title}`);
          } else {
            current.score = Math.max(0, Math.round((current.score * (current.attempts - 1) + 0) / current.attempts));
            appState.learningMetrics.totalErrors += 1;
          }
        }
      }
      
      saveAppState();
      renderApp();
    }

    // ==================== MODULE FUNCTIONS ====================
    async function getAILearningSummary() {
      if (!appState.learningMetrics) return;
      
      const metrics = appState.learningMetrics;
      const conceptStats = Object.entries(metrics.concepts)
        .map(([key, data]) => `${key}: %${data.score} baÅŸarÄ± (${data.attempts} deneme)`)
        .join(', ');
      
      const prompt = `Ã–ÄŸrencinin Arduino Ã¶ÄŸrenme verileri ÅŸunlar:\n${conceptStats}\nToplam Ã§alÄ±ÅŸma sÃ¼resi: ${Math.round(metrics.totalStudyTime / 60)} dakika\nToplam hata sayÄ±sÄ±: ${metrics.totalErrors}\n\nLÃ¼tfen Ã¶ÄŸrencinin geliÅŸimini deÄŸerlendir, en gÃ¼Ã§lÃ¼ olduÄŸu ve en Ã§ok zorlandÄ±ÄŸÄ± alanlarÄ± belirt ve bir sonraki adÄ±mÄ± iÃ§in kÄ±sa bir tavsiye ver. YanÄ±tÄ±n profesyonel, teÅŸvik edici ve jÃ¼riye sunulabilir kalitede olsun.`;
      
      const el = document.getElementById('ai-learning-summary-result');
      if (el) {
        el.innerHTML = '<div class="animate-pulse text-blue-400 py-4">ğŸ¤– AI Verileri Analiz Ediyor...</div>';
        el.classList.remove('hidden');
      }
      
      const aiResponse = await callGeminiAI(prompt, "Sen bir eÄŸitim analistisin. Ã–ÄŸrenci verilerini analiz ederek kiÅŸiselleÅŸtirilmiÅŸ Ã¶ÄŸrenme tavsiyeleri ve geliÅŸim Ã¶zetleri sunarsÄ±n.");
      
      if (el) {
        el.innerHTML = `<div class="bg-blue-500/10 border border-blue-500/20 rounded-xl p-4 text-blue-100 text-sm leading-relaxed relative">
          <button onclick="this.parentElement.classList.add('hidden')" class="absolute top-2 right-2 text-slate-500 hover:text-white text-xs">âœ•</button>
          <div class="flex items-center space-x-2 mb-2 text-blue-400 font-bold">
            <span>âœ¨ AI GeliÅŸim Analizi</span>
          </div>
          ${aiResponse.replace(/\n/g, '<br>')}
        </div>`;
      }
    }

    function completeModule(moduleId) {
      if (!appState.currentUser) return;
      
      const module = modules.find(m => m.id === moduleId);
      if (!module) return;
      
      const alreadyCompleted = appState.currentUser.completedModules.some(m => m.moduleId === moduleId);
      if (alreadyCompleted) {
        showToast('Bu modÃ¼lÃ¼ zaten tamamladÄ±n!', 'info');
        return;
      }
      
      appState.currentUser.completedModules.push({
        moduleId,
        completedAt: new Date().toISOString(),
        xpEarned: module.xpReward
      });
      
      addXP(module.xpReward, `"${module.title}" tamamlandÄ±`);
      addActivity(`"${module.title}" modÃ¼lÃ¼nÃ¼ tamamladÄ±n!`, '', 'green');
      
      appState.currentModuleView = null;
      renderApp();
    }

    // ==================== EDITOR FUNCTIONS ====================
    function loadExample(exampleKey) {
      if (codeExamples[exampleKey]) {
        appState.editorCode = codeExamples[exampleKey].code;
        if (appState.editorInstance) {
          appState.editorInstance.setValue(appState.editorCode);
        }
        stopSimulation();
        renderApp();
      }
    }
    
    function saveEditorCode() {
      try {
        saveAppState();
        showToast('Kodunuz basariyla kaydedildi!', 'success');
      } catch (e) {
        showToast('Gecerli kodu kaydetme islemi gerceklestirilemedi. Sorun ', 'error');
      }
    }
    
    function loadSavedEditorCode() {
      const saved = localStorage.getItem('ardumind_editor_code');
      if (saved !== null) {
        appState.editorCode = saved;
        if (appState.editorInstance) {
          appState.editorInstance.setValue(appState.editorCode);
        }
        stopSimulation();
        renderApp();
        showToast('KayÄ±tlÄ± kod yÃ¼klendi', 'info');
      } else {
        showToast('KayÄ±tlÄ± kod bulunamadÄ±', 'error');
      }
    }
    
    function copyEditorCode() {
      if (navigator.clipboard && window.isSecureContext !== false) {
        navigator.clipboard.writeText(appState.editorCode)
          .then(() => showToast('Kod panoya kopyalandÄ±', 'success'))
          .catch(() => showToast('Kopyalama baÅŸarÄ±sÄ±z!', 'error'));
      } else {
        showToast('Kopyalama desteklenmiyor', 'error');
      }
    }
    
    function toggleEditorWrap() {
      appState.editorWrap = !appState.editorWrap;
      if (appState.editorInstance) {
        appState.editorInstance.setOption('lineWrapping', appState.editorWrap);
      }
      renderApp();
    }
    
    function handleEditorKeydown(e) {
      // ArtÄ±k CodeMirror kullanÄ±yoruz, bu fonksiyona gerek kalmayabilir
    }

    function initEditor() {
      const container = document.getElementById('editorContainer');
      if (!container) return;

      if (appState.editorInstance) {
        // EÄŸer editÃ¶r hala DOM iÃ§indeyse sadece yenile ve Ã§Ä±k
        if (document.body.contains(appState.editorInstance.getWrapperElement())) {
          appState.editorInstance.refresh();
          return;
        }
        // EÄŸer DOM'dan kopmuÅŸsa (re-render), instance'Ä± temizle
        appState.editorInstance = null;
      }

      appState.editorInstance = CodeMirror(container, {
        value: appState.editorCode,
        mode: 'text/x-c++src',
        theme: 'dracula',
        lineNumbers: true,
        autoCloseBrackets: true,
        styleActiveLine: true,
        tabSize: 2,
        indentUnit: 2,
        lineWrapping: appState.editorWrap
      });

      appState.editorInstance.on('change', (cm) => {
        appState.editorCode = cm.getValue();
        saveAppState();
      });

      // Font boyutunu ve tipini CSS ile ayarladÄ±k ama burada da zorlayabiliriz
      appState.editorInstance.refresh();
    }

    function parseArduinoCode(code) {
      const lines = code.split('\n');
      const commands = [];
      
      for (let line of lines) {
        line = line.trim();
        
        const pinModeMatch = line.match(/pinMode\s*\(\s*(\d+)\s*,\s*(OUTPUT|INPUT|INPUT_PULLUP)\s*\)/);
        if (pinModeMatch) {
          commands.push({ type: 'pinMode', pin: parseInt(pinModeMatch[1]), mode: pinModeMatch[2] });
        }
        
        const digitalWriteMatch = line.match(/digitalWrite\s*\(\s*(\d+)\s*,\s*(HIGH|LOW)\s*\)/);
        if (digitalWriteMatch) {
          commands.push({ type: 'digitalWrite', pin: parseInt(digitalWriteMatch[1]), value: digitalWriteMatch[2] });
        }
        
        const analogWriteMatch = line.match(/analogWrite\s*\(\s*(\d+)\s*,\s*(\d+|\w+)\s*\)/);
        if (analogWriteMatch) {
          commands.push({ type: 'analogWrite', pin: parseInt(analogWriteMatch[1]), value: analogWriteMatch[2] });
        }

        const analogReadMatch = line.match(/(?:int\s+)?(\w+)\s*=\s*analogRead\s*\(\s*(A\d|\d+)\s*\)/);
        if (analogReadMatch) {
          commands.push({ type: 'analogRead', varName: analogReadMatch[1], pin: analogReadMatch[2] });
        }

        const digitalReadAssignMatch = line.match(/(?:int\s+)?(\w+)\s*=\s*digitalRead\s*\(\s*(\d+)\s*\)/);
        if (digitalReadAssignMatch) {
          commands.push({ type: 'digitalReadAssign', varName: digitalReadAssignMatch[1], pin: parseInt(digitalReadAssignMatch[2]) });
        }

        const pulseInMatch = line.match(/(?:long\s+)?(\w+)\s*=\s*pulseIn\s*\(\s*(\d+)\s*,\s*(HIGH|LOW)\s*\)/);
        if (pulseInMatch) {
          commands.push({ type: 'pulseIn', varName: pulseInMatch[1], pin: parseInt(pulseInMatch[2]) });
        }

        const serialPrintlnMatch = line.match(/Serial\.println\s*\(\s*(.*)\s*\)/);
        if (serialPrintlnMatch) {
          commands.push({ type: 'serialPrintln', value: serialPrintlnMatch[1].trim() });
        }

        const serialPrintMatch = line.match(/Serial\.print\s*\(\s*(.*)\s*\)/);
        if (serialPrintMatch && !line.includes('println')) {
          commands.push({ type: 'serialPrintln', value: serialPrintMatch[1].trim() });
        }

        const serialBeginMatch = line.match(/Serial\.begin\s*\(\s*(\d+)\s*\)/);
        if (serialBeginMatch) {
          commands.push({ type: 'serialBegin', baud: parseInt(serialBeginMatch[1]) });
        }
        
        const servoWriteMatch = line.match(/servo\.write\s*\(\s*(\d+)\s*\)/);
        if (servoWriteMatch) {
          commands.push({ type: 'servoWrite', angle: parseInt(servoWriteMatch[1]) });
        }
        
        const delayMatch = line.match(/delay\s*\(\s*(\d+)\s*\)/);
        if (delayMatch) {
          commands.push({ type: 'delay', ms: parseInt(delayMatch[1]) });
        }

        const delayUsMatch = line.match(/delayMicroseconds\s*\(\s*(\d+)\s*\)/);
        if (delayUsMatch) {
          commands.push({ type: 'delay', ms: 1 }); // SimÃ¼lasyonda mikro saniyeyi 1ms yapalÄ±m
        }

        const mapMatch = line.match(/(?:int\s+)?(\w+)\s*=\s*map\s*\(\s*([^,]+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/);
        if (mapMatch) {
          commands.push({ 
            type: 'map', 
            varName: mapMatch[1], 
            value: mapMatch[2].trim(),
            inMin: mapMatch[3], 
            inMax: mapMatch[4], 
            outMin: mapMatch[5], 
            outMax: mapMatch[6] 
          });
        }

        // Genel matematiksel atamalar: int x = y * 0.034 / 2;
        const mathMatch = line.match(/^(?:int|long|float|double)\s+(\w+)\s*=\s*([^;]+);/);
        if (mathMatch && !line.includes('analogRead') && !line.includes('digitalRead') && !line.includes('pulseIn') && !line.includes('map') && !line.includes('millis')) {
          commands.push({
            type: 'math',
            varName: mathMatch[1],
            expression: mathMatch[2].trim()
          });
        }
      }
      
      return commands;
    }
    
    function parseConditionalWrites(lines) {
      const commands = [];
      const varPinMap = {};
      for (let i = 0; i < lines.length; i++) {
        const line = lines[i].trim();
        const assignMatch = line.match(/^(?:int|long|float)\s+(\w+)\s*=\s*(?:digitalRead|analogRead|pulseIn|map)\s*\(/) || line.match(/^(?:int|long|float)\s+(\w+)\s*=\s*.*;/);
        if (assignMatch) {
          // DeÄŸiÅŸken tanÄ±mlamalarÄ±nÄ± takip etmiyoruz, sadece if iÃ§indeki deÄŸiÅŸken adÄ±nÄ± kullanacaÄŸÄ±z
          continue;
        }
        
        // SayÄ±sal karÅŸÄ±laÅŸtÄ±rmalar (if (mesafe < 20)) veya Buton (if (buttonState == HIGH))
        const ifMatch = line.match(/^if\s*\(\s*(\w+)\s*(<|>|==|<=|>=|!=)\s*(\d+|HIGH|LOW)\s*\)\s*\{/);
        
        if (ifMatch) {
          const varName = ifMatch[1];
          const operator = ifMatch[2];
          const thresholdVal = ifMatch[3];
          
          let threshold = 0;
          if (thresholdVal === 'HIGH') threshold = 1;
          else if (thresholdVal === 'LOW') threshold = 0;
          else threshold = parseInt(thresholdVal);

          let j = i + 1;
          let braceDepth = 1;
          let pinIf = null, valIf = null;
          for (; j < lines.length; j++) {
            const l = lines[j].trim();
            if (l.includes('{')) braceDepth++;
            if (l.includes('}')) {
              braceDepth--;
              if (braceDepth === 0) { j++; break; }
            } else {
              const dw = l.match(/digitalWrite\s*\(\s*(\d+)\s*,\s*(HIGH|LOW)\s*\)/);
              if (dw && pinIf === null) { pinIf = parseInt(dw[1]); valIf = dw[2]; }
            }
          }
          
          let pinElse = null, valElse = null;
          if (j < lines.length && lines[j] && lines[j].trim().startsWith('else')) {
            let k = j + 1;
            braceDepth = 0;
            if (lines[k] && lines[k].includes('{')) { braceDepth = 1; k++; }
            for (; k < lines.length; k++) {
              const l = lines[k].trim();
              if (l.includes('{')) braceDepth++;
              if (l.includes('}')) {
                braceDepth--;
                if (braceDepth === 0) { break; }
              } else {
                const dw = l.match(/digitalWrite\s*\(\s*(\d+)\s*,\s*(HIGH|LOW)\s*\)/);
                if (dw && pinElse === null) { pinElse = parseInt(dw[1]); valElse = dw[2]; }
              }
            }
          }
          
          const targetPin = pinIf ?? pinElse;
          if (targetPin != null) {
            // EÄŸer deÄŸiÅŸken bir pin ile iliÅŸkiliyse (digitalRead), conditionPin kullan
            // DeÄŸilse (mesafe gibi), varName ve threshold kullan
            commands.push({ 
              type: 'conditionalWrite', 
              varName: varName,
              operator: operator,
              threshold: threshold,
              targetPin, 
              trueValue: valIf || 'LOW', 
              falseValue: valElse || 'LOW' 
            });
          }
        }
      }
      return commands;
    }

    function updateSimulationDisplay() {
      const arduinoBoard = document.getElementById('arduinoBoard');
      const serialMonitor = document.getElementById('serialMonitor');
      
      if (arduinoBoard) {
        arduinoBoard.innerHTML = renderArduinoBoard();
      }
      
      if (serialMonitor) {
        const scrollAtBottom = serialMonitor.scrollHeight - serialMonitor.scrollTop <= serialMonitor.clientHeight + 50;
        
        // Sadece kullanÄ±cÄ± Ã§Ä±ktÄ±larÄ±nÄ± gÃ¶sterelim (Serial.print)
        const displayLogs = appState.userSerialOutput.length > 0 ? appState.userSerialOutput : appState.serialOutput;
        
        serialMonitor.innerHTML = displayLogs.length === 0 
          ? `<div class="text-slate-500 text-center py-8">Kodu Ã§alÄ±ÅŸtÄ±rÄ±n...</div>` 
          : displayLogs.map(output => `
              <div class="mb-1 flex space-x-2">
                <span class="text-slate-600 text-[10px] mt-1">${output.timestamp || ''}</span>
                <div class="${output.type === 'error' ? 'text-red-400' : output.type === 'info' ? 'text-blue-400' : 'text-green-400'} text-sm">
                  ${output.text}
                </div>
              </div>
            `).join('');
        
        if (scrollAtBottom) {
          serialMonitor.scrollTop = serialMonitor.scrollHeight;
        }
      }
    }

    function renderArduinoBoard() {
      const hasServo = Object.keys(appState.servoStates).length > 0;
      const hasMotor = Object.keys(appState.motorStates).length > 0;
      
      // Pin durumlarÄ±nÄ± kontrol et
      const getPinState = (pin) => {
        const state = appState.ledStates[pin];
        if (state === 'HIGH' || (typeof state === 'number' && state > 0)) return true;
        return false;
      };

      const getPinIntensity = (pin) => {
        const state = appState.ledStates[pin];
        if (typeof state === 'number') return Math.min(Math.max(state / 255, 0), 1);
        if (state === 'HIGH') return 1;
        return 0;
      };

      return `
        <!-- GeliÅŸmiÅŸ Arduino Uno GÃ¶rseli -->
        <div class="relative w-full max-w-[500px] mx-auto mb-10 group">
          <svg viewBox="0 0 400 300" class="w-full h-auto drop-shadow-[0_20px_50px_rgba(0,0,0,0.5)] transition-transform duration-500 group-hover:rotate-1">
            <!-- PCB Base -->
            <rect x="10" y="10" width="380" height="280" rx="15" fill="#1e40af" stroke="#1d4ed8" stroke-width="2" />
            <rect x="15" y="15" width="370" height="270" rx="12" fill="none" stroke="#ffffff" stroke-width="0.5" stroke-dasharray="2,2" opacity="0.3" />
            
            <!-- Montaj Delikleri -->
            <circle cx="35" cy="35" r="8" fill="#1e293b" stroke="#64748b" stroke-width="2" />
            <circle cx="35" cy="265" r="8" fill="#1e293b" stroke="#64748b" stroke-width="2" />
            <circle cx="365" cy="100" r="8" fill="#1e293b" stroke="#64748b" stroke-width="2" />
            <circle cx="365" cy="265" r="8" fill="#1e293b" stroke="#64748b" stroke-width="2" />

            <!-- USB Port -->
            <rect x="0" y="35" width="60" height="50" rx="4" fill="#94a3b8" />
            <rect x="0" y="40" width="55" height="40" rx="2" fill="#cbd5e1" />
            <rect x="10" y="45" width="40" height="30" fill="#1e293b" rx="1" />
            
            <!-- Power Jack -->
            <rect x="0" y="210" width="70" height="60" rx="4" fill="#0f172a" />
            <circle cx="35" cy="240" r="15" fill="#1e293b" stroke="#334155" stroke-width="2" />
            <circle cx="35" cy="240" r="5" fill="#000" />

            <!-- ATmega328P Chip -->
            <rect x="220" y="120" width="120" height="60" rx="4" fill="#1e293b" stroke="#334155" stroke-width="1" />
            <text x="235" y="155" fill="#64748b" font-family="monospace" font-size="10" font-weight="bold">ATMEGA328P-AU</text>
            <!-- Chip Pins -->
            ${Array.from({length: 8}).map((_, i) => `
              <rect x="${230 + i*14}" y="115" width="4" height="5" fill="#94a3b8" />
              <rect x="${230 + i*14}" y="180" width="4" height="5" fill="#94a3b8" />
            `).join('')}

            <!-- Pin Headers (Top - Digital) -->
            <rect x="100" y="10" width="280" height="25" rx="2" fill="#0f172a" />
            ${Array.from({length: 14}).map((_, i) => {
              const pin = 13 - i;
              const intensity = getPinIntensity(pin);
              const isActive = intensity > 0;
              return `
                <rect x="${355 - i*18}" y="15" width="12" height="15" rx="1" fill="${isActive ? '#3b82f6' : '#334155'}" />
                <circle cx="${361 - i*18}" cy="22.5" r="3" fill="${isActive ? '#60a5fa' : '#1e293b'}">
                  ${isActive ? `<animate attributeName="opacity" values="0.5;1;0.5" dur="1s" repeatCount="indefinite" />` : ''}
                </circle>
                <text x="${355 - i*18}" y="45" fill="#94a3b8" font-size="7" font-weight="bold">${pin}</text>
              `;
            }).join('')}
            <text x="110" y="45" fill="#fff" font-size="8" font-weight="bold" opacity="0.5">DIGITAL (PWM~)</text>

            <!-- Pin Headers (Bottom - Analog & Power) -->
            <rect x="120" y="265" width="240" height="25" rx="2" fill="#0f172a" />
            ${Array.from({length: 6}).map((_, i) => `
              <rect x="${340 - i*18}" y="270" width="12" height="15" rx="1" fill="#334155" />
              <circle cx="${346 - i*18}" cy="277.5" r="3" fill="#1e293b" />
              <text x="${340 - i*18}" y="260" fill="#94a3b8" font-size="7" font-weight="bold">A${5-i}</text>
            `).join('')}
            <text x="290" y="260" fill="#fff" font-size="8" font-weight="bold" opacity="0.5">ANALOG IN</text>

            <!-- Crystal -->
            <rect x="120" y="140" width="30" height="15" rx="7" fill="#cbd5e1" stroke="#94a3b8" stroke-width="1" />
            <text x="124" y="151" fill="#64748b" font-size="6" font-weight="bold">16.000</text>

            <!-- On-board LEDs -->
            <!-- Power LED -->
            <circle cx="360" cy="55" r="3" fill="#22c55e" shadow="0 0 5px #22c55e" />
            <text x="345" y="58" fill="#94a3b8" font-size="6">ON</text>
            
            <!-- Pin 13 LED -->
            <circle cx="360" cy="75" r="3" fill="${getPinState(13) ? '#eab308' : '#334155'}">
              ${getPinState(13) ? `<animate attributeName="opacity" values="0.5;1;0.5" dur="0.5s" repeatCount="indefinite" />` : ''}
            </circle>
            <text x="345" y="78" fill="#94a3b8" font-size="6">L</text>

            <!-- TX/RX LEDs -->
            <circle cx="360" cy="130" r="2.5" fill="${appState.simulationRunning ? '#eab308' : '#334155'}" />
            <text x="345" y="133" fill="#94a3b8" font-size="6">TX</text>
            <circle cx="360" cy="145" r="2.5" fill="${appState.simulationRunning ? '#eab308' : '#334155'}" />
            <text x="345" y="148" fill="#94a3b8" font-size="6">RX</text>

            <!-- Reset Button -->
            <rect x="25" y="100" width="30" height="30" rx="4" fill="#334155" />
            <circle cx="40" cy="115" r="10" fill="#ef4444" stroke="#b91c1c" stroke-width="2" class="cursor-pointer hover:fill-red-400" onclick="resetSimulation()" />
          </svg>

          <!-- Pin DurumlarÄ± (Pop-up Bilgi) -->
          <div class="absolute -top-4 left-1/2 -translate-x-1/2 flex space-x-2 bg-slate-800/90 backdrop-blur-md px-4 py-2 rounded-full border border-slate-700 shadow-2xl scale-0 group-hover:scale-100 transition-transform duration-300">
             ${[13, 11, 10, 9, 6, 5, 3].map(pin => {
               const intensity = getPinIntensity(pin);
               const isOn = intensity > 0;
               return `
                 <div class="flex flex-col items-center">
                   <div class="w-2 h-2 rounded-full ${isOn ? 'bg-yellow-400 animate-pulse' : 'bg-slate-600'}"></div>
                   <span class="text-[8px] font-bold text-slate-400 mt-1">D${pin}</span>
                 </div>
               `;
             }).join('')}
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="space-y-6">
            <!-- Potansiyometre -->
            <div class="bg-gradient-to-br from-slate-800/40 to-slate-900/40 p-6 rounded-2xl border border-slate-700/50 backdrop-blur-sm hover:border-blue-500/30 transition-all duration-300 shadow-[0_0_30px_rgba(0,0,0,0.3)]">
              <div class="flex items-center justify-between mb-6">
                <div class="flex items-center space-x-3">
                  <div class="w-3 h-3 rounded-full bg-blue-500 shadow-[0_0_12px_rgba(59,130,246,0.8)] animate-pulse"></div>
                  <span class="text-sm font-semibold text-slate-200">Potansiyometre (A0)</span>
                </div>
                <div class="bg-blue-500/15 px-3 py-1.5 rounded-full border border-blue-500/40 backdrop-blur-sm">
                  <span class="text-[11px] font-mono font-bold text-blue-300">${appState.potValue}</span>
                  <span class="text-[10px] text-blue-500/70 ml-1">/ 1023</span>
                </div>
              </div>
              
              <!-- GerÃ§ekÃ§i Potansiyometre GÃ¶rseli -->
              <div class="flex flex-col items-center space-y-6">
                <!-- Potansiyometre DÃ¶nme BÃ¶lÃ¼mÃ¼ -->
                <div class="relative w-48 h-28 flex items-center justify-center">
                  <!-- Taban -->
                  <div class="absolute inset-0 bg-gradient-to-br from-slate-700 to-slate-900 rounded-2xl border-2 border-slate-600 shadow-lg shadow-inner">
                    <!-- Elektronik Alt Katman -->
                    <div class="absolute inset-3 bg-slate-800 rounded-lg border border-slate-700"></div>
                  </div>
                  
                  <!-- BaÄŸlantÄ± Pimleri -->
                  <div class="absolute bottom-0 left-0 right-0 flex justify-around pb-4">
                    <div class="w-3 h-8 bg-slate-600 border-2 border-slate-500 rounded-t-sm shadow-lg"></div>
                    <div class="w-3 h-8 bg-slate-600 border-2 border-slate-500 rounded-t-sm shadow-lg"></div>
                    <div class="w-3 h-8 bg-slate-600 border-2 border-slate-500 rounded-t-sm shadow-lg"></div>
                  </div>
                  
                  <!-- Rotor (DÃ¶nen KÄ±sÄ±m) -->
                  <div class="relative w-32 h-32">
                    <!-- DÃ¶nen Disk -->
                    <div 
                      class="absolute inset-0 flex items-center justify-center" 
                      style="transform: rotate(${(appState.potValue/1023)*270}deg); transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);"
                    >
                      <!-- DÃ¶nen Kutu -->
                      <div class="w-24 h-8 bg-gradient-to-r from-slate-500 to-slate-700 rounded-xl border-2 border-slate-400 shadow-inner shadow-[inset_0_0_10px_rgba(0,0,0,0.5)]"></div>
                      <!-- DÃ¶nme Kolu -->
                      <div class="absolute w-1.5 h-14 bg-gradient-to-b from-blue-400 to-blue-600 shadow-[0_0_15px_rgba(59,130,246,0.9)] rounded-full -top-14 z-10"></div>
                    </div>
                    <!-- Merkez Nokta -->
                    <div class="absolute inset-0 flex items-center justify-center">
                      <div class="w-8 h-8 bg-gradient-to-br from-slate-400 to-slate-600 rounded-full border-2 border-slate-300 shadow-lg z-20">
                        <div class="absolute inset-1.5 bg-slate-800 rounded-full border border-slate-500"></div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- DeÄŸer BarÄ± -->
                <div class="w-full space-y-2">
                  <div class="relative h-5 bg-slate-800/60 rounded-full overflow-hidden border-2 border-slate-700 shadow-inner">
                    <div 
                      class="h-full bg-gradient-to-r from-blue-300 via-blue-500 to-blue-700 shadow-[0_0_12px_rgba(59,130,246,0.7)] transition-all duration-200"
                      style="width: ${(appState.potValue/1023)*100}%"
                    ></div>
                    <!-- YÃ¼zey AydÄ±nlÄ±ÄŸÄ± -->
                    <div class="absolute top-0 left-0 w-full h-1.5 bg-white/30"></div>
                    <!-- DeÄŸer Ä°ndikatÃ¶rÃ¼ -->
                    <div 
                      class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)]" 
                      style="left: ${(appState.potValue/1023)*100 - 0.375}%; transition: left 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);"
                    ></div>
                  </div>
                  <div class="flex justify-between text-[10px] font-medium text-slate-400 uppercase tracking-wider">
                    <span>0V</span>
                    <span class="text-blue-400 font-bold">${((appState.potValue/1023)*5).toFixed(1)}V</span>
                    <span>5V</span>
                  </div>
                </div>
                
                <!-- AkÄ±ÅŸ Kontrol -->
                <input 
                  type="range" min="0" max="1023" value="${appState.potValue}" 
                  class="w-full h-2 bg-transparent appearance-none cursor-pointer accent-blue-500"
                  oninput="appState.potValue = parseInt(this.value); updateSimulationDisplay();"
                  style="
                    background: linear-gradient(to right, #3b82f6 0%, #3b82f6 ${(appState.potValue/1023)*100}%, #475569 ${(appState.potValue/1023)*100}%, #475569 100%);
                    border-radius: 9999px;
                    border: 1px solid #334155;
                  "
                >
              </div>
            </div>

            <!-- HC-SR04 SensÃ¶r -->
            <div class="bg-gradient-to-br from-slate-800/40 to-slate-900/40 p-6 rounded-2xl border border-slate-700/50 backdrop-blur-sm hover:border-emerald-500/30 transition-all duration-300 shadow-[0_0_30px_rgba(0,0,0,0.3)]">
              <div class="flex items-center justify-between mb-6">
                <div class="flex items-center space-x-3">
                  <div class="w-3 h-3 rounded-full bg-emerald-500 shadow-[0_0_12px_rgba(16,185,129,0.8)] animate-pulse"></div>
                  <span class="text-sm font-semibold text-slate-200">HC-SR04 Mesafe SensÃ¶rÃ¼</span>
                </div>
                <div class="bg-emerald-500/15 px-3 py-1.5 rounded-full border border-emerald-500/40 backdrop-blur-sm">
                  <span class="text-[11px] font-mono font-bold text-emerald-300">${appState.hcsr04Distance} cm</span>
                </div>
              </div>
              
              <!-- HC-SR04 GÃ¶rseli -->
              <div class="flex flex-col items-center space-y-6">
                <!-- SensÃ¶r GÃ¶sterimi -->
                <div class="relative w-72 h-40">
                  <!-- HC-SR04 CihazÄ± -->
                  <div class="absolute left-1/2 -translate-x-1/2 w-56 h-20 bg-gradient-to-br from-slate-700 to-slate-900 rounded-xl border-2 border-slate-600 shadow-xl shadow-inner">
                    <!-- SensÃ¶r YÃ¼zÃ¼ -->
                    <div class="absolute inset-2 bg-slate-800 rounded-lg flex items-center justify-around">
                      <!-- Ultrasonik TransdÃ¼serler -->
                      <div class="w-12 h-12 bg-gradient-to-br from-slate-900 to-slate-800 rounded-full border-2 border-slate-600 flex items-center justify-center shadow-inner">
                        <div class="w-7 h-7 bg-slate-700 rounded-full border border-slate-600 shadow-[inset_0_0_6px_rgba(0,0,0,0.8)]"></div>
                        <!-- TransdÃ¼ser AydÄ±nlÄ±ÄŸÄ± -->
                        <div class="absolute inset-0 rounded-full bg-emerald-500/10 animate-pulse"></div>
                      </div>
                      <div class="w-12 h-12 bg-gradient-to-br from-slate-900 to-slate-800 rounded-full border-2 border-slate-600 flex items-center justify-center shadow-inner">
                        <div class="w-7 h-7 bg-slate-700 rounded-full border border-slate-600 shadow-[inset_0_0_6px_rgba(0,0,0,0.8)]"></div>
                        <!-- TransdÃ¼ser AydÄ±nlÄ±ÄŸÄ± -->
                        <div class="absolute inset-0 rounded-full bg-emerald-500/10 animate-pulse"></div>
                      </div>
                      <!-- SensÃ¶r Etiketi -->
                      <div class="absolute bottom-3 left-1/2 -translate-x-1/2 text-[9px] font-bold text-slate-500">HC-SR04</div>
                    </div>
                    
                    <!-- BaÄŸlantÄ± Pimleri -->
                    <div class="absolute right-0 top-1/2 -translate-y-1/2 flex flex-col space-y-2 mr-3">
                      <div class="w-2 h-4 bg-slate-600 border border-slate-500 rounded-sm"></div>
                      <div class="w-2 h-4 bg-slate-600 border border-slate-500 rounded-sm"></div>
                      <div class="w-2 h-4 bg-slate-600 border border-slate-500 rounded-sm"></div>
                      <div class="w-2 h-4 bg-slate-600 border border-slate-500 rounded-sm"></div>
                    </div>
                  </div>
                  
                  <!-- Ultrasonik Dalga Animasyonu -->
                  <div class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none">
                    <div 
                      class="absolute border-2 border-emerald-400 rounded-full opacity-40" 
                      style="animation: waveAnimation ${appState.hcsr04Distance/40}s infinite; width: ${appState.hcsr04Distance/1.5}px; height: ${appState.hcsr04Distance/1.5}px; margin-left: -${appState.hcsr04Distance/3}px; margin-top: -${appState.hcsr04Distance/3}px;"
                    ></div>
                    <div 
                      class="absolute border-2 border-emerald-400 rounded-full opacity-30" 
                      style="animation: waveAnimation ${appState.hcsr04Distance/40}s infinite 0.2s; width: ${appState.hcsr04Distance/1.5}px; height: ${appState.hcsr04Distance/1.5}px; margin-left: -${appState.hcsr04Distance/3}px; margin-top: -${appState.hcsr04Distance/3}px;"
                    ></div>
                    <div 
                      class="absolute border-2 border-emerald-400 rounded-full opacity-20" 
                      style="animation: waveAnimation ${appState.hcsr04Distance/40}s infinite 0.4s; width: ${appState.hcsr04Distance/1.5}px; height: ${appState.hcsr04Distance/1.5}px; margin-left: -${appState.hcsr04Distance/3}px; margin-top: -${appState.hcsr04Distance/3}px;"
                    ></div>
                    <div 
                      class="absolute border-2 border-emerald-400 rounded-full opacity-10" 
                      style="animation: waveAnimation ${appState.hcsr04Distance/40}s infinite 0.6s; width: ${appState.hcsr04Distance/1.5}px; height: ${appState.hcsr04Distance/1.5}px; margin-left: -${appState.hcsr04Distance/3}px; margin-top: -${appState.hcsr04Distance/3}px;"
                    ></div>
                  </div>
                  
                  <!-- Hedef Nokta -->
                  <div class="absolute right-8 top-1/2 -translate-y-1/2 w-8 h-8 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-full shadow-[0_0_15px_rgba(16,185,129,0.9)] flex items-center justify-center border-2 border-emerald-300">
                    <div class="w-3 h-3 bg-white rounded-full shadow-[0_0_8px_rgba(255,255,255,0.9)]"></div>
                    <!-- Hedef Etiketi -->
                    <div class="absolute bottom-[-16px] left-1/2 -translate-x-1/2 text-[9px] font-bold text-emerald-300">Hedef</div>
                  </div>
                </div>
                
                <!-- Mesafe BarÄ± -->
                <div class="w-full space-y-2">
                  <div class="relative h-5 bg-slate-800/60 rounded-full overflow-hidden border-2 border-slate-700 shadow-inner">
                    <div 
                      class="h-full bg-gradient-to-r from-emerald-300 via-emerald-500 to-emerald-700 shadow-[0_0_12px_rgba(16,185,129,0.7)] transition-all duration-200"
                      style="width: ${(appState.hcsr04Distance/400)*100}%"
                    ></div>
                    <!-- YÃ¼zey AydÄ±nlÄ±ÄŸÄ± -->
                    <div class="absolute top-0 left-0 w-full h-1.5 bg-white/30"></div>
                    <!-- Hedef Ä°ÅŸareti -->
                    <div 
                      class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)]" 
                      style="left: ${(appState.hcsr04Distance/400)*100 - 0.375}%; transition: left 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);"
                    ></div>
                  </div>
                  <div class="flex justify-between text-[10px] font-medium text-slate-400 uppercase tracking-wider">
                    <span>2 cm</span>
                    <span class="text-emerald-400 font-bold">${appState.hcsr04Distance} cm</span>
                    <span>400 cm</span>
                  </div>
                </div>
                
                <!-- AkÄ±ÅŸ Kontrol -->
                <input 
                  type="range" min="2" max="400" value="${appState.hcsr04Distance}" 
                  class="w-full h-2 bg-transparent appearance-none cursor-pointer accent-emerald-500"
                  oninput="appState.hcsr04Distance = parseInt(this.value); updateSimulationDisplay();"
                  style="
                    background: linear-gradient(to right, #10b981 0%, #10b981 ${(appState.hcsr04Distance/400)*100}%, #475569 ${(appState.hcsr04Distance/400)*100}%, #475569 100%);
                    border-radius: 9999px;
                    border: 1px solid #334155;
                  "
                >
              </div>
            </div>

            <!-- Butonlar -->
            <div class="flex gap-4">
              <button 
                onclick="toggleButton(2)"
                class="flex-1 group relative overflow-hidden py-3 px-4 rounded-2xl border transition-all duration-300 ${appState.buttonStates[2] ? 'bg-indigo-500/20 border-indigo-500/50 text-indigo-300 shadow-[0_0_20px_rgba(99,102,241,0.15)]' : 'bg-slate-800/40 border-slate-700/50 text-slate-400 hover:bg-slate-700/60'}"
              >
                <div class="relative z-10 flex items-center justify-center space-x-3">
                  <div class="w-2 h-2 rounded-full transition-all duration-300 ${appState.buttonStates[2] ? 'bg-indigo-400 shadow-[0_0_8px_rgba(129,140,248,0.8)]' : 'bg-slate-600'}"></div>
                  <span class="text-sm font-bold uppercase tracking-wide">Buton (Pin 2) â€¢ ${appState.buttonStates[2] ? 'BASILI' : 'SERBEST'}</span>
                </div>
                ${appState.buttonStates[2] ? '<div class="absolute inset-0 bg-indigo-500/10 animate-pulse"></div>' : ''}
              </button>
            </div>
          </div>

          <div class="space-y-6">
            ${hasMotor ? `
              <div class="bg-slate-800/40 p-5 rounded-2xl border border-slate-700/50 backdrop-blur-sm shadow-xl">
                <div class="flex items-center justify-between mb-6">
                  <div class="flex items-center space-x-3">
                    <div class="w-2.5 h-2.5 rounded-full bg-amber-500 shadow-[0_0_10px_rgba(245,158,11,0.6)] animate-pulse"></div>
                    <span class="text-sm font-bold text-slate-200 tracking-wide uppercase">DC Motor KontrolÃ¼</span>
                  </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                  ${Object.entries(appState.motorStates).map(([pin, _]) => {
                    const speed = Math.min((appState.displayMotorStates[pin] || 0) / 255, 1);
                    const rpm = Math.round(speed * 12000);
                    const angle = appState.motorAngles[pin] || 0;
                    const isRunning = speed > 0.01;
                    
                    return `
                      <div class="bg-slate-900/60 p-5 rounded-2xl border border-slate-700/40 text-center transition-all duration-300 hover:border-amber-500/30 group">
                        <div class="relative w-20 h-20 mx-auto mb-4">
                          <!-- Motor DÄ±ÅŸ Kasa -->
                          <div class="absolute inset-0 rounded-2xl bg-gradient-to-br from-slate-700 to-slate-800 border-2 border-slate-600 shadow-lg"></div>
                          <!-- Motor Ã–n Kapak -->
                          <div class="absolute inset-2 rounded-full bg-slate-800 border border-slate-700 shadow-inner flex items-center justify-center">
                            <!-- Mil -->
                            <div class="w-4 h-4 rounded-full bg-slate-600 border-2 border-slate-500 z-20"></div>
                            
                            <!-- Pervane (Minimal) -->
                            <div 
                              class="absolute inset-0 flex items-center justify-center" 
                              style="transform: rotate(${angle}deg); filter: ${speed > 0.7 ? 'blur(1px)' : 'none'};"
                            >
                              <div class="w-[85%] h-1.5 bg-gradient-to-r from-transparent via-slate-400 to-transparent rounded-full opacity-90"></div>
                              <div class="w-1.5 h-[85%] bg-gradient-to-b from-transparent via-slate-400 to-transparent rounded-full absolute opacity-90"></div>
                            </div>
                          </div>
                        </div>
                        
                        <div class="space-y-1">
                          <div class="text-[10px] font-black text-slate-500 tracking-[0.2em] uppercase">PÄ°N ${pin}</div>
                          <div class="flex items-center justify-center space-x-2">
                            <div class="text-xl font-mono font-black ${isRunning ? 'text-amber-400' : 'text-slate-600'} transition-colors duration-300">
                              ${rpm} <span class="text-[10px] text-slate-500">RPM</span>
                            </div>
                          </div>
                          <!-- HÄ±z BarÄ± -->
                          <div class="w-full h-1 bg-slate-800 rounded-full mt-2 overflow-hidden">
                            <div class="h-full bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)]" style="width: ${speed * 100}%; transition: width 0.1s linear;"></div>
                          </div>
                        </div>
                      </div>
                    `;
                  }).join('')}
                </div>
              </div>
            ` : ''}

            ${hasServo ? `
              <div class="bg-slate-800/40 p-5 rounded-2xl border border-slate-700/50 backdrop-blur-sm shadow-xl">
                <div class="flex items-center justify-between mb-6">
                  <div class="flex items-center space-x-3">
                    <div class="w-2.5 h-2.5 rounded-full bg-rose-500 shadow-[0_0_10px_rgba(244,63,94,0.6)] animate-pulse"></div>
                    <span class="text-sm font-bold text-slate-200 tracking-wide uppercase">Servo KontrolÃ¼</span>
                  </div>
                </div>
                <div class="space-y-6">
                  ${Object.entries(appState.servoStates).map(([pin, angle]) => `
                    <div class="bg-slate-900/60 p-6 rounded-2xl border border-slate-700/40 flex items-center space-x-8 transition-all duration-300 hover:border-rose-500/30">
                      <div class="relative w-24 h-24 flex-shrink-0 group">
                        <!-- Servo Alt GÃ¶vde -->
                        <div class="absolute inset-x-2 bottom-0 h-16 bg-slate-800 rounded-lg border-2 border-slate-700 shadow-lg"></div>
                        <!-- Servo Ãœst Kapak -->
                        <div class="absolute top-4 left-1/2 -translate-x-1/2 w-16 h-16 bg-slate-700 rounded-full border-2 border-slate-600 shadow-md flex items-center justify-center">
                          <div class="w-12 h-12 bg-slate-800 rounded-full border border-slate-700 shadow-inner"></div>
                        </div>
                        
                        <!-- Horn (Minimal & Modern) -->
                        <div 
                          class="absolute top-1/2 left-1/2 w-1.5 h-20 bg-gradient-to-b from-slate-200 to-slate-400 origin-center transition-all duration-700 cubic-bezier(0.34, 1.56, 0.64, 1) z-10 rounded-full shadow-md"
                          style="transform: translate(-50%, -50%) rotate(${angle}deg);"
                        >
                          <div class="absolute top-1 left-1/2 -translate-x-1/2 w-4 h-4 bg-white rounded-full border-2 border-slate-300 shadow-sm"></div>
                          <div class="absolute bottom-1 left-1/2 -translate-x-1/2 w-4 h-4 bg-white rounded-full border-2 border-slate-300 shadow-sm"></div>
                        </div>
                        
                        <!-- Merkez VidasÄ± -->
                        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-6 h-6 bg-slate-600 rounded-full border-2 border-slate-500 z-20 shadow-lg flex items-center justify-center">
                          <div class="w-1 h-3 bg-slate-400 rounded-full rotate-45"></div>
                          <div class="w-1 h-3 bg-slate-400 rounded-full -rotate-45 absolute"></div>
                        </div>
                      </div>
                      
                      <div class="flex-1 space-y-3">
                        <div class="flex items-end justify-between">
                          <div>
                            <div class="text-[10px] font-black text-slate-500 tracking-[0.2em] uppercase mb-1">PÄ°N ${pin} POZÄ°SYON</div>
                            <div class="text-4xl font-black text-rose-500 font-mono tracking-tighter leading-none">${angle}<span class="text-xl ml-1 text-rose-500/50">Â°</span></div>
                          </div>
                          <div class="text-[10px] font-bold text-slate-400 bg-slate-800 px-3 py-1 rounded-full border border-slate-700">
                            ${angle < 60 ? 'SOL' : angle > 120 ? 'SAÄ' : 'MERKEZ'}
                          </div>
                        </div>
                        
                        <!-- AÃ§Ä± GÃ¶stergesi -->
                        <div class="relative pt-4">
                          <div class="w-full h-2 bg-slate-800 rounded-full overflow-hidden border border-slate-700/50">
                            <div class="h-full bg-gradient-to-r from-rose-600 to-rose-400 transition-all duration-700 cubic-bezier(0.34, 1.56, 0.64, 1) shadow-[0_0_12px_rgba(244,63,94,0.4)]" style="width: ${(angle/180)*100}%"></div>
                          </div>
                          <div class="flex justify-between mt-2 text-[9px] font-black text-slate-600 tracking-widest">
                            <span>0Â°</span>
                            <span>90Â°</span>
                            <span>180Â°</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  `).join('')}
                </div>
              </div>
            ` : ''}
          </div>
        </div>
      `;
    }

    function logToSerial(text, type = 'info', isUser = false) {
      const log = { type, text, timestamp: new Date().toLocaleTimeString().split(' ')[0] };
      appState.serialOutput.push(log);
      if (isUser) {
        appState.userSerialOutput.push(log);
      }
      updateSimulationDisplay();
    }

    function validateCode(code) {
      const issues = [];
      const addError = (text) => issues.push({ level: 'error', text });
      const addWarn = (text) => issues.push({ level: 'info', text });
      
      if (!code || code.trim() === '') {
        addError('Kod boÅŸ olamaz!');
        return { valid: false, message: 'Kod boÅŸ olamaz!', issues };
      }
      
      if (!code.includes('void setup()')) {
        addError('setup() fonksiyonu eksik!');
        return { valid: false, message: 'setup() fonksiyonu eksik!', issues };
      }
      
      if (!code.includes('void loop()')) {
        addError('loop() fonksiyonu eksik!');
        return { valid: false, message: 'loop() fonksiyonu eksik!', issues };
      }
      
      // Temel parantez kontrolÃ¼
      const openBraces = (code.match(/\{/g) || []).length;
      const closeBraces = (code.match(/\}/g) || []).length;
      if (openBraces !== closeBraces) {
        addError('Eksik veya fazla sÃ¼slÃ¼ parantez { } hatasÄ±!');
        return { valid: false, message: 'Eksik veya fazla sÃ¼slÃ¼ parantez { } hatasÄ±!', issues };
      }
      
      // GeliÅŸmiÅŸ doÄŸrulama kurallarÄ±
      const cmds = parseArduinoCode(code);
      const pinModes = {};
      const pwmPins = [3, 5, 6, 9, 10, 11];
      let hasSerialBegin = false;
      
      cmds.forEach(c => {
        if (c.type === 'pinMode') {
          pinModes[c.pin] = c.mode;
        }
        if (c.type === 'serialBegin') hasSerialBegin = true;
      });
      
      // setup ve loop gÃ¶vdelerini ayÄ±r ve sÄ±raya gÃ¶re deÄŸiÅŸken atamalarÄ±nÄ± izle
      const assignedVars = new Set();
      const lines = code.split('\n');
      for (let i = 0; i < lines.length; i++) {
        const l = lines[i].trim();
        const analogAssign = l.match(/(?:int|long|float|double)\s+(\w+)\s*=\s*analogRead\s*\(/);
        const digitalAssign = l.match(/(?:int|long|float|double)\s+(\w+)\s*=\s*digitalRead\s*\(/);
        const pulseAssign = l.match(/(?:int|long|float|double|long)\s+(\w+)\s*=\s*pulseIn\s*\(/);
        const mathAssign = l.match(/^(?:int|long|float|double)\s+(\w+)\s*=\s*[^;]+;/);
        if (analogAssign) assignedVars.add(analogAssign[1]);
        else if (digitalAssign) assignedVars.add(digitalAssign[1]);
        else if (pulseAssign) assignedVars.add(pulseAssign[1]);
        else if (mathAssign) assignedVars.add(mathAssign[1]);
        
        const ifVar = l.match(/^if\s*\(\s*(\w+)\s*(<|>|==|<=|>=|!=)/);
        if (ifVar && !assignedVars.has(ifVar[1])) {
          addWarn(`'${ifVar[1]}' deÄŸiÅŸkeni atanmadan koÅŸulda kullanÄ±lÄ±yor.`);
        }
      }
      
      // Komut dÃ¼zeyi kontroller
      cmds.forEach(c => {
        if (c.type === 'digitalWrite') {
          const mode = pinModes[c.pin];
          if (!mode) addError(`Pin ${c.pin} iÃ§in pinMode(OUTPUT) tanÄ±mlÄ± deÄŸil.`);
          else if (mode !== 'OUTPUT') addError(`Pin ${c.pin} ${mode} olarak ayarlÄ±; digitalWrite iÃ§in OUTPUT gerekli.`);
        }
        if (c.type === 'analogWrite') {
          const mode = pinModes[c.pin];
          if (!mode) addError(`Pin ${c.pin} iÃ§in pinMode(OUTPUT) tanÄ±mlÄ± deÄŸil (analogWrite).`);
          else if (mode !== 'OUTPUT') addError(`Pin ${c.pin} ${mode} olarak ayarlÄ±; analogWrite iÃ§in OUTPUT gerekli.`);
          if (!pwmPins.includes(c.pin)) addError(`analogWrite yalnÄ±zca PWM pinlerinde kullanÄ±labilir (${pwmPins.join(', ')}). Pin ${c.pin} PWM deÄŸil.`);
        }
        if (c.type === 'analogRead') {
          const p = c.pin;
          if (typeof p === 'string' && !p.startsWith('A')) {
            addError(`analogRead iÃ§in 'A0-A5' biÃ§iminde analog pin kullanÄ±lmalÄ±dÄ±r. '${p}' geÃ§ersiz.`);
          }
        }
        if (c.type === 'digitalReadAssign') {
          const mode = pinModes[c.pin];
          if (!mode) addError(`Pin ${c.pin} iÃ§in pinMode(INPUT/INPUT_PULLUP) tanÄ±mlÄ± deÄŸil (digitalRead).`);
          else if (mode === 'OUTPUT') addError(`Pin ${c.pin} OUTPUT iken digitalRead kullanÄ±lamaz.`);
        }
        if (c.type === 'serialPrintln' && !hasSerialBegin) {
          addWarn('Serial.begin() Ã§aÄŸrÄ±sÄ± olmadan Serial.print/println kullanÄ±lÄ±yor.');
        }
      });
      
      if (issues.some(i => i.level === 'error')) {
        const first = issues.find(i => i.level === 'error');
        return { valid: false, message: first.text, issues };
      }
      
      return { valid: true, issues };
    }

    async function getAIFeedback(code, error) {
      const prompt = `Arduino kodumda hata var.\n\nKod:\n${code}\n\nHata:\n${error}\n\nLÃ¼tfen hatanÄ±n nedenini aÃ§Ä±kla ve nasÄ±l dÃ¼zeltebileceÄŸimi kÄ±sa ve anlaÅŸÄ±lÄ±r bir ÅŸekilde sÃ¶yle.`;
      const aiResponse = await callGeminiAI(prompt, "Sen bir Arduino hata ayÄ±klama asistanÄ±sÄ±n. KullanÄ±cÄ±nÄ±n kodundaki hatalarÄ± analiz eder ve Ã¶ÄŸretici, Ã§Ã¶zÃ¼m odaklÄ± geri bildirimler verirsin.");
      
      appState.serialOutput.push({ 
        type: 'info', 
        text: `ğŸ¤– <b>Yapay Zeka Analizi:</b><br>${aiResponse.replace(/\n/g, '<br>')}`,
        timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' }),
        isHtml: true
      });
      renderApp();
    }

    function runSimulation() {
      if (appState.simulationRunning) {
        stopSimulation();
        return;
      }
      
      const validation = validateCode(appState.editorCode);
      if (!validation.valid) {
        showToast(validation.message, 'error');
        appState.serialOutput = (validation.issues || []).map(i => ({ 
          type: i.level === 'error' ? 'error' : 'info', 
          text: i.text,
          timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' })
        }));
        
        // AI yardÄ±mÄ± butonu ekle
        appState.serialOutput.push({
          type: 'info',
          text: '<button onclick="getAIFeedback(appState.editorCode, \'' + validation.message.replace(/'/g, "\\'") + '\')" class="mt-2 px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white text-[10px] rounded transition-colors flex items-center space-x-1"><span>âœ¨ AI YardÄ±mÄ± Al</span></button>',
          isHtml: true
        });

        updateSimulationDisplay();
        return;
      }
      
      appState.simulationRunning = true;
      appState.ledStates = {};
      appState.motorStates = {};
      appState.displayMotorStates = {};
      appState.motorAngles = {};
      appState.servoStates = {};
      appState.serialInitialized = false;
      appState.serialOutput = [];
      appState.userSerialOutput = [];
      appState.lastReadValues = {};
      appState.lastReadTimes = {};
      appState.lastWriteValues = {};
      appState.lastWriteTimes = {};
      appState.logThrottleMs = 300;

      // MantÄ±k kontrolÃ¼ yap ve seri monitÃ¶re ekle
      checkThinking();
      
      // UyarÄ±larÄ± seri monitÃ¶re yansÄ±t
      if (validation.issues && validation.issues.length) {
        validation.issues.forEach(i => { if (i.level !== 'error') appState.serialOutput.push({ type: 'info', text: i.text }); });
      }
      
      try {
        const commands = parseArduinoCode(appState.editorCode);
        
        if (commands.length === 0) {
          logToSerial('Ã‡alÄ±ÅŸtÄ±rÄ±labilir komut bulunamadÄ±!', 'error');
          appState.simulationRunning = false;
          return;
        }
        
        logToSerial('SimÃ¼lasyon baÅŸlatÄ±ldÄ±...', 'info');
        
        const variables = {
          'HIGH': 1,
          'LOW': 0
        };

        commands.filter(c => c.type === 'pinMode').forEach(cmd => {
          if (cmd.mode === 'OUTPUT') {
            appState.ledStates[cmd.pin] = 'LOW';
          }
        });

        // setup() komutlarÄ±nÄ± Ã§Ä±kar
        let setupCommands = [];
        {
          let inSetup = false;
          let depth = 0;
          appState.editorCode.split('\n').forEach(line => {
            if (!inSetup && line.includes('void setup()')) { inSetup = true; }
            else if (inSetup) {
              if (line.includes('{')) depth++;
              if (line.includes('}')) {
                if (depth === 0) { inSetup = false; return; }
                depth--;
              } else {
                setupCommands.push(line);
              }
            }
          });
        }

        const setupParsed = parseArduinoCode(setupCommands.join('\n'));
        setupParsed.forEach(cmd => {
          if (cmd.type === 'serialBegin') {
            appState.serialInitialized = true;
            logToSerial(`Seri haberleÅŸme ${cmd.baud} baud hÄ±zÄ±nda baÅŸlatÄ±ldÄ±.`, 'info');
          } else if (cmd.type === 'digitalWrite') {
            appState.ledStates[cmd.pin] = cmd.value;
          } else if (cmd.type === 'analogWrite') {
            appState.ledStates[cmd.pin] = parseInt(cmd.value) || 0;
          }
        });
        
        let loopCommands = [];
        {
          let inLoop = false;
          let depth = 0;
          appState.editorCode.split('\n').forEach(line => {
            if (!inLoop && line.includes('void loop()')) { inLoop = true; }
            else if (inLoop) {
              if (line.includes('{')) depth++;
              if (line.includes('}')) {
                if (depth === 0) { inLoop = false; return; }
                depth--;
              } else {
                loopCommands.push(line);
              }
            }
          });
        }
        
        let commandIndex = 0;
        const loopText = loopCommands.join('\n');
        let loopParsed = parseArduinoCode(loopText);
        const condWrites = parseConditionalWrites(loopCommands);
        if (condWrites.length > 0) {
          loopParsed = loopParsed.filter(c => c.type !== 'digitalWrite');
          loopParsed = condWrites.concat(loopParsed);
        }
        
        function executeNextCommand() {
          if (!appState.simulationRunning) return;
          
          if (commandIndex >= loopParsed.length) {
            commandIndex = 0;
          }
          
          const cmd = loopParsed[commandIndex];
        if (!cmd) {
          commandIndex = 0;
          appState.simulationInterval = setTimeout(executeNextCommand, 20);
          return;
        }

        if (cmd.type === 'map') {
          let val = cmd.value;
          if (variables[val] !== undefined) val = variables[val];
          else val = parseInt(val) || 0;

          const inMin = parseInt(cmd.inMin);
          const inMax = parseInt(cmd.inMax);
          const outMin = parseInt(cmd.outMin);
          const outMax = parseInt(cmd.outMax);

          const result = Math.round((val - inMin) * (outMax - outMin) / (inMax - inMin) + outMin);
          variables[cmd.varName] = result;
          logToSerial(`Map: ${val} -> ${result}`, 'info');
        } else if (cmd.type === 'math') {
          let expression = cmd.expression || `${cmd.left} ${cmd.op} ${cmd.right}`;
          
          // DeÄŸiÅŸkenleri gerÃ§ek deÄŸerlerle deÄŸiÅŸtir
          for (const [varName, varValue] of Object.entries(variables)) {
            const regex = new RegExp(`\\b${varName}\\b`, 'g');
            expression = expression.replace(regex, varValue);
          }
          
          try {
            // Basit hesaplamalar iÃ§in gÃ¼venli deÄŸerlendirme
            // Sadece sayÄ±lar, operatÃ¶rler ve basit matematiksel fonksiyonlar
            const safeExpr = expression.replace(/[^0-9+\-*/(). ]/g, '');
            const result = Math.round(eval(safeExpr));
            variables[cmd.varName] = result;
            logToSerial(`Math: ${expression} -> ${result}`, 'info');
          } catch (error) {
            logToSerial(`Math HatasÄ±: ${expression}`, 'error');
          }
        } else if (cmd.type === 'digitalWrite') {
            appState.ledStates[cmd.pin] = cmd.value;
            logToSerial(`Pin ${cmd.pin}: ${cmd.value}`, 'info');
          } else if (cmd.type === 'analogWrite') {
            let val = cmd.value;
            if (variables[val] !== undefined) val = variables[val];
            else val = parseInt(val) || 0;
            
            appState.ledStates[cmd.pin] = val; // LED parlaklÄ±ÄŸÄ± iÃ§in kullanacaÄŸÄ±z
            appState.motorStates[cmd.pin] = val;
            logToSerial(`Analog Write Pin ${cmd.pin}: ${val}`, 'info');
          } else if (cmd.type === 'analogRead') {
            const val = appState.potValue;
            variables[cmd.varName] = val;
            logToSerial(`Analog Read Pin ${cmd.pin}: ${val}`, 'info');
          } else if (cmd.type === 'pulseIn') {
            // HC-SR04 Mesafe hesaplama: mesafe = (sÃ¼re * 0.034) / 2
            // Tersine: sÃ¼re = (mesafe * 2) / 0.034
            const duration = Math.round((appState.hcsr04Distance * 2) / 0.034);
            variables[cmd.varName] = duration;
            logToSerial(`PulseIn Pin ${cmd.pin}: ${duration} us`, 'info');
          } else if (cmd.type === 'serialBegin') {
            appState.serialInitialized = true;
            logToSerial(`Seri haberleÅŸme ${cmd.baud} baud hÄ±zÄ±nda baÅŸlatÄ±ldÄ±.`, 'info');
          } else if (cmd.type === 'serialPrintln') {
            // Serial.begin olmadan da Ã§Ä±ktÄ± verelim, gerÃ§ek Arduino'da bÃ¶yle olmayacak ama kullanÄ±cÄ± deneyimi iÃ§in daha iyi
            let val = cmd.value;
            // DeÄŸiÅŸken mi yoksa string mi kontrol et
            if (val.startsWith('"') && val.endsWith('"')) {
              val = val.substring(1, val.length - 1);
            } else {
              // DeÄŸiÅŸkenleri deÄŸerlerle deÄŸiÅŸtir
              for (const [varName, varValue] of Object.entries(variables)) {
                const regex = new RegExp(`\\b${varName}\\b`, 'g');
                val = val.replace(regex, varValue);
              }
              // EÄŸer hala deÄŸiÅŸken varsa deÄŸerini al
              if (variables[val] !== undefined) {
                val = variables[val];
              }
            }
            logToSerial(val, 'success', true);
          } else if (cmd.type === 'servoWrite') {
            appState.servoStates[9] = cmd.angle;
            logToSerial(`Servo AÃ§Ä±: ${cmd.angle}Â°`, 'info');
          } else if (cmd.type === 'digitalReadAssign') {
            const val = appState.buttonStates[cmd.pin] ? 1 : 0;
            variables[cmd.varName] = val;
            const now = Date.now();
            const lastVal = appState.lastReadValues[cmd.pin];
            const lastTime = appState.lastReadTimes[cmd.pin] || 0;
            const throttle = appState.logThrottleMs || 300;
            if (val !== lastVal || now - lastTime > throttle) {
              logToSerial(`Read Pin ${cmd.pin}: ${val ? 'HIGH' : 'LOW'}`, 'info');
              appState.lastReadValues[cmd.pin] = val;
              appState.lastReadTimes[cmd.pin] = now;
            }
          } else if (cmd.type === 'conditionalWrite') {
            let conditionMet = false;
            if (cmd.conditionPin) {
              // Buton koÅŸulu
              const pressed = !!appState.buttonStates[cmd.conditionPin];
              conditionMet = pressed;
            } else if (cmd.varName && variables[cmd.varName] !== undefined) {
              // Mesafe veya diÄŸer deÄŸiÅŸken koÅŸulu
              const varValue = variables[cmd.varName];
              const threshold = cmd.threshold || 0;
              const operator = cmd.operator || '==';
              
              switch (operator) {
                case '<': conditionMet = varValue < threshold; break;
                case '>': conditionMet = varValue > threshold; break;
                case '==': conditionMet = varValue == threshold; break;
                case '<=': conditionMet = varValue <= threshold; break;
                case '>=': conditionMet = varValue >= threshold; break;
                case '!=': conditionMet = varValue != threshold; break;
              }
            }
            
            const value = conditionMet ? cmd.trueValue : cmd.falseValue;
            const prev = appState.ledStates[cmd.targetPin];
            appState.ledStates[cmd.targetPin] = value;
            const now = Date.now();
            const lastWVal = appState.lastWriteValues[cmd.targetPin];
            const lastWTime = appState.lastWriteTimes[cmd.targetPin] || 0;
            const throttle = appState.logThrottleMs || 300;
            if (value !== lastWVal || now - lastWTime > throttle) {
              logToSerial(`${cmd.varName || 'Buton'} ${cmd.operator || '=='} ${cmd.threshold || (cmd.conditionPin ? 'HIGH' : 'LOW')}: ${conditionMet} - Pin ${cmd.targetPin}: ${value}`, 'info');
              appState.lastWriteValues[cmd.targetPin] = value;
              appState.lastWriteTimes[cmd.targetPin] = now;
            }
          }
          
          commandIndex++;
          
          const nextCmd = loopParsed[commandIndex];
          const delay = (nextCmd && nextCmd.type === 'delay') ? nextCmd.ms : 50;
          
          if (nextCmd && nextCmd.type === 'delay') {
            commandIndex++;
          }
          
          appState.simulationInterval = setTimeout(executeNextCommand, delay);
        }
        
        executeNextCommand();
        
      } catch (error) {
        logToSerial('Hata: ' + error.message, 'error');
        appState.simulationRunning = false;
      }
      
      updateSimulationDisplay();
      const runBtn = document.querySelector('button[onclick="runSimulation()"]');
      if (runBtn) {
        runBtn.className = `px-4 py-1 rounded-lg font-medium bg-red-500 hover:bg-red-600 text-white transition-all text-sm`;
        runBtn.textContent = 'Durdur';
      }
    }

    function clearSerial() {
      appState.serialOutput = [];
      updateSimulationDisplay();
    }

    function resetSimulation() {
      stopSimulation();
      appState.ledStates = {};
      appState.motorStates = {};
      appState.servoStates = {};
      appState.serialOutput = [];
      updateSimulationDisplay();
      showToast('SimÃ¼lasyon sÄ±fÄ±rlandÄ±', 'info');
    }

    function stopSimulation() {
      appState.simulationRunning = false;
      if (appState.simulationInterval) {
        clearTimeout(appState.simulationInterval);
        appState.simulationInterval = null;
      }
      appState.ledStates = {};
      appState.motorStates = {};
      appState.displayMotorStates = {};
      appState.motorAngles = {};
      appState.servoStates = {};
      appState.serialOutput.push({ type: 'info', text: 'SimÃ¼lasyon durduruldu.' });
      
      renderApp();
    }

    function toggleButton(pin) {
      appState.buttonStates[pin] = !appState.buttonStates[pin];
      if (!appState.lastReadValues) appState.lastReadValues = {};
      appState.lastReadValues[pin] = appState.buttonStates[pin] ? 1 : 0;
      logToSerial(`Buton ${pin}: ${appState.buttonStates[pin] ? 'HIGH' : 'LOW'}`, 'info');
      updateSimulationDisplay();
    }

    // ==================== ALGORITMA TASARIMCISI ====================
    function addAlgoNode(type) {
      const nodeTypes = {
        start: { label: 'BAÅLA-DUR', color: 'from-green-500 to-green-600', shape: 'shape-capsule' },
        process: { label: 'Ä°ÅLEM', color: 'from-blue-500 to-blue-600', shape: 'shape-rectangle' },
        decision: { label: 'KARÅILAÅTIRMA', color: 'from-orange-500 to-orange-600', shape: 'shape-diamond' },
        input: { label: 'BÄ°LGÄ°-VERÄ° GÄ°RÄ°ÅÄ°', color: 'from-purple-500 to-purple-600', shape: 'shape-parallelogram' },
        output: { label: 'BÄ°LGÄ°-VERÄ° YAZMA', color: 'from-indigo-500 to-indigo-600', shape: 'shape-document' },
        end: { label: 'BAÅLA-DUR', color: 'from-red-500 to-red-600', shape: 'shape-capsule' }
      };

      const newNode = {
        id: Date.now(),
        type: type,
        text: nodeTypes[type].label,
        x: 100,
        y: 100 + (appState.flowchartNodes.length * 80),
        ...nodeTypes[type]
      };
      
      appState.flowchartNodes.push(newNode);
      renderApp();
    }

    function removeAlgoNode(id) {
      appState.flowchartNodes = appState.flowchartNodes.filter(n => n.id !== id);
      appState.flowchartConnections = appState.flowchartConnections.filter(c => c.from !== id && c.to !== id);
      renderApp();
    }

    function startAlgoConnection(id, point = 'bottom') {
      appState.algoConnectingFrom = { id, point };
      renderApp();
    }

    function endAlgoConnection(id) {
      if (appState.algoConnectingFrom && appState.algoConnectingFrom.id !== id) {
        // AynÄ± baÄŸlantÄ±dan varsa ekleme
        const exists = appState.flowchartConnections.find(c => 
          c.from === appState.algoConnectingFrom.id && 
          c.fromPoint === appState.algoConnectingFrom.point &&
          c.to === id
        );
        if (!exists) {
          appState.flowchartConnections.push({
            id: Date.now(),
            from: appState.algoConnectingFrom.id,
            fromPoint: appState.algoConnectingFrom.point,
            to: id
          });
        }
      }
      appState.algoConnectingFrom = null;
      renderApp();
    }

    function removeAlgoConnection(id) {
      appState.flowchartConnections = appState.flowchartConnections.filter(c => c.id !== id);
      renderApp();
    }

    function validateAlgoFlow() {
      const nodes = appState.flowchartNodes;
      const conns = appState.flowchartConnections;
      const issues = [];

      if (nodes.length === 0) return { valid: false, issues: ['HenÃ¼z hiÃ§ blok eklemediniz.'] };

      const hasStart = nodes.some(n => n.type === 'start' && n.text.toLowerCase().includes('baÅŸla'));
      const hasEnd = nodes.some(n => n.type === 'start' && (n.text.toLowerCase().includes('dur') || n.text.toLowerCase().includes('bitir') || n.text.toLowerCase().includes('son')));

      if (!hasStart) issues.push('Algoritma "BAÅLA" bloÄŸu ile baÅŸlamalÄ±dÄ±r.');
      if (!hasEnd) issues.push('Algoritma "DUR" veya "BÄ°TÄ°R" bloÄŸu ile sonlanmalÄ±dÄ±r.');

      nodes.forEach(node => {
        const outConns = conns.filter(c => c.from === node.id);
        const inConns = conns.filter(c => c.to === node.id);

        if (node.type !== 'start' && inConns.length === 0) {
          issues.push(`"${node.text}" bloÄŸuna gelen bir baÄŸlantÄ± yok.`);
        }

        if (node.type === 'decision') {
          const hasYes = outConns.some(c => c.fromPoint === 'bottom');
          const hasNo = outConns.some(c => c.fromPoint === 'right');
          if (!hasYes || !hasNo) {
            issues.push(`"${node.text}" karar bloÄŸunun hem EVET hem de HAYIR Ã§Ä±kÄ±ÅŸÄ± olmalÄ±dÄ±r.`);
          }
        } else if (!node.text.toLowerCase().includes('dur') && !node.text.toLowerCase().includes('bitir') && !node.text.toLowerCase().includes('son')) {
          if (outConns.length === 0) {
            issues.push(`"${node.text}" bloÄŸundan sonra bir adÄ±m gelmelidir.`);
          }
        }
      });

      return {
        valid: issues.length === 0,
        issues
      };
    }

    function updateAlgoNodeText(id, text) {
      const node = appState.flowchartNodes.find(n => n.id === id);
      if (node) node.text = text;
      // renderApp Ã§aÄŸÄ±rmÄ±yoruz ki input odaÄŸÄ±nÄ± kaybetmesin
    }

    function renderAlgoBuilder() {
      return `
        ${renderNavbar()}
        <div class="h-[calc(100vh-4rem)] flex overflow-hidden">
          <!-- Sol Panel: Åekiller -->
          <div class="w-64 bg-slate-800 border-r border-slate-700 p-6 space-y-6 overflow-y-auto">
            <h2 class="text-xl font-bold text-white mb-4">Åekiller</h2>
            <div class="space-y-4">
              <button onclick="addAlgoNode('start')" class="w-full p-4 bg-gradient-to-r from-green-500 to-green-600 shape-capsule text-[10px] font-bold hover:scale-105 transition-all shadow-lg">BAÅLA-DUR</button>
              <button onclick="addAlgoNode('process')" class="w-full p-4 bg-gradient-to-r from-blue-500 to-blue-600 shape-rectangle text-[10px] font-bold hover:scale-105 transition-all shadow-lg">Ä°ÅLEM</button>
              <button onclick="addAlgoNode('decision')" class="w-full p-4 bg-gradient-to-r from-orange-500 to-orange-600 shape-diamond text-[8px] font-bold hover:scale-105 transition-all shadow-lg">KARÅILAÅTIRMA</button>
              <button onclick="addAlgoNode('input')" class="w-full p-4 bg-gradient-to-r from-purple-500 to-purple-600 shape-parallelogram text-[8px] font-bold hover:scale-105 transition-all shadow-lg"><span class="block transform skew-x-[15deg]">BÄ°LGÄ°-VERÄ° GÄ°RÄ°ÅÄ°</span></button>
              <button onclick="addAlgoNode('output')" class="w-full p-4 bg-gradient-to-r from-indigo-500 to-indigo-600 shape-document text-[8px] font-bold hover:scale-105 transition-all shadow-lg">BÄ°LGÄ°-VERÄ° YAZMA</button>
            </div>
            
            <div class="pt-8 border-t border-slate-700">
              <h3 class="text-sm font-bold text-slate-400 mb-4 uppercase tracking-wider">BaÄŸlantÄ±lar</h3>
              <div class="space-y-2 max-h-40 overflow-y-auto pr-2 custom-scrollbar">
                ${appState.flowchartConnections.length === 0 ? '<p class="text-xs text-slate-500 italic">HenÃ¼z baÄŸlantÄ± yok</p>' : ''}
                ${appState.flowchartConnections.map(conn => {
                  const from = appState.flowchartNodes.find(n => n.id === conn.from);
                  const to = appState.flowchartNodes.find(n => n.id === conn.to);
                  const branchInfo = from?.type === 'decision' ? ` (${conn.fromPoint === 'right' ? 'HayÄ±r' : 'Evet'})` : '';
                  return `
                    <div class="flex items-center justify-between bg-slate-700/50 p-2 rounded text-[10px] text-slate-300 group">
                      <span class="truncate w-32" title="${from?.text || '...'} ${branchInfo} â†’ ${to?.text || '...'}">
                        ${from?.text || '...'} ${branchInfo} â†’ ${to?.text || '...'}
                      </span>
                      <button onclick="removeAlgoConnection(${conn.id})" class="text-red-400 opacity-0 group-hover:opacity-100 transition-opacity">âœ•</button>
                    </div>
                  `;
                }).join('')}
              </div>
            </div>

            <div class="pt-8 border-t border-slate-700">
              <h3 class="text-sm font-bold text-slate-400 mb-4 uppercase tracking-wider">YardÄ±m</h3>
              <ul class="text-xs text-slate-500 space-y-2">
                <li>â€¢ Åekilleri sÃ¼rÃ¼kleyerek yerlerini deÄŸiÅŸtirebilirsiniz.</li>
                <li>â€¢ Ãœzerlerine tÄ±klayarak metni gÃ¼ncelleyebilirsiniz.</li>
                <li>â€¢ SaÄŸ Ã¼stteki 'X' ile silebilirsiniz.</li>
              </ul>
            </div>
          </div>

          <!-- Ana Panel: Ã‡alÄ±ÅŸma AlanÄ± -->
          <div class="flex-1 bg-slate-900 relative overflow-hidden" id="algoCanvas" 
               onmousemove="if(appState.algoDraggingNode) { 
                 const node = appState.flowchartNodes.find(n => n.id === appState.algoDraggingNode);
                 if(node) {
                   node.x = event.clientX - 320; 
                   node.y = event.clientY - 100;
                   const el = document.getElementById('node-' + node.id);
                   if(el) { el.style.left = node.x + 'px'; el.style.top = node.y + 'px'; }
                   // BaÄŸlantÄ±larÄ± gÃ¼ncelle
                   renderConnectionsSVG();
                 }
               }"
               onmouseup="appState.algoDraggingNode = null;">
            
            <!-- Izgara ArkaplanÄ± -->
            <div class="absolute inset-0 opacity-10 pointer-events-none" 
                 style="background-image: radial-gradient(#64748b 1px, transparent 1px); background-size: 30px 30px;"></div>
            
            <!-- SVG BaÄŸlantÄ± KatmanÄ± -->
            <svg id="algoSVG" class="absolute inset-0 w-full h-full pointer-events-none" style="z-index: 10;">
              <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
                </marker>
              </defs>
              <g id="connectionsGroup"></g>
            </svg>

            <div class="absolute top-6 left-6 z-10">
              <h1 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">Algoritma TasarÄ±mcÄ±sÄ±</h1>
              <p class="text-slate-500 text-sm">MantÄ±ksal adÄ±mlarÄ±nÄ±zÄ± gÃ¶rselleÅŸtirin</p>
            </div>

            <div class="absolute top-6 right-6 z-10 flex space-x-3">
              <button onclick="
                const v = validateAlgoFlow(); 
                if(v.valid) {
                  showToast('Algoritma akÄ±ÅŸÄ± doÄŸru gÃ¶rÃ¼nÃ¼yor!', 'success');
                } else {
                  showToast(v.issues[0], 'warning');
                }
              " class="px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-emerald-500/20 hover:bg-emerald-700 transition-all">Kontrol Et</button>
              <button onclick="appState.flowchartNodes = []; appState.flowchartConnections = []; renderApp();" class="px-4 py-2 bg-slate-800 text-slate-300 rounded-lg text-sm border border-slate-700 hover:bg-slate-700 transition-all">Temizle</button>
              <button onclick="window.print()" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-blue-500/20 hover:bg-blue-700 transition-all">Kaydet / YazdÄ±r</button>
            </div>

            <!-- DÃ¼ÄŸÃ¼mler -->
            ${appState.flowchartNodes.map(node => {
              const isConnecting = appState.algoConnectingFrom?.id === node.id;
              const isConnectingBottom = isConnecting && appState.algoConnectingFrom?.point === 'bottom';
              const isConnectingRight = isConnecting && appState.algoConnectingFrom?.point === 'right';
              
              return `
              <div 
                id="node-${node.id}"
                class="absolute cursor-move group transition-shadow hover:shadow-2xl"
                style="left: ${node.x}px; top: ${node.y}px; z-index: 20;"
                onmousedown="appState.algoDraggingNode = ${node.id}; event.stopPropagation();"
              >
                <!-- BaÄŸlantÄ± NoktalarÄ± -->
                <!-- Ãœst Nokta: Buraya BaÄŸla (Hedef) -->
                <div 
                  onclick="event.stopPropagation(); endAlgoConnection(${node.id})"
                  class="absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-slate-700 border-2 border-slate-600 rounded-full cursor-crosshair hover:bg-green-500 hover:border-green-400 transition-all z-30 flex items-center justify-center"
                  title="Buraya BaÄŸla"
                >
                  <div class="w-1 h-1 bg-white rounded-full"></div>
                </div>

                <!-- Alt Nokta: BaÄŸlantÄ± BaÅŸlat (Kaynak - Evet) -->
                <div 
                  onclick="event.stopPropagation(); startAlgoConnection(${node.id}, 'bottom')"
                  class="absolute -bottom-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-slate-700 border-2 border-slate-600 rounded-full cursor-crosshair hover:bg-blue-500 hover:border-blue-400 transition-all z-30 flex items-center justify-center ${isConnectingBottom ? 'bg-blue-500 border-blue-400 animate-pulse' : ''}"
                  title="${node.type === 'decision' ? 'Evet' : 'BaÄŸlantÄ± BaÅŸlat'}"
                >
                  <div class="w-1 h-1 bg-white rounded-full"></div>
                  ${node.type === 'decision' ? '<span class="absolute top-4 text-[10px] text-green-400 font-bold">EVET</span>' : ''}
                </div>

                <!-- SaÄŸ Nokta: Karar BloÄŸu iÃ§in (HayÄ±r) -->
                ${node.type === 'decision' ? `
                  <div 
                    onclick="event.stopPropagation(); startAlgoConnection(${node.id}, 'right')"
                    class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-slate-700 border-2 border-slate-600 rounded-full cursor-crosshair hover:bg-orange-500 hover:border-orange-400 transition-all z-30 flex items-center justify-center ${isConnectingRight ? 'bg-orange-500 border-orange-400 animate-pulse' : ''}"
                    title="HayÄ±r"
                  >
                    <div class="w-1 h-1 bg-white rounded-full"></div>
                    <span class="absolute left-5 text-[10px] text-red-400 font-bold">HAYIR</span>
                  </div>
                ` : ''}

                <div class="relative w-40 h-16 flex items-center justify-center">
                  <div class="absolute inset-0 bg-gradient-to-br ${node.color} ${node.shape} shadow-xl border border-white/20"></div>
                  
                  <!-- Metin AlanÄ± -->
                  <input 
                    type="text" 
                    value="${node.text}" 
                    oninput="updateAlgoNodeText(${node.id}, this.value)"
                    class="relative z-10 w-32 bg-transparent text-center text-white font-bold text-xs focus:outline-none placeholder-white/50"
                    placeholder="AdÄ±m yaz..."
                    onmousedown="event.stopPropagation();"
                  />

                  <!-- Silme Butonu -->
                  <button 
                    onclick="removeAlgoNode(${node.id})"
                    class="absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full text-[10px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-20"
                  >âœ•</button>
                </div>
              </div>
            `}).join('')}
          </div>
        </div>
      `;
    }

    function renderConnectionsSVG() {
      const g = document.getElementById('connectionsGroup');
      if (!g) return;
      
      let html = '';
      appState.flowchartConnections.forEach(conn => {
        const fromNode = appState.flowchartNodes.find(n => n.id === conn.from);
        const toNode = appState.flowchartNodes.find(n => n.id === conn.to);
        
        if (fromNode && toNode) {
          let x1 = fromNode.x + 80; // 160/2
          let y1 = fromNode.y + 64; // Alt nokta varsayÄ±lan
          
          if (conn.fromPoint === 'right') {
            x1 = fromNode.x + 160;
            y1 = fromNode.y + 32;
          }
          
          const x2 = toNode.x + 80;
          const y2 = toNode.y;       // Ãœst nokta
          
          // YumuÅŸak kavisli Ã§izgi (BÃ©zier)
          const midY = (y1 + y2) / 2;
          const path = `M ${x1} ${y1} C ${x1} ${midY}, ${x2} ${midY}, ${x2} ${y2}`;
          
          html += `
            <g class="connection-group" onclick="event.stopPropagation();">
              <path d="${path}" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead)" class="hover:stroke-red-500 transition-colors cursor-pointer" onclick="removeAlgoConnection(${conn.id})" />
            </g>
          `;
        }
      });
      g.innerHTML = html;
    }

    // ==================== RENDER FUNCTIONS ====================
    function toggleTheme() {
      appState.theme = appState.theme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', appState.theme);
      localStorage.setItem('ardumind_theme', appState.theme);
      renderApp();
    }

    function renderNavbar() {
      const navLinks = [
        { label: 'KeÅŸfet', page: 'home' },
        { label: 'Elemanlar', page: 'components' },
        { label: 'DokÃ¼mantasyon', page: 'docs' },
        { label: 'Videolar', page: 'videos' },
        { label: 'Algoritma', page: 'algo-builder' },
        { label: 'Ã–ÄŸrenme Yolu', page: 'path' },
        { label: 'Arduino', page: 'arduino' },
        { label: 'Testler', page: 'quiz' },
        { label: 'EÄŸitim Seti', page: 'edu-kit' },
        { label: 'HakkÄ±nda', page: 'about' }
      ];

      if (appState.currentUser) {
        navLinks.push({ label: 'EÄŸitimim', page: 'dashboard' });
        navLinks.push({ label: 'EditÃ¶r', page: 'editor' });
      }

      return `
        <nav class="sticky top-0 z-50 backdrop-blur-sm bg-slate-800 bg-opacity-90 border-b border-slate-700">
          <div class="max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
              <!-- Sol: Logo ve Ä°sim -->
              <div class="flex items-center space-x-2 cursor-pointer flex-shrink-0" onclick="navigateTo('home')">
                <img src="images/logo.png" alt="ArduMind" class="w-9 h-9 rounded-xl object-contain shadow-md" />
                <span class="text-xl font-bold tracking-tight">ArduMind</span>
              </div>

              <!-- Orta: Navigasyon Sekmeleri (MasaÃ¼stÃ¼) -->
              <div class="hidden xl:flex flex-1 justify-center items-center px-4">
                <div class="flex items-center space-x-5 text-sm font-medium">
                  ${navLinks.map(link => `
                    <a href="#" onclick="navigateTo('${link.page}')" class="text-slate-300 hover:text-white transition-colors ${appState.currentPage === link.page ? 'text-blue-400 font-bold' : ''}">${link.label}</a>
                  `).join('')}
                </div>
              </div>

              <!-- SaÄŸ: Tema, Profil ve Mobil MenÃ¼ Butonu -->
              <div class="flex items-center space-x-4 flex-shrink-0">
                <!-- Tema Toggle -->
                <button onclick="toggleTheme()" class="p-2 rounded-lg bg-slate-700/50 border border-slate-600/50 text-slate-300 hover:text-yellow-400 transition-all">
                  ${appState.theme === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸'}
                </button>

                <!-- Mobil MenÃ¼ Butonu -->
                <button onclick="appState.mobileMenuOpen = !appState.mobileMenuOpen; renderApp();" class="xl:hidden p-2 rounded-lg bg-slate-700/50 border border-slate-600/50 text-slate-300">
                  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${appState.mobileMenuOpen ? 'M6 18L18 6M6 6l12 12' : 'M4 6h16M4 12h16M4 18h16'}" />
                  </svg>
                </button>

                <div class="hidden sm:flex items-center space-x-4">
                  ${appState.currentUser ? `
                    <button onclick="navigateTo('profile')" class="flex items-center space-x-2 text-slate-200 hover:text-white transition-colors">
                      <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-xs font-bold shadow-lg">
                        ${appState.currentUser.name.charAt(0).toUpperCase()}
                      </div>
                      <span class="text-sm font-semibold">${appState.currentUser.name.split(' ')[0]}</span>
                    </button>
                    <button onclick="logout()" class="px-4 py-1.5 rounded-lg font-bold bg-slate-700/50 border border-slate-600/50 text-slate-300 hover:bg-red-500/20 hover:text-red-400 hover:border-red-500/50 transition-all text-xs">
                      Ã‡Ä±kÄ±ÅŸ
                    </button>
                  ` : `
                    <button onclick="appState.showAuthModal = true; appState.authMode = 'login'; renderApp();" class="px-5 py-2 rounded-full font-bold bg-blue-600 text-white hover:bg-blue-700 hover:scale-105 hover:shadow-xl transition-all text-sm">
                      GiriÅŸ Yap
                    </button>
                  `}
                </div>
              </div>
            </div>
          </div>

          <!-- Mobil MenÃ¼ (Drawer) -->
          <div class="xl:hidden transition-all duration-300 ease-in-out overflow-hidden ${appState.mobileMenuOpen ? 'max-h-[800px] border-t border-slate-700 opacity-100' : 'max-h-0 opacity-0'}">
            <div class="px-4 pt-2 pb-6 space-y-1 bg-slate-800">
              ${navLinks.map(link => `
                <a href="#" onclick="appState.mobileMenuOpen = false; navigateTo('${link.page}')" class="block px-4 py-3 rounded-xl text-base font-medium ${appState.currentPage === link.page ? 'bg-blue-600/20 text-blue-400 border border-blue-500/30' : 'text-slate-300 hover:bg-slate-700 hover:text-white'}">
                  ${link.label}
                </a>
              `).join('')}
              
              <div class="pt-4 mt-4 border-t border-slate-700 sm:hidden">
                ${appState.currentUser ? `
                  <div class="flex items-center px-4 py-3 space-x-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-sm font-bold shadow-lg">
                      ${appState.currentUser.name.charAt(0).toUpperCase()}
                    </div>
                    <div>
                      <div class="text-base font-medium text-white">${appState.currentUser.name}</div>
                      <div class="text-sm font-medium text-slate-400">${appState.currentUser.email}</div>
                    </div>
                  </div>
                  <div class="grid grid-cols-2 gap-2 mt-3 px-2">
                    <button onclick="appState.mobileMenuOpen = false; navigateTo('profile')" class="px-4 py-2 rounded-xl bg-slate-700 text-slate-200 text-sm font-bold">Profil</button>
                    <button onclick="appState.mobileMenuOpen = false; logout()" class="px-4 py-2 rounded-xl bg-red-500/20 text-red-400 border border-red-500/30 text-sm font-bold">Ã‡Ä±kÄ±ÅŸ Yap</button>
                  </div>
                ` : `
                  <div class="px-2">
                    <button onclick="appState.mobileMenuOpen = false; appState.showAuthModal = true; appState.authMode = 'login'; renderApp();" class="w-full px-4 py-3 rounded-xl bg-blue-600 text-white font-bold text-center">GiriÅŸ Yap</button>
                  </div>
                `}
              </div>
            </div>
          </div>
        </nav>
      `;
    }

    function renderIntro() {
      return `
        <div id="intro-container" class="fixed inset-0 z-[60] flex items-center justify-center bg-[#020617] overflow-hidden">
          <canvas id="matrix-canvas" class="absolute inset-0 opacity-20"></canvas>
          <div id="three-canvas-container" class="absolute inset-0"></div>
          <div class="relative z-10 text-center pointer-events-none">
            <h1 id="intro-title" class="text-5xl sm:text-7xl md:text-8xl font-black tracking-tighter text-white opacity-0 scale-90">
              ArduMind
            </h1>
            <p id="intro-subtitle" class="mt-4 text-slate-400 text-sm sm:text-base tracking-[0.5em] uppercase opacity-0 translate-y-4">
              Arduino StÃ¼dyo & SimÃ¼lasyon
            </p>
          </div>
          <!-- Skip button for convenience -->
          <button onclick="skipIntro()" class="absolute bottom-10 right-10 z-20 px-4 py-2 rounded-full border border-white/10 bg-white/5 text-white/40 text-xs hover:bg-white/10 transition-all">
            ATLA
          </button>
        </div>
      `;
    }

    function skipIntro() {
      appState.showIntro = false;
      renderApp();
    }

    function init3DIntro() {
      const container = document.getElementById('three-canvas-container');
      if (!container) return;

      // Matrix Effect
      const matrixCanvas = document.getElementById('matrix-canvas');
      const ctx = matrixCanvas.getContext('2d');
      let width = matrixCanvas.width = window.innerWidth;
      let height = matrixCanvas.height = window.innerHeight;
      const characters = '01ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      const fontSize = 14;
      const columns = width / fontSize;
      const drops = [];
      for (let x = 0; x < columns; x++) drops[x] = 1;

      function drawMatrix() {
        ctx.fillStyle = 'rgba(2, 6, 23, 0.05)';
        ctx.fillRect(0, 0, width, height);
        ctx.fillStyle = '#3b82f6';
        ctx.font = fontSize + 'px monospace';
        for (let i = 0; i < drops.length; i++) {
          const text = characters.charAt(Math.floor(Math.random() * characters.length));
          ctx.fillText(text, i * fontSize, drops[i] * fontSize);
          if (drops[i] * fontSize > height && Math.random() > 0.975) drops[i] = 0;
          drops[i]++;
        }
      }

      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.z = 5;

      const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      container.appendChild(renderer.domElement);

      // Particles
      const particlesGeometry = new THREE.BufferGeometry();
      const particlesCount = 3000;
      const posArray = new Float32Array(particlesCount * 3);

      for (let i = 0; i < particlesCount * 3; i++) {
          posArray[i] = (Math.random() - 0.5) * 15;
      }

      particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
      const particlesMaterial = new THREE.PointsMaterial({
          size: 0.005,
          color: '#3b82f6',
          transparent: true,
          opacity: 0.6,
          blending: THREE.AdditiveBlending
      });

      const particles = new THREE.Points(particlesGeometry, particlesMaterial);
      scene.add(particles);

      // Arduino Model Group
      const arduinoModel = new THREE.Group();
      
      // PCB (Main Board)
      const pcbGeometry = new THREE.BoxGeometry(4, 0.15, 2.8);
      const pcbMaterial = new THREE.MeshStandardMaterial({ 
          color: 0x1e40af, // Arduino Blue
          roughness: 0.2,
          metalness: 0.5
      });
      const pcb = new THREE.Mesh(pcbGeometry, pcbMaterial);
      arduinoModel.add(pcb);

      // ATMega Chip
      const chipGeometry = new THREE.BoxGeometry(0.8, 0.1, 0.8);
      const chipMaterial = new THREE.MeshStandardMaterial({ color: 0x111111, roughness: 0.5 });
      const chip = new THREE.Mesh(chipGeometry, chipMaterial);
      chip.position.set(0.8, 0.1, 0);
      arduinoModel.add(chip);

      // USB Port
      const usbGeometry = new THREE.BoxGeometry(1, 0.6, 0.8);
      const usbMaterial = new THREE.MeshStandardMaterial({ color: 0x94a3b8, metalness: 0.8, roughness: 0.1 });
      const usb = new THREE.Mesh(usbGeometry, usbMaterial);
      usb.position.set(-1.6, 0.3, 0.8);
      arduinoModel.add(usb);

      // Power Jack
      const jackGeometry = new THREE.BoxGeometry(1, 0.6, 0.8);
      const jackMaterial = new THREE.MeshStandardMaterial({ color: 0x0f172a, roughness: 0.8 });
      const jack = new THREE.Mesh(jackGeometry, jackMaterial);
      jack.position.set(-1.6, 0.3, -0.8);
      arduinoModel.add(jack);

      // Pins / Headers
      const createHeader = (x, z, w, d) => {
        const hGeom = new THREE.BoxGeometry(w, 0.3, d);
        const hMat = new THREE.MeshStandardMaterial({ color: 0x1e293b });
        const h = new THREE.Mesh(hGeom, hMat);
        h.position.set(x, 0.2, z);
        return h;
      };

      arduinoModel.add(createHeader(0.5, -1.2, 2.5, 0.2)); // Top pins
      arduinoModel.add(createHeader(0.5, 1.2, 2.5, 0.2));  // Bottom pins
      arduinoModel.add(createHeader(1.6, -1.2, 0.4, 0.2)); // Extra pins

      arduinoModel.scale.set(0, 0, 0);
      arduinoModel.rotation.x = 0.5;
      arduinoModel.rotation.y = -0.5;
      scene.add(arduinoModel);

      // Lights
      const pointLight1 = new THREE.PointLight(0x60a5fa, 5);
      pointLight1.position.set(5, 5, 5);
      scene.add(pointLight1);

      const pointLight2 = new THREE.PointLight(0xa855f7, 3);
      pointLight2.position.set(-5, 3, 2);
      scene.add(pointLight2);

      scene.add(new THREE.AmbientLight(0xffffff, 0.4));

      // Animation Timeline
      const tl = gsap.timeline({
        onComplete: () => {
          setTimeout(() => {
            gsap.to('#intro-container', {
              opacity: 0,
              duration: 1,
              ease: 'power2.inOut',
              onComplete: () => {
                appState.showIntro = false;
                renderApp();
              }
            });
          }, 2000);
        }
      });

      // Intro Sequence
      tl.to(arduinoModel.scale, { x: 1, y: 1, z: 1, duration: 2, ease: 'expo.out' });
      tl.to('#intro-title', { opacity: 1, scale: 1, duration: 1.5, ease: 'back.out(1.7)' }, '-=1.5');
      tl.to('#intro-subtitle', { opacity: 1, y: 0, duration: 1, ease: 'power2.out' }, '-=0.8');
      
      // Infinite rotations
      gsap.to(arduinoModel.rotation, { 
        y: Math.PI * 2 + arduinoModel.rotation.y, 
        duration: 15, 
        repeat: -1, 
        ease: 'none' 
      });
      gsap.to(arduinoModel.rotation, { 
        x: Math.PI * 0.2, 
        duration: 4, 
        repeat: -1, 
        yoyo: true, 
        ease: 'sine.inOut' 
      });
      gsap.to(particles.rotation, { y: -Math.PI * 2, duration: 50, repeat: -1, ease: 'none' });

      function animate() {
          if (!appState.showIntro) return;
          requestAnimationFrame(animate);
          drawMatrix();
          renderer.render(scene, camera);
      }
      
      animate();

      window.addEventListener('resize', () => {
          width = matrixCanvas.width = window.innerWidth;
          height = matrixCanvas.height = window.innerHeight;
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
      });
    }

    function renderVideos() {
      const topics = Array.from(new Set(videoLessons.map(v => v.topic)));
      const list = [...videoLessons].sort((a, b) => a.step - b.step);
      const filteredList = appState.currentVideoFilter ? list.filter(v => v.topic === appState.currentVideoFilter) : list;
      
      return `
        ${renderNavbar()}
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <div class="mb-8">
            <h1 class="text-4xl font-bold mb-2">Videolu EÄŸitim YolculuÄŸu</h1>
            <p class="text-slate-400">EÄŸitim mÃ¼fredatÄ±na gÃ¶re sÄ±ralanmÄ±ÅŸ adÄ±m adÄ±m video dersler</p>
          </div>
          
          <div class="flex flex-wrap gap-2 mb-8 overflow-x-auto pb-2">
            <button onclick="appState.currentVideoFilter=''; renderApp();" class="px-4 py-2 rounded-full text-sm whitespace-nowrap ${appState.currentVideoFilter === '' ? 'bg-blue-600 text-white' : 'bg-slate-700 text-slate-200 hover:bg-slate-600 transition-colors'}">TÃ¼mÃ¼</button>
            ${topics.map(t => `
              <button onclick="appState.currentVideoFilter='${t}'; renderApp();" class="px-4 py-2 rounded-full text-sm whitespace-nowrap ${appState.currentVideoFilter === t ? 'bg-blue-600 text-white' : 'bg-slate-700 text-slate-200 hover:bg-slate-600 transition-colors'}">${t}</button>
            `).join('')}
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            ${filteredList.map(v => `
              <div class="bg-slate-800 rounded-2xl overflow-hidden hover:scale-[1.02] transition-all border border-slate-700/50 hover:border-blue-500/50 group">
                <div class="relative bg-gradient-to-r from-blue-600 to-purple-600 h-40 flex items-center justify-center overflow-hidden">
                  <!-- Step Badge -->
                  <div class="absolute top-4 left-4 bg-black/40 backdrop-blur-md text-white text-xs font-bold px-3 py-1.5 rounded-full border border-white/20 z-10">
                    ADIM ${v.step}
                  </div>
                  
                  <svg class="w-16 h-16 text-white/90 group-hover:scale-110 transition-transform duration-500 z-10" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M8 5v14l11-7z"/>
                  </svg>
                  
                  <!-- Abstract Background Pattern -->
                  <div class="absolute inset-0 opacity-20" style="background-image: radial-gradient(circle at 2px 2px, white 1px, transparent 0); background-size: 20px 20px;"></div>
                </div>
                
                <div class="p-6">
                  <div class="flex items-start justify-between mb-4">
                    <div>
                      <span class="text-[10px] font-bold text-blue-400 uppercase tracking-widest mb-1 block">${v.topic}</span>
                      <h3 class="font-bold text-lg text-slate-100 leading-tight">${v.title}</h3>
                    </div>
                    <span class="text-[10px] bg-slate-700 text-slate-300 px-2 py-1 rounded-md font-medium">${v.duration}</span>
                  </div>
                  
                  <div class="flex items-center justify-between mt-6">
                    <div class="flex -space-x-2">
                      <div class="w-6 h-6 rounded-full bg-slate-700 border border-slate-600 flex items-center justify-center text-[10px]">ğŸ“</div>
                      <div class="w-6 h-6 rounded-full bg-slate-700 border border-slate-600 flex items-center justify-center text-[10px]">ğŸ¤–</div>
                    </div>
                    <a href="${v.url}" target="_blank" rel="noopener" class="flex items-center space-x-2 px-5 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-xl text-sm font-bold transition-all shadow-lg shadow-blue-900/20">
                      <span>Dersi Ä°zle</span>
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                      </svg>
                    </a>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    function renderLearningPath() {
      return `
        ${renderNavbar()}
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
          <div class="text-center mb-16">
            <h1 class="text-5xl font-extrabold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">
              Ã–ÄŸrenme YolculuÄŸu
            </h1>
            <p class="text-xl text-slate-400 max-w-2xl mx-auto">
              SÄ±fÄ±rdan baÅŸlayarak uzmanlÄ±ÄŸa giden yolda adÄ±m adÄ±m ilerle. Her adÄ±mda teori, uygulama ve gÃ¶rsel destek seni bekliyor.
            </p>
          </div>
          
          <div class="relative">
            <!-- Central Line -->
            <div class="absolute left-1/2 transform -translate-x-1/2 h-full w-1 bg-gradient-to-b from-blue-500 via-purple-500 to-blue-500 rounded-full opacity-20 hidden md:block"></div>
            
            <div class="space-y-12 md:space-y-24">
              ${learningPath.map((step, index) => {
                const isEven = index % 2 === 0;
                const v = videoLessons.find(v => v.id === step.videoId);
                
                return `
                  <div class="relative flex flex-col md:flex-row items-center ${isEven ? 'md:flex-row-reverse' : ''}">
                    <!-- Step Indicator -->
                    <div class="absolute left-1/2 transform -translate-x-1/2 w-12 h-12 rounded-full bg-slate-900 border-4 border-blue-500 flex items-center justify-center font-bold text-xl z-10 shadow-[0_0_20px_rgba(59,130,246,0.5)] hidden md:flex">
                      ${index + 1}
                    </div>
                    
                    <!-- Content Card -->
                    <div class="w-full md:w-5/12 group">
                      <div class="bg-slate-800 rounded-3xl p-8 shadow-2xl border border-slate-700 hover:border-blue-500/50 transition-all duration-500 hover:scale-[1.02]">
                        <div class="flex items-center space-x-4 mb-4">
                          <div class="md:hidden w-10 h-10 rounded-lg bg-blue-600 flex items-center justify-center font-bold text-lg">
                            ${index + 1}
                          </div>
                          <h3 class="text-2xl font-bold text-white group-hover:text-blue-400 transition-colors">${step.title}</h3>
                        </div>
                        
                        <p class="text-slate-400 mb-6 leading-relaxed">
                          ${step.description}
                        </p>
                        
                        <div class="grid grid-cols-1 gap-4 mb-8">
                          <!-- Algorithm Box -->
                          <div class="bg-slate-900/50 rounded-2xl p-4 border border-slate-700/50">
                            <div class="flex items-center space-x-2 mb-2 text-blue-400">
                              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                              </svg>
                              <span class="text-xs font-bold uppercase tracking-wider">Algoritma MantÄ±ÄŸÄ±</span>
                            </div>
                            <div class="text-sm text-slate-300 font-mono bg-slate-950 p-3 rounded-xl border border-slate-800">
                              ${step.algorithm}
                            </div>
                          </div>
                          
                          <!-- Circuit Box -->
                          <div class="bg-slate-900/50 rounded-2xl p-4 border border-slate-700/50">
                            <div class="flex items-center space-x-2 mb-2 text-purple-400">
                              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                              </svg>
                              <span class="text-xs font-bold uppercase tracking-wider">Devre ÅemasÄ± (Proteus)</span>
                            </div>
                            <div class="text-sm text-slate-300 italic">
                              ${step.circuit}
                            </div>
                          </div>
                          
                          ${step.objectives ? `
                          <div class="bg-slate-900/50 rounded-2xl p-4 border border-slate-700/50">
                            <div class="flex items-center space-x-2 mb-2 text-emerald-400">
                              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                              </svg>
                              <span class="text-xs font-bold uppercase tracking-wider">Hedefler</span>
                            </div>
                            <ul class="text-sm text-slate-300 space-y-1">
                              ${step.objectives.map(o => `<li>â€¢ ${o}</li>`).join('')}
                            </ul>
                          </div>
                          ` : ''}
                          
                          ${step.tasks ? `
                          <div class="bg-slate-900/50 rounded-2xl p-4 border border-slate-700/50">
                            <div class="flex items-center space-x-2 mb-2 text-indigo-400">
                              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2v-7H3v7a2 2 0 002 2z"/>
                              </svg>
                              <span class="text-xs font-bold uppercase tracking-wider">Mini GÃ¶revler</span>
                            </div>
                            <ul class="text-sm text-slate-300 space-y-1">
                              ${step.tasks.map(t => `<li>â€¢ ${t}</li>`).join('')}
                            </ul>
                          </div>
                          ` : ''}
                          
                          ${step.pitfalls ? `
                          <div class="bg-slate-900/50 rounded-2xl p-4 border border-slate-700/50">
                            <div class="flex items-center space-x-2 mb-2 text-red-400">
                              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2v6m0-6V8m0 8H6m6 0h4"/>
                              </svg>
                              <span class="text-xs font-bold uppercase tracking-wider">Dikkat Edilecekler</span>
                            </div>
                            <ul class="text-sm text-slate-300 space-y-1">
                              ${step.pitfalls.map(p => `<li>â€¢ ${p}</li>`).join('')}
                            </ul>
                          </div>
                          ` : ''}

                          ${step.challenge ? `
                          <div class="mt-4 pt-4 border-t border-slate-700">
                            <div class="bg-gradient-to-br from-blue-600/20 to-purple-600/20 rounded-2xl p-6 border border-blue-500/30">
                              <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-2 text-blue-400">
                                  <span class="text-xl">âš¡</span>
                                  <h4 class="font-bold">Mikro-MÃ¼cadele</h4>
                                </div>
                                <div class="px-2 py-1 bg-blue-500/10 text-blue-400 text-[10px] font-bold rounded border border-blue-500/20 uppercase">
                                  +20 XP
                                </div>
                              </div>
                              
                              <p class="text-white text-sm mb-4">${step.challenge.question}</p>
                              
                              ${step.challenge.type === 'code-completion' ? `
                                <div class="bg-slate-950 p-4 rounded-xl border border-slate-800 mb-4 font-mono text-sm overflow-x-auto">
                                  <div class="flex items-center space-x-2 whitespace-nowrap">
                                    <span class="text-slate-400">${step.challenge.code.split('______')[0]}</span>
                                    <input 
                                      id="challenge-input-${step.id}"
                                      type="text" 
                                      placeholder="..."
                                      ${appState.miniQuizAnswers[`challenge-${step.id}`] ? 'disabled' : ''}
                                      class="bg-slate-800 border-b-2 border-blue-500 text-blue-400 px-2 w-24 focus:outline-none focus:border-blue-400 transition-colors"
                                      onkeyup="if(event.key === 'Enter') submitChallenge('${step.id}', this.value)"
                                    />
                                    <span class="text-slate-400">${step.challenge.code.split('______')[1]}</span>
                                  </div>
                                </div>
                                ${!appState.miniQuizAnswers[`challenge-${step.id}`] ? `
                                  <button 
                                    onclick="submitChallenge('${step.id}', document.getElementById('challenge-input-${step.id}').value)"
                                    class="w-full py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-bold transition-all"
                                  >
                                    Kontrol Et
                                  </button>
                                ` : ''}
                              ` : `
                                <div class="bg-slate-950 p-4 rounded-xl border border-slate-800 mb-4 font-mono text-xs overflow-x-auto text-slate-300">
                                  <pre>${step.challenge.code}</pre>
                                </div>
                                <div class="grid grid-cols-1 gap-2">
                                  ${step.challenge.options.map((opt, optIdx) => `
                                    <button 
                                      onclick="submitChallenge('${step.id}', ${optIdx})"
                                      ${appState.miniQuizAnswers[`challenge-${step.id}`] ? 'disabled' : ''}
                                      class="text-left px-4 py-2 rounded-lg text-sm border transition-all ${
                                        appState.miniQuizAnswers[`challenge-${step.id}`] 
                                          ? (optIdx === step.challenge.correct ? 'bg-green-500/20 border-green-500/50 text-green-400' : 'bg-slate-800 border-slate-700 text-slate-500')
                                          : 'bg-slate-800 border-slate-700 hover:border-blue-500/50 text-slate-300'
                                      }"
                                    >
                                      ${opt}
                                    </button>
                                  `).join('')}
                                </div>
                              `}
                              
                              ${appState.miniQuizAnswers[`challenge-${step.id}`] ? `
                                <div class="mt-4 p-4 rounded-xl text-xs ${appState.miniQuizAnswers[`challenge-${step.id}`] === 'correct' ? 'bg-green-500/10 text-green-400 border border-green-500/20' : 'bg-red-500/10 text-red-400 border border-red-500/20'}">
                                  <strong>${appState.miniQuizAnswers[`challenge-${step.id}`] === 'correct' ? 'DoÄŸru!' : 'YanlÄ±ÅŸ!'}</strong> 
                                  ${step.challenge.explanation || step.challenge.hint || ''}
                                </div>
                              ` : ''}
                            </div>
                          </div>
                          ` : ''}
                        </div>
                        
                        <div class="flex flex-wrap gap-3">
                          <button onclick="appState.currentDocSection='${step.docKey}'; navigateTo('docs');" 
                            class="flex-1 px-4 py-2.5 bg-slate-700 hover:bg-slate-600 rounded-xl text-xs font-bold transition-all flex items-center justify-center space-x-2">
                            <span>Ders NotlarÄ±</span>
                          </button>
                          ${v ? `
                            <a href="${v.url}" target="_blank" rel="noopener" 
                              class="flex-1 px-4 py-2.5 bg-blue-600/20 hover:bg-blue-600/30 text-blue-400 border border-blue-500/30 rounded-xl text-xs font-bold transition-all flex items-center justify-center space-x-2">
                              <span>Video Ä°zle</span>
                            </a>
                          ` : ''}
                          ${step.quizId ? `
                            <button onclick="appState.currentQuizId='${step.quizId}'; navigateTo('quiz');" 
                              class="w-full px-4 py-2.5 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500 text-white rounded-xl text-xs font-bold transition-all flex items-center justify-center space-x-2 shadow-lg shadow-emerald-900/20">
                              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                              </svg>
                              <span>Bilgi Testini Ã‡Ã¶z</span>
                            </button>
                          ` : ''}
                          ${step.sampleCodeKey ? `
                            <button onclick="loadExample('${step.sampleCodeKey}'); navigateTo('editor');" 
                              class="w-full px-4 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white rounded-xl text-xs font-bold transition-all flex items-center justify-center space-x-2 shadow-lg shadow-blue-900/20">
                              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v8m-4-4h8"/>
                              </svg>
                              <span>Ã–rnek Kodu AÃ§</span>
                            </button>
                          ` : ''}
                        </div>
                      </div>
                    </div>
                    
                    <!-- Spacer for Desktop -->
                    <div class="hidden md:block md:w-2/12"></div>
                    <div class="hidden md:block md:w-5/12"></div>
                  </div>
                `;
              }).join('')}
            </div>
          </div>
          
          <!-- Final Step -->
          <div class="mt-24 text-center">
            <div class="inline-block p-1 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 mb-6">
              <div class="px-8 py-3 rounded-full bg-slate-900 text-xl font-bold">
                Tebrikler!
              </div>
            </div>
            <h2 class="text-3xl font-bold mb-4">Temel Seviyeyi TamamladÄ±n</h2>
            <p class="text-slate-400 mb-8">ArtÄ±k kendi projelerini Ã¼retmeye hazÄ±rsÄ±n. EditÃ¶re gidip hayallerini kodla!</p>
            <button onclick="navigateTo('editor')" class="px-10 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-2xl font-bold shadow-xl shadow-blue-500/20 transition-all hover:scale-105">
              Kod EditÃ¶rÃ¼ne Git
            </button>
          </div>
        </div>
      `;
    }

    function renderHomePage() {
      return `
        ${renderNavbar()}
        
        <section class="relative overflow-hidden py-12 md:py-20 lg:py-32">
          <div class="absolute inset-0 opacity-10 pointer-events-none">
            <svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
              <defs>
                <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#1E3A8A;stop-opacity:1" />
                </linearGradient>
              </defs>
              <circle cx="10" cy="10" r="30" fill="url(#grad)"/>
              <circle cx="90" cy="90" r="40" fill="url(#grad)"/>
            </svg>
          </div>
          
          <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="mb-8 animate-bounce">
              <svg class="w-16 h-16 md:w-24 md:h-24 mx-auto text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
              </svg>
            </div>
            
            <h1 class="text-3xl sm:text-5xl lg:text-7xl font-black mb-6 leading-[1.1] tracking-tight">
              Arduino'yu <span class="text-blue-500">ezberleyerek</span> deÄŸil,<br class="hidden md:block"> <span class="bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-indigo-600">anlayarak</span> Ã¶ÄŸren.
            </h1>
            <p class="text-base sm:text-xl mb-10 max-w-2xl mx-auto text-slate-400 font-medium">
              Yapay zeka destekli interaktif eÄŸitim platformu ile hayallerindeki projeleri koda dÃ¶k.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
              <button onclick="handleStart()" class="w-full sm:w-auto px-10 py-4 rounded-2xl font-bold bg-blue-600 text-white hover:bg-blue-700 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/30 transition-all">
                ${appState.currentUser ? 'Ã–ÄŸrenmeye Devam Et' : 'Ãœcretsiz BaÅŸla'}
              </button>
              <button onclick="navigateTo('docs')" class="w-full sm:w-auto px-10 py-4 rounded-2xl font-bold bg-slate-800 text-slate-100 border border-slate-700 hover:bg-slate-700 transition-all">
                DokÃ¼mantasyon
              </button>
            </div>
          </div>
        </section>

        <section class="py-16 md:py-24 bg-slate-900/30">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
              <h2 class="text-2xl sm:text-4xl font-bold mb-4">Neden ArduMind?</h2>
              <div class="h-1.5 w-20 bg-blue-600 mx-auto rounded-full"></div>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
              <div class="group bg-slate-800 rounded-3xl p-8 border border-slate-700/50 hover:border-blue-500/50 transition-all duration-500">
                <div class="w-14 h-14 rounded-2xl bg-blue-500/10 text-blue-500 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                  <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                  </svg>
                </div>
                <h3 class="text-xl font-bold mb-3">KiÅŸiye Ã–zel</h3>
                <p class="text-slate-400 text-sm leading-relaxed">Senin seviyene ve Ã¶ÄŸrenme hÄ±zÄ±na gÃ¶re uyarlanan dinamik iÃ§erikler.</p>
              </div>
              
              <div class="group bg-slate-800 rounded-3xl p-8 border border-slate-700/50 hover:border-blue-500/50 transition-all duration-500">
                <div class="w-14 h-14 rounded-2xl bg-indigo-500/10 text-indigo-500 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                  <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                  </svg>
                </div>
                <h3 class="text-xl font-bold mb-3">Hata Analizi</h3>
                <p class="text-slate-400 text-sm leading-relaxed">Kodundaki hatalarÄ± anÄ±nda tespit eder ve Ã§Ã¶zÃ¼m Ã¶nerileri sunar.</p>
              </div>
              
              <div class="group bg-slate-800 rounded-3xl p-8 border border-slate-700/50 hover:border-blue-500/50 transition-all duration-500 sm:col-span-2 lg:col-span-1">
                <div class="w-14 h-14 rounded-2xl bg-emerald-500/10 text-emerald-500 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                  <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/>
                  </svg>
                </div>
                <h3 class="text-xl font-bold mb-3">Proje OdaklÄ±</h3>
                <p class="text-slate-400 text-sm leading-relaxed">Teoriyi anÄ±nda pratiÄŸe dÃ¶kebileceÄŸin onlarca gerÃ§ek proje.</p>
              </div>
            </div>
          </div>
        </section>
        
        <section class="py-16 md:py-24 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="bg-gradient-to-br from-blue-600 to-indigo-900 rounded-[2.5rem] p-8 md:p-16 text-center relative overflow-hidden shadow-2xl">
            <div class="absolute inset-0 bg-grid-white/[0.05] pointer-events-none"></div>
            <div class="relative z-10">
              <h2 class="text-3xl md:text-5xl font-bold mb-6 text-white leading-tight">GeleceÄŸi kodlamaya bugÃ¼n baÅŸla.</h2>
              <p class="text-lg mb-10 text-white/80 max-w-2xl mx-auto">Ãœcretsiz hesabÄ±nÄ± oluÅŸtur ve ArduMind dÃ¼nyasÄ±na adÄ±m at.</p>
              <button onclick="handleStart()" class="px-10 py-4 rounded-2xl font-bold bg-white text-blue-600 hover:scale-105 transition-all shadow-xl">
                Åimdi BaÅŸla
              </button>
            </div>
          </div>
        </section>
      `;
    }

    function renderDashboard() {
      if (!appState.currentUser) {
        navigateTo('home');
        return '';
      }

      const weeklyProgress = getWeeklyProgress();
      const days = ['Pzt', 'Sal', 'Ã‡ar', 'Per', 'Cum', 'Cmt', 'Paz'];
      const maxXP = Math.max(...weeklyProgress, 1);

      return `
        ${renderNavbar()}
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 fade-in">
          <div class="mb-8">
            <h1 class="text-4xl font-bold mb-2">HoÅŸ geldin, ${appState.currentUser.name.split(' ')[0]}!</h1>
            <p class="text-slate-400">Arduino yolculuÄŸuna devam etmeye hazÄ±r mÄ±sÄ±n?</p>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl p-6 shadow-lg shadow-blue-500/20">
              <div class="text-3xl font-bold text-white">${appState.currentUser.xp || 0}</div>
              <div class="text-blue-100 text-xs mt-1">Toplam XP</div>
              <div class="mt-4 w-full bg-white/20 h-1 rounded-full overflow-hidden">
                <div class="bg-white h-full" style="width: ${((appState.currentUser.xp || 0) % 1000) / 10}%"></div>
              </div>
              <div class="text-[9px] text-blue-200 mt-1">Sonraki Seviye: ${1000 - ((appState.currentUser.xp || 0) % 1000)} XP</div>
            </div>
            <div class="bg-gradient-to-br from-purple-500 to-purple-700 rounded-2xl p-6 shadow-lg shadow-purple-500/20">
              <div class="text-3xl font-bold text-white">${appState.currentUser.completedModules.length}</div>
              <div class="text-purple-100 text-xs mt-1">${modules.length} modÃ¼lden</div>
              <div class="mt-4 w-full bg-white/20 h-1 rounded-full overflow-hidden">
                <div class="bg-white h-full" style="width: ${(appState.currentUser.completedModules.length / modules.length) * 100}%"></div>
              </div>
              <div class="text-[9px] text-purple-200 mt-1">Tamamlanma: %${Math.round((appState.currentUser.completedModules.length / modules.length) * 100)}</div>
            </div>
            <div class="bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-6 shadow-lg shadow-emerald-500/20">
              <div class="text-3xl font-bold text-white">${appState.currentUser.completedQuizzes?.length || 0}</div>
              <div class="text-emerald-100 text-xs mt-1">Ã‡Ã¶zÃ¼len Quiz</div>
              <div class="mt-4 flex -space-x-1">
                ${[1,2,3,4,5].map(i => `<div class="w-3 h-3 rounded-full border border-white/30 ${i <= (appState.currentUser.completedQuizzes?.length || 0) ? 'bg-white' : 'bg-white/10'}"></div>`).join('')}
              </div>
            </div>
            <div class="bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl p-6 shadow-lg shadow-orange-500/20">
              <div class="text-3xl font-bold text-white">${Math.floor((appState.currentUser.xp || 0) / 1000) + 1}</div>
              <div class="text-orange-100 text-xs mt-1">Mevcut Seviye</div>
              <div class="text-[10px] font-bold text-white/80 mt-4 px-2 py-0.5 bg-white/20 rounded inline-block uppercase">KaÅŸif UnvanÄ±</div>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 space-y-6">
              <!-- GeliÅŸim Paneli (JÃ¼ri DeÄŸer Ã‡Ä±ktÄ±sÄ±) -->
              <div class="bg-slate-800 rounded-2xl p-6 border border-blue-500/30 shadow-lg shadow-blue-500/5">
                <div class="flex items-center justify-between mb-6">
                  <div>
                    <h2 class="text-2xl font-bold">GeliÅŸim Paneli</h2>
                    <p class="text-sm text-slate-400">Kavram bazlÄ± Ã¶ÄŸrenme metriklerin</p>
                  </div>
                  <div class="flex items-center space-x-2 text-xs">
                    <span class="px-2 py-1 bg-blue-500/10 text-blue-400 rounded-full border border-blue-500/20">JÃ¼ri Modu</span>
                  </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                  ${Object.entries(appState.learningMetrics.concepts).map(([key, data]) => {
                    const conceptNames = {
                      'algoritma': 'Algoritma MantÄ±ÄŸÄ±',
                      'degiskenler': 'DeÄŸiÅŸkenler',
                      'donguler': 'DÃ¶ngÃ¼ler',
                      'kosullar': 'KoÅŸul YapÄ±larÄ±',
                      'fonksiyonlar': 'Fonksiyonlar',
                      'dijital_pinler': 'Dijital Pinler',
                      'analog_pinler': 'Analog Pinler',
                      'temel_arduino': 'Arduino Temelleri'
                    };
                    return `
                      <div class="bg-slate-900/50 rounded-xl p-4 border border-slate-700/50">
                        <div class="flex justify-between items-center mb-2">
                          <span class="text-sm font-medium text-slate-300">${conceptNames[key]}</span>
                          <span class="text-xs font-bold ${data.score >= 70 ? 'text-green-400' : data.score >= 40 ? 'text-yellow-400' : 'text-slate-500'}">%${data.score}</span>
                        </div>
                        <div class="w-full bg-slate-800 h-1.5 rounded-full overflow-hidden">
                          <div class="h-full bg-gradient-to-r from-blue-500 to-indigo-500 transition-all duration-1000" style="width: ${data.score}%"></div>
                        </div>
                        <div class="flex justify-between mt-2 text-[10px] text-slate-500">
                          <span>${data.attempts} deneme</span>
                          <span>${data.score >= 80 ? 'Usta' : data.score >= 50 ? 'Ã–ÄŸreniyor' : 'BaÅŸlangÄ±Ã§'}</span>
                        </div>
                      </div>
                    `;
                  }).join('')}
                </div>

                <div class="grid grid-cols-3 gap-4 p-4 bg-blue-500/5 rounded-xl border border-blue-500/10">
                  <div class="text-center">
                    <div class="text-xl font-bold text-blue-400">${Math.round(appState.learningMetrics.totalStudyTime / 60)} dk</div>
                    <div class="text-[10px] text-slate-400 uppercase tracking-wider">Ã‡alÄ±ÅŸma SÃ¼resi</div>
                  </div>
                  <div class="text-center border-x border-slate-700">
                    <div class="text-xl font-bold text-red-400">${appState.learningMetrics.totalErrors}</div>
                    <div class="text-[10px] text-slate-400 uppercase tracking-wider">Hata SayÄ±sÄ±</div>
                  </div>
                  <div class="text-center">
                    <div class="text-xl font-bold text-green-400">${Object.values(appState.learningMetrics.concepts).filter(c => c.score >= 70).length}</div>
                    <div class="text-[10px] text-slate-400 uppercase tracking-wider">KazanÄ±lan Yetkinlik</div>
                  </div>
                </div>

                <div id="ai-learning-summary" class="mt-6">
                  <button onclick="getAILearningSummary()" class="w-full py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white rounded-xl font-bold text-sm transition-all shadow-lg shadow-blue-500/20 flex items-center justify-center space-x-2">
                    <span>ğŸ¤– AI GeliÅŸim Analizi OluÅŸtur</span>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                  </button>
                  <div id="ai-learning-summary-result" class="hidden mt-4"></div>
                </div>
              </div>

              <div class="bg-slate-800 rounded-2xl p-6">
                <h2 class="text-2xl font-bold mb-4">Ã–ÄŸrenmeye Devam Et</h2>
                <div class="space-y-4">
                  ${modules.map(module => {
                    const progress = getModuleProgress(module.id);
                    const isCompleted = progress === 100;
                    return `
                      <div onclick="handleModuleClick('${module.id}', ${isCompleted})" class="bg-slate-700 rounded-xl p-4 hover:bg-slate-600 transition-all ${isCompleted ? 'opacity-60' : 'cursor-pointer'}">
                        <div class="flex items-center justify-between mb-3">
                          <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 rounded-lg bg-gradient-to-br ${module.color} flex items-center justify-center text-2xl">
                              ${module.icon}
                            </div>
                            <div>
                              <h3 class="font-semibold">${module.title}</h3>
                              <p class="text-sm text-slate-400">${module.description}</p>
                            </div>
                          </div>
                          ${isCompleted ? '<span class="px-3 py-1 bg-green-500 text-white text-xs rounded-full font-medium">TamamlandÄ±</span>' : `<span class="text-blue-400 text-sm font-medium">%${progress}</span>`}
                        </div>
                        <div class="w-full bg-slate-600 rounded-full h-2">
                          <div class="bg-gradient-to-r ${module.color} h-2 rounded-full transition-all" style="width: ${progress}%"></div>
                        </div>
                      </div>
                    `;
                  }).join('')}
                </div>
                <button onclick="navigateTo('editor')" class="w-full mt-4 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white py-4 rounded-xl font-semibold transition-all">Kod EditÃ¶rÃ¼'nÃ¼ AÃ§</button>
              </div>

              <div class="bg-slate-800 rounded-2xl p-6">
                <h2 class="text-2xl font-bold mb-4">HaftalÄ±k Ä°lerleme</h2>
                <div class="flex items-end justify-between h-48 space-x-2">
                  ${weeklyProgress.map((xp, index) => {
                    const height = (xp / maxXP) * 100;
                    return `
                      <div class="flex-1 flex flex-col items-center space-y-2">
                        <div class="w-full bg-slate-700 rounded-t-lg relative flex items-end justify-center" style="height: ${height}%; min-height: 4px">
                          <div class="absolute inset-0 bg-gradient-to-t from-blue-500 to-purple-500 rounded-t-lg"></div>
                          ${xp > 0 ? `<span class="relative text-xs font-bold text-white mb-1">${xp}</span>` : ''}
                        </div>
                        <span class="text-xs text-slate-400">${days[index]}</span>
                      </div>
                    `;
                  }).join('')}
                </div>
              </div>
            </div>

            <div class="space-y-6">
              <!-- Profil Ã–zeti -->
              <div class="bg-gradient-to-br from-slate-800 to-slate-700 rounded-2xl p-6 border border-slate-700/50">
                <div class="text-center mb-4">
                  <div class="w-20 h-20 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-3xl font-bold mx-auto mb-3 shadow-lg">
                    ${appState.currentUser.name.charAt(0).toUpperCase()}
                  </div>
                  <h3 class="font-bold text-lg">${appState.currentUser.name}</h3>
                  <div class="text-xs text-blue-400 uppercase font-semibold mt-1">Level ${Math.floor((appState.currentUser.xp || 0) / 1000) + 1} KaÅŸif</div>
                </div>
              </div>

              <!-- HaftalÄ±k GÃ¶rev -->
              <div class="bg-gradient-to-br from-indigo-600 to-blue-700 rounded-2xl p-6 text-white shadow-xl shadow-blue-900/20">
                <h3 class="font-bold mb-2">HaftalÄ±k GÃ¶rev</h3>
                <p class="text-xs text-blue-100 mb-4">3 modÃ¼l tamamla ve 500 bonus XP kazan!</p>
                <div class="w-full bg-black/20 rounded-full h-1.5 mb-2">
                  <div class="bg-white h-1.5 rounded-full" style="width: 33%"></div>
                </div>
                <div class="text-[10px] text-blue-100">1/3 ModÃ¼l TamamlandÄ±</div>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function renderModuleDetail() {
      const module = modules.find(m => m.id === appState.currentModuleView);
      if (!module) {
        appState.currentModuleView = null;
        return renderDashboard();
      }

      const isCompleted = appState.currentUser.completedModules.some(m => m.moduleId === module.id);

      return `
        ${renderNavbar()}
        
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <button onclick="appState.currentModuleView = null; renderApp();" class="flex items-center space-x-2 text-slate-400 hover:text-white mb-6 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
            <span>Geri DÃ¶n</span>
          </button>

          <div class="bg-slate-800 rounded-2xl p-8">
            <div class="flex items-center space-x-4 mb-6">
              <div class="w-16 h-16 rounded-2xl bg-gradient-to-br ${module.color} flex items-center justify-center text-3xl">
                ${module.icon}
              </div>
              <div class="flex-1">
                <h1 class="text-3xl font-bold mb-2">${module.title}</h1>
                <p class="text-slate-400">${module.description}</p>
              </div>
            </div>

            <!-- Devre Ã–nizleme BileÅŸeni -->
            <div class="mb-8">
              <h2 class="text-xl font-bold mb-4 flex items-center">
                <svg class="w-5 h-5 mr-2 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" />
                </svg>
                Devre ÅemasÄ± Ã–nizleme
              </h2>
              <div class="bg-slate-900 rounded-2xl p-6 border border-slate-700/50 aspect-video flex flex-col items-center justify-center relative overflow-hidden group">
                <!-- Arka Plan IzgarasÄ± -->
                <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(#475569 1px, transparent 1px); background-size: 20px 20px;"></div>
                
                <div class="relative z-10 text-center">
                  <div class="w-24 h-24 mx-auto mb-4 bg-slate-800 rounded-xl border border-slate-700 flex items-center justify-center group-hover:scale-110 transition-transform duration-500">
                    <span class="text-4xl">${module.icon}</span>
                  </div>
                  <p class="text-slate-400 text-sm mb-2">${module.title} devresi hazÄ±rlanÄ±yor...</p>
                  <div class="flex items-center justify-center space-x-2">
                    <span class="px-2 py-1 bg-blue-500/10 text-blue-400 text-[10px] font-bold rounded uppercase tracking-wider border border-blue-500/20">Arduino Uno</span>
                    <span class="px-2 py-1 bg-purple-500/10 text-purple-400 text-[10px] font-bold rounded uppercase tracking-wider border border-purple-500/20">EtkileÅŸimli</span>
                  </div>
                </div>

                <!-- SimÃ¼le EdilmiÅŸ BaÄŸlantÄ± HatlarÄ± -->
                <svg class="absolute inset-0 w-full h-full pointer-events-none opacity-20">
                  <path d="M 50,50 L 150,50 L 150,150" stroke="#3b82f6" fill="none" stroke-width="2" stroke-dasharray="4 4" class="animate-[dash_20s_linear_infinite]" />
                  <path d="M 350,250 L 250,250 L 250,150" stroke="#a855f7" fill="none" stroke-width="2" stroke-dasharray="4 4" class="animate-[dash_20s_linear_infinite]" />
                </svg>

                <button class="absolute bottom-4 right-4 px-4 py-2 bg-slate-800/80 hover:bg-blue-600 text-white text-xs font-bold rounded-lg border border-slate-700 hover:border-blue-500 transition-all backdrop-blur-sm">
                  Tam Ekran GÃ¶r
                </button>
              </div>
            </div>

            <div class="space-y-4 mb-8">
              <h2 class="text-xl font-bold mb-4">Dersler</h2>
              ${module.lessons.map((lesson, index) => `
                <div class="bg-slate-700 rounded-xl p-4 flex items-center space-x-4">
                  <div class="w-10 h-10 rounded-lg bg-gradient-to-br ${module.color} flex items-center justify-center font-bold flex-shrink-0">
                    ${index + 1}
                  </div>
                  <div class="flex-1">
                    <h3 class="font-semibold">${lesson.title}</h3>
                    <p class="text-sm text-slate-400">${lesson.duration}</p>
                  </div>
                </div>
              `).join('')}
            </div>

            ${!isCompleted ? `
              <button onclick="completeModule('${module.id}')" class="w-full bg-gradient-to-r ${module.color} text-white py-4 rounded-xl font-bold hover:scale-105 transition-all">
                ModÃ¼lÃ¼ Tamamla ve ${module.xpReward} XP Kazan
              </button>
            ` : `
              <div class="bg-green-500 bg-opacity-20 border-2 border-green-500 rounded-xl p-6 text-center">
                <h3 class="text-xl font-bold mb-2">Tebrikler!</h3>
                <p class="text-slate-300">Bu modÃ¼lÃ¼ tamamladÄ±n!</p>
              </div>
            `}
          </div>
        </div>
      `;
    }

    async function analyzeAlgorithm() {
      const code = appState.editorCode;
      if (!code || code.trim() === '') {
        showToast('Analiz edilecek kod bulunamadÄ±!', 'error');
        return;
      }

      const prompt = `AÅŸaÄŸÄ±daki Arduino kodunun algoritmasÄ±nÄ± ve mantÄ±ÄŸÄ±nÄ± adÄ±m adÄ±m aÃ§Ä±kla. \n\nKod:\n${code}\n\nLÃ¼tfen:\n1. Kodun genel amacÄ±nÄ± sÃ¶yle.\n2. setup() ve loop() iÃ§indeki mantÄ±ÄŸÄ± adÄ±m adÄ±m aÃ§Ä±kla.\n3. EÄŸer varsa if/else veya dÃ¶ngÃ¼ yapÄ±larÄ±nÄ± Ã¶zellikle vurgula.\n4. Bu kodun Ã§alÄ±ÅŸmasÄ±nÄ± bir akÄ±ÅŸ diyagramÄ± gibi (metinsel olarak) tarif et.`;
      
      const el = document.getElementById('ai-logic-result');
      if (el) {
        el.innerHTML = '<div class="animate-pulse text-blue-400 py-4">ğŸ¤– Algoritma Analiz Ediliyor...</div>';
        el.classList.remove('hidden');
      }
      
      const aiResponse = await callGeminiAI(prompt, "Sen bir bilgisayar bilimleri Ã¶ÄŸretmenisin. KarmaÅŸÄ±k kodlarÄ± basit algoritmik adÄ±mlara bÃ¶ler ve Ã¶ÄŸrencilerin dÃ¼ÅŸÃ¼nme sÃ¼recini geliÅŸtirmek iÃ§in aÃ§Ä±klarsÄ±n.");
      
      if (el) {
        el.innerHTML = `
          <div class="bg-blue-500/10 border border-blue-500/30 rounded-xl p-4 mt-4 animate-fadeIn">
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center space-x-2 text-blue-400 font-bold">
                <span>ğŸ§  Algoritma Analizi</span>
              </div>
              <button onclick="document.getElementById('ai-logic-result').classList.add('hidden')" class="text-slate-500 hover:text-white">âœ•</button>
            </div>
            <div class="text-slate-200 text-sm leading-relaxed space-y-2">
              ${aiResponse.replace(/\n/g, '<br>')}
            </div>
          </div>
        `;
      }
    }

    function renderEditor() {
      return `
        ${renderNavbar()}
        
        <div class="h-[calc(100vh-4rem)] flex">
          <div class="w-1/2 border-r border-slate-700 flex flex-col">
            <div class="bg-slate-800 border-b border-slate-700 px-4 py-3 flex items-center justify-between">
              <h2 class="font-bold">Kod EditÃ¶rÃ¼</h2>
              <div class="flex items-center space-x-2">
                <select onchange="loadExample(this.value); this.value='';" class="bg-slate-700 text-sm px-3 py-1 rounded-lg border border-slate-600">
                  <option value="">Ã–rnek YÃ¼kle</option>
                  ${Object.entries(codeExamples).map(([key, ex]) => `<option value="${key}">${ex.name}</option>`).join('')}
                </select>
                <button onclick="runSimulation()" class="px-4 py-1 rounded-lg font-medium ${appState.simulationRunning ? 'bg-red-500 hover:bg-red-600' : 'bg-green-500 hover:bg-green-600'} text-white transition-all text-sm">
                  ${appState.simulationRunning ? 'Durdur' : 'Ã‡alÄ±ÅŸtÄ±r'}
                </button>
                <button onclick="analyzeAlgorithm()" class="px-3 py-1 rounded-lg font-medium bg-indigo-600 hover:bg-indigo-500 text-white transition-all text-sm flex items-center space-x-1">
                  <span>ğŸ§  Algoritma</span>
                </button>
                <button onclick="generateAIBugChallenge()" class="px-3 py-1 rounded-lg font-medium bg-orange-600 hover:bg-orange-500 text-white transition-all text-sm flex items-center space-x-1">
                  <span>âš¡ Hata Bulma</span>
                </button>
                <button onclick="saveEditorCode()" class="px-3 py-1 rounded-lg font-medium bg-slate-700 border border-slate-600 text-slate-200 hover:bg-slate-600 transition-all text-sm">Kaydet</button>
                <button onclick="loadSavedEditorCode()" class="px-3 py-1 rounded-lg font-medium bg-slate-700 border border-slate-600 text-slate-200 hover:bg-slate-600 transition-all text-sm">YÃ¼kle</button>
                <button onclick="copyEditorCode()" class="px-3 py-1 rounded-lg font-medium bg-slate-700 border border-slate-600 text-slate-200 hover:bg-slate-600 transition-all text-sm">Kopyala</button>
                <button onclick="toggleEditorWrap()" class="px-3 py-1 rounded-lg font-medium bg-slate-700 border border-slate-600 text-slate-200 hover:bg-slate-600 transition-all text-sm">${appState.editorWrap ? 'SatÄ±r KÄ±rmayÄ± Kapat' : 'SatÄ±r KÄ±rmayÄ± AÃ§'}</button>
              </div>
            </div>
            <div class="flex-1 overflow-hidden bg-slate-900 relative">
              <div id="editorContainer" class="w-full h-full"></div>
              <!-- AI Analiz SonuÃ§ Paneli -->
              <div id="ai-logic-result" class="absolute bottom-4 left-4 right-4 z-10 hidden max-h-[60%] overflow-y-auto"></div>
            </div>
          </div>

          <div class="w-1/2 flex flex-col">
            <div class="h-[60%] bg-slate-800 p-6 overflow-auto">
              <div class="flex items-center justify-between mb-4">
                <h3 class="font-bold">Arduino SimÃ¼lasyonu</h3>
                <button onclick="resetSimulation()" class="px-3 py-1 rounded-lg bg-slate-700 hover:bg-slate-600 text-xs transition-all border border-slate-600">SÄ±fÄ±rla</button>
              </div>
              
              <div class="bg-gradient-to-br from-blue-900 to-blue-700 rounded-xl p-6 mb-6">
                <div class="text-center mb-4">
                  <div class="inline-block bg-slate-800 px-4 py-2 rounded-lg">
                    <span class="font-bold text-blue-400">Arduino UNO</span>
                  </div>
                </div>

                <div id="arduinoBoard"></div>
              </div>
            </div>

            <div class="h-[40%] border-t border-slate-700 bg-slate-900 flex flex-col">
              <div class="bg-slate-800 px-4 py-2 border-b border-slate-700 flex items-center justify-between">
                <span class="font-bold text-sm text-slate-400 uppercase tracking-wider">Seri MonitÃ¶r</span>
                <button onclick="clearSerial()" class="text-xs text-blue-400 hover:text-blue-300">Temizle</button>
              </div>
              <div id="serialMonitor" class="flex-1 overflow-auto p-4 font-mono text-sm">
                ${appState.serialOutput.length === 0 ? `<div class="text-slate-500 text-center py-8">Kodu Ã§alÄ±ÅŸtÄ±rÄ±n...</div>` : appState.serialOutput.map(output => `<div class="mb-1 ${output.type === 'error' ? 'text-red-400' : output.type === 'info' ? 'text-blue-400' : 'text-green-400'}">${output.text}</div>`).join('')}
              </div>
            </div>
          </div>
        </div>
      `;
    }

    async function getAIDocHelper(topicTitle, topicContent) {
      const prompt = `"${topicTitle}" konulu ÅŸu iÃ§eriÄŸi okudum ama tam olarak anlayamadÄ±m. LÃ¼tfen bu konuyu bana daha basit bir dille, gÃ¼nlÃ¼k hayattan Ã¶rnekler vererek tekrar aÃ§Ä±klar mÄ±sÄ±n?\n\nÄ°Ã§erik:\n${topicContent.replace(/<[^>]*>/g, '')}`;
      
      const elementId = `ai-doc-helper-${topicTitle.replace(/\s+/g, '-')}`;
      const el = document.getElementById(elementId);
      if (el) {
        el.innerHTML = '<div class="animate-pulse text-blue-400 py-4">ğŸ¤– AI BasitleÅŸtiriyor...</div>';
        el.classList.remove('hidden');
      }
      
      const aiResponse = await callGeminiAI(prompt, "Sen bir Arduino mentorusun. KarmaÅŸÄ±k teknik kavramlarÄ± kÃ¼Ã§Ã¼k Ã§ocuklara anlatÄ±r gibi basit, eÄŸlenceli ve gÃ¼nlÃ¼k hayattan Ã¶rneklerle aÃ§Ä±klarsÄ±n.");
      
      if (el) {
        el.innerHTML = `
          <div class="bg-indigo-500/10 border border-indigo-500/30 rounded-xl p-4 mt-4 animate-fadeIn">
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center space-x-2 text-indigo-400 font-bold">
                <span>âœ¨ BasitleÅŸtirilmiÅŸ AnlatÄ±m</span>
              </div>
              <button onclick="this.closest('.animate-fadeIn').parentElement.classList.add('hidden')" class="text-slate-500 hover:text-white">âœ•</button>
            </div>
            <div class="text-slate-200 text-sm leading-relaxed">
              ${aiResponse.replace(/\n/g, '<br>')}
            </div>
          </div>
        `;
      }
    }

    async function generateAIBugChallenge() {
      const prompt = `LÃ¼tfen baÅŸlangÄ±Ã§ seviyesindeki bir Arduino Ã¶ÄŸrencisi iÃ§in "Hata Bulma" gÃ¶revi oluÅŸtur. \n\nÄ°stediÄŸim format (JSON olarak verme, dÃ¼z metin ver):\n1. GÃ¶revin AdÄ±\n2. GÃ¶revin AmacÄ± (KÄ±sa)\n3. HatalÄ± Kod (Ä°Ã§inde 1 veya 2 mantÄ±ksal veya yazÄ±m hatasÄ± olsun)\n4. Ä°pucu\n5. Ã‡Ã¶zÃ¼m (Neyin yanlÄ±ÅŸ olduÄŸu ve doÄŸrusu)`;
      
      const el = document.getElementById('ai-logic-result');
      if (el) {
        el.innerHTML = '<div class="animate-pulse text-blue-400 py-4">ğŸ¤– AI Yeni GÃ¶rev HazÄ±rlÄ±yor...</div>';
        el.classList.remove('hidden');
      }
      
      const aiResponse = await callGeminiAI(prompt, "Sen bir Arduino ders iÃ§erik Ã¼reticisisin. Ã–ÄŸrencilerin dikkatini Ã¶lÃ§ecek, eÄŸlenceli ve Ã¶ÄŸretici 'bug' bulma senaryolarÄ± yazarsÄ±n.");
      
      if (el) {
        el.innerHTML = `
          <div class="bg-orange-500/10 border border-orange-500/30 rounded-xl p-4 mt-4 animate-fadeIn">
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center space-x-2 text-orange-400 font-bold">
                <span>âš¡ AI Mikro-MÃ¼cadele</span>
              </div>
              <button onclick="document.getElementById('ai-logic-result').classList.add('hidden')" class="text-slate-500 hover:text-white">âœ•</button>
            </div>
            <div class="text-slate-200 text-sm leading-relaxed space-y-4">
              ${aiResponse.replace(/\n/g, '<br>')}
            </div>
            <div class="mt-4 pt-4 border-t border-orange-500/20">
              <p class="text-[10px] text-orange-400/60 uppercase">Bu koddaki hatalarÄ± editÃ¶re kopyalayÄ±p dÃ¼zelterek simÃ¼lasyonu Ã§alÄ±ÅŸtÄ±rmayÄ± dene!</p>
            </div>
          </div>
        `;
      }
    }

    function renderAuthModal() {
      return `
        <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" onclick="if(event.target === this) { appState.showAuthModal = false; renderApp(); }">
          <div class="bg-slate-800 rounded-2xl p-8 max-w-md w-full" onclick="event.stopPropagation()">
            <div class="text-center mb-6">
              <h2 class="text-2xl font-bold mb-2">${appState.authMode === 'login' ? 'GiriÅŸ Yap' : 'KayÄ±t Ol'}</h2>
              <p class="text-slate-400">${appState.authMode === 'login' ? 'Arduino serÃ¼venine devam et' : 'Yeni bir serÃ¼vene baÅŸla'}</p>
            </div>

            <form onsubmit="handleAuthSubmit(event, this)" class="space-y-4">
              ${appState.authMode === 'register' ? `
                <div>
                  <label class="block text-sm font-medium mb-2">Ä°sim Soyisim</label>
                  <input type="text" name="name" required class="w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
              ` : ''}

              <div>
                <label class="block text-sm font-medium mb-2">E-posta</label>
                <input type="email" name="email" required class="w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
              </div>

              <div>
                <label class="block text-sm font-medium mb-2">Åifre</label>
                <input type="password" name="password" required minlength="6" class="w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
              </div>

              ${appState.authMode === 'register' ? `
                <div>
                  <label class="block text-sm font-medium mb-2">Seviyem</label>
                  <select name="level" required class="w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="beginner">BaÅŸlangÄ±Ã§ - HiÃ§ bilgim yok</option>
                    <option value="basic">Temel - Biraz bilgim var</option>
                    <option value="intermediate">Orta - Proje yapabilirim</option>
                  </select>
                </div>

                <div>
                  <label class="block text-sm font-medium mb-2">Hedefim</label>
                  <select name="goal" required class="w-full bg-slate-700 border border-slate-600 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="learn">Arduino Ã¶ÄŸrenmek</option>
                    <option value="project">Proje yapmak</option>
                  </select>
                </div>
              ` : ''}

              <button type="submit" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-bold transition-all">
                ${appState.authMode === 'login' ? 'GiriÅŸ Yap' : 'KayÄ±t Ol'}
              </button>
            </form>

            <div class="mt-6 text-center">
              <button onclick="appState.authMode = appState.authMode === 'login' ? 'register' : 'login'; renderApp();" class="text-blue-400 hover:text-blue-300 text-sm">
                ${appState.authMode === 'login' ? 'HesabÄ±n yok mu? KayÄ±t ol' : 'Zaten hesabÄ±n var mÄ±? GiriÅŸ yap'}
              </button>
            </div>
          </div>
        </div>
      `;
    }

    function renderDocumentation() {
      const sections = Object.entries(documentation);
      const currentSection = documentation[appState.currentDocSection];
      
      return `
        ${renderNavbar()}
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <div class="mb-8">
            <h1 class="text-4xl font-bold mb-2">Arduino DokÃ¼mantasyon</h1>
            <p class="text-slate-400">Arduino yazÄ±lÄ±m dilini Ã¶rneklerle Ã¶ÄŸrenin</p>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <div class="lg:col-span-1">
              <div class="bg-slate-800 rounded-2xl p-4 sticky top-24">
                <h3 class="text-sm font-bold text-slate-400 uppercase mb-3">Kategoriler</h3>
                <div class="space-y-2">
                  ${sections.map(([key, section]) => `
                    <button 
                      onclick="appState.currentDocSection = '${key}'; renderApp();"
                      class="w-full text-left px-4 py-3 rounded-xl transition-all ${
                        appState.currentDocSection === key 
                          ? `bg-gradient-to-r ${section.color} text-white shadow-lg` 
                          : 'bg-slate-700 hover:bg-slate-600 text-slate-300'
                      }"
                    >
                      <div class="flex items-center space-x-3">
                        <span class="text-2xl">${section.icon}</span>
                        <span class="font-medium text-sm">${section.title}</span>
                      </div>
                    </button>
                  `).join('')}
                </div>
              </div>
            </div>

            <div class="lg:col-span-3">
              <div class="bg-slate-800 rounded-2xl p-8">
                <div class="flex items-center space-x-4 mb-6">
                  <div class="w-16 h-16 rounded-2xl bg-gradient-to-br ${currentSection.color} flex items-center justify-center text-3xl">
                    ${currentSection.icon}
                  </div>
                  <div>
                    <h2 class="text-3xl font-bold">${currentSection.title}</h2>
                    <p class="text-slate-400">${(currentSection.topics || []).filter(t => t && t.title && t.content).length} konu</p>
                  </div>
                </div>

                <div class="space-y-4">
                  ${(() => {
                    const displayTopics = (currentSection.topics || []).filter(t => t && t.title && t.content);
                    return displayTopics.map((topic, index) => {
                      const topicKey = `${appState.currentDocSection}-${index}`;
                      const isCollapsed = appState.collapsedTopics[topicKey] || false;
                      return `
                    <div class="border border-slate-700 rounded-xl overflow-hidden transition-all">
                      <button onclick="toggleTopic('${topicKey}')" class="w-full flex items-center justify-between p-6 text-left bg-slate-800 hover:bg-slate-750 transition-all">
                        <div class="flex items-center space-x-4">
                          <div class="w-10 h-10 rounded-lg bg-gradient-to-br ${currentSection.color} flex items-center justify-center text-white font-bold flex-shrink-0">
                            ${index + 1}
                          </div>
                          <div class="flex-1">
                            <h3 class="text-2xl font-bold">${topic.title}</h3>
                            <p class="text-slate-400 mt-1">${topic.description || ''}</p>
                          </div>
                        </div>
                        <div class="text-2xl text-slate-400 transition-transform duration-300 ${isCollapsed ? 'rotate-0' : 'rotate-180'}">
                          â–¼
                        </div>
                      </button>
                      
                      <div class="ml-14 p-6 text-slate-300 leading-relaxed overflow-hidden transition-all duration-300 ${isCollapsed ? 'max-h-0 opacity-0' : 'max-h-[2000px] opacity-100'}">
                        ${topic.content || ''}
                        
                        <div class="mt-4">
                          <button onclick="getAIDocHelper('${topic.title.replace(/'/g, "\\'")}', \`${(topic.content || '').replace(/`/g, '\\`')}\`)" class="flex items-center space-x-2 text-xs text-indigo-400 hover:text-indigo-300 transition-colors bg-indigo-500/5 hover:bg-indigo-500/10 px-3 py-2 rounded-lg border border-indigo-500/20">
                            <span>âœ¨ Bu konuyu daha basit anlat</span>
                          </button>
                          <div id="ai-doc-helper-${topic.title.replace(/\s+/g, '-')}" class="hidden"></div>
                        </div>
                        
                        ${topic.miniQuiz ? `
                          <div class="mt-8 pt-8 border-t border-slate-700">
                            <div class="bg-slate-900/50 rounded-xl p-6 border border-blue-500/20">
                              <div class="flex items-center space-x-2 mb-4 text-blue-400">
                                <span class="text-xl">ğŸ¯</span>
                                <h4 class="font-bold">Kavram KontrolÃ¼</h4>
                              </div>
                              <p class="text-white font-medium mb-4">${topic.miniQuiz.question}</p>
                              <div class="grid grid-cols-1 gap-3">
                                ${topic.miniQuiz.options.map((option, optIndex) => {
                                  const quizKey = `mini-${topicKey}`;
                                  const userAns = appState.miniQuizAnswers?.[quizKey];
                                  const isCorrect = userAns === topic.miniQuiz.correct;
                                  const isSelected = userAns === optIndex;
                                  
                                  let btnClass = 'bg-slate-800 hover:bg-slate-700 border-slate-700';
                                  if (userAns !== undefined) {
                                    if (optIndex === topic.miniQuiz.correct) {
                                      btnClass = 'bg-green-500/20 border-green-500/50 text-green-400';
                                    } else if (isSelected) {
                                      btnClass = 'bg-red-500/20 border-red-500/50 text-red-400';
                                    }
                                  }

                                  return `
                                    <button 
                                      onclick="submitMiniQuiz('${appState.currentDocSection}', ${index}, ${optIndex})"
                                      ${userAns !== undefined ? 'disabled' : ''}
                                      class="w-full text-left px-4 py-3 rounded-lg border transition-all flex items-center justify-between ${btnClass}"
                                    >
                                      <span>${option}</span>
                                      ${userAns !== undefined && optIndex === topic.miniQuiz.correct ? '<span>âœ“</span>' : ''}
                                      ${userAns !== undefined && isSelected && optIndex !== topic.miniQuiz.correct ? '<span>âœ—</span>' : ''}
                                    </button>
                                  `;
                                }).join('')}
                              </div>
                              ${appState.miniQuizAnswers?.[`mini-${topicKey}`] !== undefined ? `
                                <div class="mt-4 p-4 rounded-lg bg-blue-500/10 border border-blue-500/20 text-sm text-blue-300">
                                  <strong>Geri Bildirim:</strong> ${appState.miniQuizAnswers[`mini-${topicKey}`] === topic.miniQuiz.correct 
                                    ? 'Harika! Konuyu tam olarak kavramÄ±ÅŸsÄ±n.' 
                                    : `Maalesef yanlÄ±ÅŸ. ${topic.miniQuiz.explanation}`}
                                </div>
                              ` : ''}
                            </div>
                          </div>
                        ` : ''}
                      </div>
                    </div>
                  `;
                    }).join('');
                  })()}
                </div>

                ${appState.currentUser ? `
                  <div class="mt-8 bg-gradient-to-r ${currentSection.color} bg-opacity-20 border-2 border-opacity-50 rounded-xl p-6">
                    <div class="flex items-center justify-between">
                      <div>
                        <h4 class="font-bold text-lg mb-1">Ã–ÄŸrendiklerini Dene!</h4>
                        <p class="text-sm opacity-80">Kod editÃ¶rÃ¼nde bu konularÄ± uygulayabilirsin</p>
                      </div>
                      <button onclick="navigateTo('editor')" class="px-6 py-3 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg font-semibold transition-all flex items-center space-x-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                        </svg>
                        <span>EditÃ¶re Git</span>
                      </button>
                    </div>
                  </div>
                ` : ''}
              </div>
            </div>
          </div>
        </div>
      `;
    }
    
    function renderComponents() {
      const components = [
        {
          id: 'breadboard',
          name: 'Breadboard',
          icon: '',
          color: 'from-gray-500 to-gray-700',
          description: 'Lehimsiz devre kurmayÄ± saÄŸlayan Ã§ok amaÃ§lÄ± deneme tahtasÄ±',
          usage: 'Yanlardaki power rail (+/â€“) tÃ¼m uzunluk boyunca baÄŸlÄ±dÄ±r. Orta kÄ±sÄ±mda 5â€™li sÃ¼tunlar yatay baÄŸlÄ±dÄ±r; bileÅŸenleri bu hat yapÄ±sÄ±na gÃ¶re yerleÅŸtirin. Ã–ÄŸrenme, deneme-yanÄ±lma ve Arduino projelerinde kullanÄ±lÄ±r.',
          tips: [
            'YÃ¼ksek voltaj iÃ§in uygun deÄŸildir',
            'ParÃ§alarÄ± takarken zorlamayÄ±n; iÃ§ baÄŸlantÄ±lar bozulabilir',
            'Ã‡alÄ±ÅŸmÄ±yorsa baÄŸlantÄ±larÄ± tek tek kontrol edin'
          ],
          path: 'Teknofest 2026/4.KÄ±sÄ±m(Temel Elemanlar 1.KÄ±sÄ±m)',
          images: [{ src: 'BreadBoardBÃ¼yÃ¼k.jpg', caption: 'Breadboard' }]
        },
        {
          id: 'led',
          name: 'LED (IÅŸÄ±k Yayan Diyot)',
          icon: '',
          color: 'from-yellow-500 to-orange-600',
          description: 'Elektrik akÄ±mÄ±yla Ä±ÅŸÄ±k yayan diyot; polarize elemandÄ±r',
          usage: 'Uzun bacak (+) anot, kÄ±sa bacak (â€“) katot. Ä°leri yÃ¶nde tipik ~2V dÃ¼ÅŸÃ¼m olur. 220â€“330Î© direnÃ§ ile kullanÄ±n; ters baÄŸlanÄ±rsa Ä±ÅŸÄ±k vermez.',
          tips: [
            'Her zaman direnÃ§ ile kullanÄ±n',
            'DoÄŸrudan pil/Arduinoâ€™ya baÄŸlamak tehlikelidir',
            'Ters baÄŸlantÄ± uzun sÃ¼rerse zarar gÃ¶rebilir'
          ],
          path: 'Teknofest 2026/4.KÄ±sÄ±m(Temel Elemanlar 1.KÄ±sÄ±m)',
          images: [{ src: 'KÄ±rmÄ±zÄ±Led.jpg', caption: 'LED' }]
        },
        {
          id: 'resistor',
          name: 'DirenÃ§',
          icon: '',
          color: 'from-blue-500 to-cyan-600',
          description: 'AkÄ±mÄ± sÄ±nÄ±rlar; elemanlarÄ± korur; yÃ¶nsÃ¼zdÃ¼r',
          usage: 'Renk bantlarÄ± deÄŸeri gÃ¶sterir. GÃ¼Ã§ deÄŸeri (W) Ä±sÄ±nma dayanÄ±mÄ±nÄ± belirtir. LED ve sensÃ¶rleri korumak iÃ§in kullanÄ±lÄ±r.',
          tips: [
            'Ã‡ok kÃ¼Ã§Ã¼k direnÃ§ LEDâ€™i yakabilir',
            'Ã‡ok bÃ¼yÃ¼k direnÃ§ LEDâ€™i sÃ¶nÃ¼k yapar',
            'Uzun kullanÄ±mda Ä±sÄ± Ã¼retebilir',
            'YÃ¶nsÃ¼zdÃ¼r; her iki yÃ¶nde Ã§alÄ±ÅŸÄ±r'
          ],
          path: 'Teknofest 2026/4.KÄ±sÄ±m(Temel Elemanlar 1.KÄ±sÄ±m)',
          images: [{ src: 'DirenÃ§RenkKodlarÄ±Ä±.jpg', caption: 'DirenÃ§ Renk KodlarÄ±' }]
        },
        {
          id: 'button',
          name: 'Buton (Push Button)',
          icon: '',
          color: 'from-green-500 to-emerald-600',
          description: 'BasÄ±lÄ±nca devreyi Ã§alÄ±ÅŸtÄ±ran, bÄ±rakÄ±lÄ±nca kapatan mekanik anahtar',
          usage: 'Genellikle 4 bacaklÄ±dÄ±r; karÅŸÄ±lÄ±klÄ± bacaklar baÄŸlÄ±dÄ±r. KararlÄ± okuma iÃ§in pull-up/pull-down ve yazÄ±lÄ±msal debounce uygulanÄ±r.',
          tips: [
            'YanlÄ±ÅŸ yÃ¶nde takÄ±lÄ±rsa devre sÃ¼rekli Ã§alÄ±ÅŸÄ±r',
            'HassastÄ±r; sert basmayÄ±n',
            'Arduino ile kullanÄ±mda uygun direnÃ§ tercih edin'
          ],
          path: 'Teknofest 2026/4.KÄ±sÄ±m(Temel Elemanlar 1.KÄ±sÄ±m)',
          images: [{ src: 'Buton.jpg', caption: 'Buton' }]
        },
        {
          id: 'jumper',
          name: 'Jumper Kablo',
          icon: '',
          color: 'from-purple-500 to-pink-600',
          description: 'Devre elemanlarÄ±nÄ± birbirine baÄŸlamak iÃ§in kullanÄ±lan kablolar',
          usage: 'Erkek-erkek, erkek-diÅŸi ve diÅŸi-diÅŸi tÃ¼rleri vardÄ±r; breadboard ve Arduino baÄŸlantÄ±larÄ±nda kullanÄ±lÄ±r.',
          tips: [
            'GevÅŸek takÄ±lan kablolar devrenin Ã§alÄ±ÅŸmamasÄ±na neden olur',
            'Uzun kablolar sinyal karÄ±ÅŸÄ±klÄ±ÄŸÄ± yapabilir',
            'Renkli kablolar karÄ±ÅŸÄ±klÄ±ÄŸÄ± azaltÄ±r'
          ],
          images: []
        },
        {
          id: 'potentiometer',
          name: 'Potansiyometre',
          icon: '',
          color: 'from-orange-500 to-red-600',
          description: 'DeÄŸeri ayarlanabilen deÄŸiÅŸken direnÃ§; ses ve Ä±ÅŸÄ±k ayarÄ±nda kullanÄ±lÄ±r',
          usage: 'ÃœÃ§ bacaklÄ±dÄ±r: +5V, GND ve orta â€œsÃ¼pÃ¼rÃ¼cÃ¼â€ Ã§Ä±kÄ±ÅŸÄ±. Analog giriÅŸle 0â€“1023 aralÄ±ÄŸÄ±nda deÄŸer okunur.',
          tips: [
            'YanlÄ±ÅŸ bacak baÄŸlantÄ±sÄ± Ã§alÄ±ÅŸmayÄ± engeller',
            'Ani Ã§evirmek akÄ±m deÄŸiÅŸimine neden olabilir',
            'LEDâ€™i tek baÅŸÄ±na korumaz; gerekiyorsa ek direnÃ§ kullanÄ±n'
          ],
          path: 'Teknofest 2026/4.KÄ±sÄ±m(Temel Elemanlar 1.KÄ±sÄ±m)',
          images: [{ src: 'Potansiyometre.jpg', caption: 'Potansiyometre' }]
        },
        {
          id: 'servo',
          name: 'Servo Motor',
          icon: '',
          color: 'from-teal-500 to-cyan-600',
          description: '0â€“180Â° arasÄ± hassas aÃ§Ä± kontrolÃ¼ yapabilen motor',
          usage: 'KÄ±rmÄ±zÄ±: Vcc, Kahverengi: GND, Turuncu: Sinyal. PWM darbe geniÅŸliÄŸi ~1â€“2 ms aralÄ±ÄŸÄ±yla konum belirlenir.',
          tips: [
            'Harici gÃ¼Ã§ kaynaÄŸÄ± Ã¶nerilir; yÃ¼ksek akÄ±m Ã§ekebilir',
            'Sinyal pinini PWM destekli pine baÄŸlayÄ±n',
            'AÃ§Ä± kontrolÃ¼ iÃ§in uygun kÃ¼tÃ¼phane/fonksiyonlarÄ± kullanÄ±n'
          ],
          path: 'Teknofest 2026/4.KÄ±sÄ±m(Temel Elemanlar 1.KÄ±sÄ±m)',
          images: [{ src: 'servo-motor-uclari.png', caption: 'Servo Motor BaÄŸlantÄ±larÄ±' }]
        },
        {
          id: 'hc-sr04',
          name: 'HC-SR04 Mesafe SensÃ¶rÃ¼',
          icon: '',
          color: 'from-indigo-500 to-blue-600',
          description: 'Ultrasonik dalga ile 2â€“400 cm arasÄ± mesafe Ã¶lÃ§er',
          usage: 'Trig pini kÄ±sa darbe gÃ¶nderir; Echo pini dÃ¶nÃ¼ÅŸ sÃ¼resini Ã¶lÃ§er. Mesafe sÃ¼re/343 m/s hÄ±zÄ±na gÃ¶re hesaplanÄ±r.',
          tips: [
            'Ä°stikrarlÄ± Ã¶lÃ§Ã¼m iÃ§in sabit montaj ve temiz hat Ã§ekin',
            '5V besleme kullanÄ±n; sinyal seviyelerini doÄŸrulayÄ±n',
            'Zaman Ã¶lÃ§Ã¼mÃ¼nde mikrosaniye hassasiyet gerekir'
          ],
          path: 'Teknofest 2026/4.KÄ±sÄ±m(Temel Elemanlar 1.KÄ±sÄ±m)',
          images: [{ src: 'hcsr-4.webp', caption: 'HC-SR04 SensÃ¶rÃ¼' }]
        }
      ];

      return `
        ${renderNavbar()}
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <div class="mb-8">
            <h1 class="text-4xl font-bold mb-2">Arduino ElemanlarÄ±</h1>
            <p class="text-slate-400">Temel elektronik bileÅŸenleri tanÄ±yalÄ±m</p>
            <div class="mt-6 bg-yellow-900/30 border border-yellow-700/40 rounded-2xl p-5">
              <h2 class="text-lg font-bold text-yellow-300 mb-2">Genel ve Ã–nemli UyarÄ±lar</h2>
              <ul class="text-slate-200 text-sm space-y-1 list-disc ml-5">
                <li>Elektronik devre kurarken acele edilmemelidir</li>
                <li>Enerji vermeden Ã¶nce baÄŸlantÄ±lar iki kez kontrol edilmelidir</li>
                <li>LED direnÃ§siz asla kullanÄ±lmaz</li>
                <li>YanlÄ±ÅŸ baÄŸlantÄ±lar Arduino ve parÃ§alarÄ± kalÄ±cÄ± olarak bozabilir</li>
                <li>Ä°lk devreler her zaman basit tutulmalÄ±dÄ±r</li>
              </ul>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            ${components.map((component, index) => {
              const componentKey = `component-${index}`;
              const isCollapsed = appState.collapsedTopics[componentKey] || false;
              return `
              <div class="bg-slate-800 rounded-2xl overflow-hidden border border-slate-700 hover:scale-105 transition-all fade-in">
                <button onclick="toggleTopic('${componentKey}')" class="w-full flex items-center justify-between p-6 text-left bg-gradient-to-r ${component.color} hover:opacity-95 transition-all">
                  <div class="flex items-center space-x-4">
                    ${component.icon ? `<div class="text-6xl">${component.icon}</div>` : ''}
                    <div>
                      <h2 class="text-2xl font-bold text-white">${component.name}</h2>
                      <p class="text-white text-opacity-90 text-sm mt-1">${component.description}</p>
                    </div>
                  </div>
                  <div class="text-2xl text-white transition-transform duration-300 ${isCollapsed ? 'rotate-0' : 'rotate-180'}">
                    â–¼
                  </div>
                </button>
                
                <div class="overflow-hidden transition-all duration-300 ${isCollapsed ? 'max-h-0 opacity-0' : 'max-h-96 opacity-100'}">
                  <div class="p-6">
                    <div class="mb-4">
                      <h3 class="font-bold text-lg mb-2 text-blue-400">KullanÄ±m</h3>
                      <p class="text-slate-300 leading-relaxed">${component.usage}</p>
                    </div>
                    
                    ${component.images && component.images.length ? `
                      <div class="mt-4">
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                          ${component.images.map(img => `
                            <div class="bg-slate-900/40 rounded-xl border border-slate-700/50 p-3 flex flex-col items-center">
                              <img
                                src="${component.path ? `${component.path}/${img.src}` : img.src}"
                                alt="${img.caption}"
                                class="h-24 w-full object-contain"
                                loading="lazy"
                              />
                              <span class="mt-2 text-xs text-slate-300">${img.caption}</span>
                            </div>
                          `).join('')}
                        </div>
                      </div>
                    ` : ''}
                    
                    <div>
                      <h3 class="font-bold text-lg mb-3 text-green-400">Ä°puÃ§larÄ±</h3>
                      <ul class="space-y-2">
                        ${component.tips.map(tip => `
                          <li class="flex items-start space-x-2">
                            <span class="text-green-400 mt-1">â€¢</span>
                            <span class="text-slate-300 text-sm leading-relaxed">${tip}</span>
                          </li>
                        `).join('')}
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            `;
            }).join('')}
          </div>

          ${appState.currentUser ? `
            <div class="mt-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl p-8 text-center">
              <h2 class="text-3xl font-bold mb-3 text-white">Bu elemanlarÄ± kullanmaya hazÄ±r mÄ±sÄ±n?</h2>
              <p class="text-white text-opacity-90 mb-6">Kod editÃ¶rÃ¼nde bu bileÅŸenlerle projeler oluÅŸturabilirsin!</p>
              <button onclick="navigateTo('editor')" class="px-8 py-4 bg-white text-blue-600 rounded-xl font-bold hover:scale-105 transition-all">
                Kod EditÃ¶rÃ¼ne Git
              </button>
            </div>
          ` : `
            <div class="mt-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl p-8 text-center">
              <h2 class="text-3xl font-bold mb-3 text-white">Bu elemanlarla projeler yapmaya baÅŸla!</h2>
              <p class="text-white text-opacity-90 mb-6">Ãœcretsiz kayÄ±t ol, simÃ¼latÃ¶rde dene!</p>
              <button onclick="appState.showAuthModal = true; appState.authMode = 'register'; renderApp();" class="px-8 py-4 bg-white text-blue-600 rounded-xl font-bold hover:scale-105 transition-all">
                Ãœcretsiz BaÅŸla
              </button>
            </div>
          `}
        </div>
      `;
    }

    function renderQuiz() {
      if (appState.currentQuiz) {
        const quiz = quizzes.find(q => q.id === appState.currentQuiz);
        if (!quiz) {
          appState.currentQuiz = null;
          return renderQuiz();
        }

        if (appState.quizCompleted) {
          const percentage = (appState.quizScore / quiz.questions.length) * 100;
          const passed = percentage >= 70;

          return `
            ${renderNavbar()}
            
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
              <div class="bg-slate-800 rounded-2xl p-8 text-center">
                <h1 class="text-4xl font-bold mb-4">${passed ? 'Tebrikler!' : 'Daha Ä°yisini Yapabilirsin!'}</h1>
                <p class="text-xl text-slate-300 mb-6">${quiz.title} testini tamamladÄ±n</p>
                
                <div class="bg-slate-700 rounded-xl p-8 mb-6">
                  <div class="text-5xl font-bold mb-2 ${passed ? 'text-green-400' : 'text-orange-400'}">
                    ${appState.quizScore} / ${quiz.questions.length}
                  </div>
                  <div class="text-lg text-slate-300">%${percentage.toFixed(0)} BaÅŸarÄ±</div>
                  ${appState.currentUser && passed ? `
                    <div class="mt-4 text-yellow-400 font-bold">
                      +${Math.floor(quiz.xpReward * (percentage / 100))} XP KazandÄ±n!
                    </div>
                  ` : ''}
                </div>

                <div class="space-y-4 mb-6 text-left">
                  ${quiz.questions.map(question => {
                    const userAnswer = appState.quizAnswers[question.id];
                    const isCorrect = userAnswer === question.correct;
                    
                    return `
                      <div class="bg-slate-700 rounded-xl p-4">
                        <div class="flex items-start space-x-3 mb-3">
                          <div class="flex-shrink-0 mt-1">
                            ${isCorrect ? `
                              <svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                              </svg>
                            ` : `
                              <svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                              </svg>
                            `}
                          </div>
                          <div class="flex-1">
                            <p class="font-medium mb-2">${question.question.replace(/\n/g, '<br>')}</p>
                            <div class="text-sm space-y-1">
                              <div class="${isCorrect ? 'text-green-400' : 'text-red-400'}">Senin cevabÄ±n: ${question.options[userAnswer]}</div>
                              ${!isCorrect ? `<div class="text-green-400">DoÄŸru cevap: ${question.options[question.correct]}</div>` : ''}
                            </div>
                          </div>
                        </div>
                        <div class="bg-slate-600/50 border border-slate-500/20 rounded-lg p-3 text-sm text-slate-200">
                          <div class="flex items-center justify-between mb-1">
                            <span class="font-bold text-blue-400">Bilgi:</span>
                            <button onclick="getAIQuizExplanation('${question.id}', ${userAnswer})" class="text-[10px] bg-blue-600/20 hover:bg-blue-600/40 text-blue-400 px-2 py-0.5 rounded transition-colors">
                              âœ¨ AI AÃ§Ä±klamasÄ± Ä°ste
                            </button>
                          </div>
                          ${question.explanation}
                          <div id="ai-explanation-${question.id}"></div>
                        </div>
                      </div>
                    `;
                  }).join('')}
                </div>

                <div class="flex gap-4">
                  <button onclick="resetQuiz()" class="flex-1 bg-slate-700 hover:bg-slate-600 text-white py-3 rounded-xl font-bold transition-all">
                    Testlere DÃ¶n
                  </button>
                  <button onclick="startQuiz('${quiz.id}')" class="flex-1 bg-gradient-to-r ${quiz.color} text-white py-3 rounded-xl font-bold hover:scale-105 transition-all">
                    Tekrar Dene
                  </button>
                </div>
              </div>
            </div>
          `;
        }

        const allAnswered = quiz.questions.every(q => appState.quizAnswers[q.id] !== undefined);

        return `
          ${renderNavbar()}
          
          <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <button onclick="resetQuiz()" class="flex items-center space-x-2 text-slate-400 hover:text-white mb-6 transition-colors">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
              </svg>
              <span>Testlere DÃ¶n</span>
            </button>

            <div class="bg-slate-800 rounded-2xl p-8">
              <div class="flex items-center space-x-4 mb-6">
                <div class="flex-1">
                  <h1 class="text-3xl font-bold mb-2">${quiz.title}</h1>
                  <p class="text-slate-400">${quiz.description} â€¢ ${quiz.difficulty} â€¢ ${quiz.questions.length} Soru</p>
                </div>
              </div>

              <div class="space-y-6">
                ${quiz.questions.map((question, index) => `
                  <div class="bg-slate-700 rounded-xl p-6">
                    <h3 class="font-bold text-lg mb-4">
                      <span class="text-blue-400">${index + 1}.</span> ${question.question.replace(/\n/g, '<br>')}
                    </h3>
                    <div class="space-y-3">
                      ${question.options.map((option, optIndex) => {
                        const isSelected = appState.quizAnswers[question.id] === optIndex;
                        return `
                          <button 
                            onclick="selectAnswer(${question.id}, ${optIndex})"
                            class="w-full text-left p-4 rounded-lg transition-all ${
                              isSelected 
                                ? 'bg-blue-500 text-white' 
                                : 'bg-slate-600 hover:bg-slate-500 text-slate-200'
                            }"
                          >
                            <span class="font-medium">${String.fromCharCode(65 + optIndex)})</span> ${option}
                          </button>
                        `;
                      }).join('')}
                    </div>
                  </div>
                `).join('')}
              </div>

              <button 
                onclick="submitQuiz()"
                ${!allAnswered ? 'disabled' : ''}
                class="w-full mt-6 py-4 rounded-xl font-bold transition-all ${
                  allAnswered 
                    ? 'bg-gradient-to-r ' + quiz.color + ' text-white hover:scale-105' 
                    : 'bg-slate-700 text-slate-400 cursor-not-allowed'
                }"
              >
                ${allAnswered ? 'Testi Tamamla' : `TÃ¼m SorularÄ± Cevapla (${Object.keys(appState.quizAnswers).length}/${quiz.questions.length})`}
              </button>
            </div>
          </div>
        `;
      }

      return `
        ${renderNavbar()}
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <div class="mb-8">
            <h1 class="text-4xl font-bold mb-2">Arduino Bilgi Testleri</h1>
            <p class="text-slate-400">Bilgini test et, XP kazan ve kendini geliÅŸtir!</p>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            ${quizzes.map(quiz => `
              <div class="bg-slate-800 rounded-2xl overflow-hidden hover:scale-105 transition-all fade-in border border-slate-700">
                <div class="bg-gradient-to-r ${quiz.color} p-6">
                  <div class="flex items-center justify-between mb-4">
                    <div class="bg-white bg-opacity-20 px-3 py-1 rounded-full text-xs font-bold text-white uppercase tracking-wider">
                      ${quiz.difficulty}
                    </div>
                  </div>
                  <h2 class="text-2xl font-bold text-white mb-2">${quiz.title}</h2>
                  <p class="text-white text-opacity-90 text-sm">${quiz.description}</p>
                </div>
                
                <div class="p-6">
                  <div class="flex items-center justify-between mb-4 text-sm">
                    <div class="flex items-center space-x-4">
                      <span class="text-slate-400">
                        <span class="font-bold text-white">${quiz.questions.length}</span> Soru
                      </span>
                      ${appState.currentUser ? `
                        <span class="text-yellow-400">
                          <span class="font-bold">${quiz.xpReward}</span> XP
                        </span>
                      ` : ''}
                    </div>
                  </div>
                  
                  <button 
                    onclick="handleQuizStart('${quiz.id}')"
                    class="w-full bg-gradient-to-r ${quiz.color} text-white py-3 rounded-xl font-bold hover:scale-105 transition-all"
                  >
                    ${appState.currentUser ? 'Teste BaÅŸla' : 'GiriÅŸ Yap ve BaÅŸla'}
                  </button>
                </div>
              </div>
            `).join('')}
          </div>

          ${!appState.currentUser ? `
            <div class="mt-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl p-8 text-center">
              <h2 class="text-3xl font-bold mb-3 text-white">Testleri Ã§Ã¶z, XP kazan!</h2>
              <p class="text-white text-opacity-90 mb-6">Ãœcretsiz kayÄ±t ol, testlerle kendini geliÅŸtir ve XP kazanarak seviye atla!</p>
              <button onclick="appState.showAuthModal = true; appState.authMode = 'register'; renderApp();" class="px-8 py-4 bg-white text-blue-600 rounded-xl font-bold hover:scale-105 transition-all">
                Ãœcretsiz BaÅŸla
              </button>
            </div>
          ` : ''}
        </div>
      `;
    }

    function renderAbout() {
      return `
        ${renderNavbar()}
        
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
          <div class="text-center mb-16 fade-in">
            <div class="inline-flex items-center space-x-2 bg-gradient-to-r from-red-500/20 to-red-700/20 px-6 py-2 rounded-full text-red-400 text-sm font-bold mb-6 border border-red-500/30">
              <span class="relative flex h-3 w-3">
                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span>
              </span>
              <span>TEKNOFEST 2026 Projesi</span>
            </div>
            <h1 class="text-6xl font-extrabold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400">ArduMind HakkÄ±nda</h1>
            <p class="text-2xl text-slate-400 max-w-3xl mx-auto leading-relaxed">Arduino ve robotik dÃ¼nyasÄ±na adÄ±m atmak isteyenler iÃ§in tasarlanmÄ±ÅŸ, yapay zeka destekli yeni nesil eÄŸitim ekosistemi.</p>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-20">
            <div class="bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-3xl p-10 hover:border-blue-500/50 transition-all group fade-in">
              <div class="w-14 h-14 bg-blue-500/10 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                <svg class="w-8 h-8 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                </svg>
              </div>
              <h2 class="text-3xl font-bold mb-4">Proje Vizyonu</h2>
              <p class="text-slate-400 leading-relaxed text-lg">
                ArduMind, karmaÅŸÄ±k mÃ¼hendislik kavramlarÄ±nÄ± basitleÅŸtirerek her yaÅŸtan Ã¶ÄŸrencinin kendi hÄ±zÄ±nda Ã¶ÄŸrenebileceÄŸi, kiÅŸiselleÅŸtirilmiÅŸ bir deneyim sunar. AmacÄ±mÄ±z, teknolojiyi sadece tÃ¼keten deÄŸil, aynÄ± zamanda Ã¼reten bir nesil yetiÅŸtirmektir.
              </p>
            </div>

            <div class="bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-3xl p-10 hover:border-purple-500/50 transition-all group fade-in">
              <div class="w-14 h-14 bg-purple-500/10 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
                <svg class="w-8 h-8 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                </svg>
              </div>
              <h2 class="text-3xl font-bold mb-4">Neden ArduMind?</h2>
              <p class="text-slate-400 leading-relaxed text-lg">
                Geleneksel eÄŸitim materyalleri genellikle statiktir. ArduMind ise dinamik simÃ¼lasyonlar, etkileÅŸimli algoritmalar ve anlÄ±k geri bildirim veren yapay zeka asistanÄ± ile Ã¶ÄŸrenme sÃ¼recini Ã§ok daha verimli ve eÄŸlenceli hale getirir.
              </p>
            </div>
          </div>

          <div class="relative overflow-hidden bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700/50 rounded-[2.5rem] p-12 mb-20">
            <div class="absolute top-0 right-0 -mt-20 -mr-20 w-64 h-64 bg-blue-500/10 blur-[100px] rounded-full"></div>
            <div class="absolute bottom-0 left-0 -mb-20 -ml-20 w-64 h-64 bg-purple-500/10 blur-[100px] rounded-full"></div>
            
            <h2 class="text-4xl font-bold mb-12 text-center">Ã–ne Ã‡Ä±kan Ã–zellikler</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 relative z-10">
              <div class="bg-slate-900/50 p-8 rounded-3xl border border-slate-800 hover:bg-slate-900 transition-colors">
                <div class="text-4xl mb-6">ğŸ¤–</div>
                <h3 class="font-bold text-xl mb-3 text-white">Yapay Zeka AsistanÄ±</h3>
                <p class="text-slate-400">Kodunuzdaki hatalarÄ± sadece bulmakla kalmaz, nedenlerini aÃ§Ä±klar ve Ã§Ã¶zÃ¼m Ã¶nerileri geliÅŸtirir.</p>
              </div>

              <div class="bg-slate-900/50 p-8 rounded-3xl border border-slate-800 hover:bg-slate-900 transition-colors">
                <div class="text-4xl mb-6">ğŸ®</div>
                <h3 class="font-bold text-xl mb-3 text-white">OyunlaÅŸtÄ±rÄ±lmÄ±ÅŸ EÄŸitim</h3>
                <p class="text-slate-400">GÃ¶revleri tamamladÄ±kÃ§a XP kazanÄ±n, seviye atlayÄ±n ve baÅŸarÄ± rozetleri ile geliÅŸiminizi taÃ§landÄ±rÄ±n.</p>
              </div>

              <div class="bg-slate-900/50 p-8 rounded-3xl border border-slate-800 hover:bg-slate-900 transition-colors">
                <div class="text-4xl mb-6">ğŸ”Œ</div>
                <h3 class="font-bold text-xl mb-3 text-white">GerÃ§ek ZamanlÄ± SimÃ¼lasyon</h3>
                <p class="text-slate-400">DonanÄ±m gerektirmeden kodunuzun Ã§Ä±ktÄ±sÄ±nÄ± anÄ±nda gÃ¶rÃ¼n, bileÅŸenlerin tepkisini izleyin.</p>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-12 mb-20">
            <div class="space-y-8">
              <h2 class="text-4xl font-bold mb-4">Proje Hedefleri</h2>
              <div class="flex items-start space-x-6">
                <div class="w-12 h-12 rounded-2xl bg-green-500/10 flex items-center justify-center flex-shrink-0 text-green-500">
                  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                  </svg>
                </div>
                <div>
                  <h3 class="font-bold text-xl mb-2">EriÅŸilebilirlik</h3>
                  <p class="text-slate-400 leading-relaxed">KarmaÅŸÄ±k robotik eÄŸitimini herkes iÃ§in ulaÅŸÄ±labilir ve anlaÅŸÄ±lÄ±r bir seviyeye indirmek.</p>
                </div>
              </div>

              <div class="flex items-start space-x-6">
                <div class="w-12 h-12 rounded-2xl bg-green-500/10 flex items-center justify-center flex-shrink-0 text-green-500">
                  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                  </svg>
                </div>
                <div>
                  <h3 class="font-bold text-xl mb-2">SÃ¼rdÃ¼rÃ¼lebilirlik</h3>
                  <p class="text-slate-400 leading-relaxed">KullanÄ±cÄ±larÄ±n Ã¶ÄŸrendiklerini projeye dÃ¶nÃ¼ÅŸtÃ¼rebilecekleri bir temel oluÅŸturmak.</p>
                </div>
              </div>

              <div class="flex items-start space-x-6">
                <div class="w-12 h-12 rounded-2xl bg-green-500/10 flex items-center justify-center flex-shrink-0 text-green-500">
                  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                  </svg>
                </div>
                <div>
                  <h3 class="font-bold text-xl mb-2">Teknoloji OkuryazarlÄ±ÄŸÄ±</h3>
                  <p class="text-slate-400 leading-relaxed">Elektronik ve yazÄ±lÄ±m dÃ¼nyasÄ±nÄ± genÃ§ nesillere doÄŸru bir metodoloji ile tanÄ±tmak.</p>
                </div>
              </div>
            </div>

            <div class="bg-slate-800/30 rounded-[2.5rem] p-10 border border-slate-700/50">
              <h2 class="text-3xl font-bold mb-8 text-center">Teknoloji YÄ±ÄŸÄ±nÄ±mÄ±z</h2>
              <div class="grid grid-cols-2 gap-4">
                <div class="p-6 bg-slate-900/50 rounded-2xl text-center border border-slate-800">
                  <div class="text-2xl mb-2">ğŸ¨</div>
                  <p class="font-bold text-slate-300">Tailwind CSS</p>
                </div>
                <div class="p-6 bg-slate-900/50 rounded-2xl text-center border border-slate-800">
                  <div class="text-2xl mb-2">âš¡</div>
                  <p class="font-bold text-slate-300">Vanilla JS</p>
                </div>
                <div class="p-6 bg-slate-900/50 rounded-2xl text-center border border-slate-800">
                  <div class="text-2xl mb-2">ğŸ“</div>
                  <p class="font-bold text-slate-300">CodeMirror</p>
                </div>
                <div class="p-6 bg-slate-900/50 rounded-2xl text-center border border-slate-800">
                  <div class="text-2xl mb-2">ğŸ’¾</div>
                  <p class="font-bold text-slate-300">Local Storage</p>
                </div>
              </div>
            </div>
          </div>

          <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-[3rem] p-16 text-center relative overflow-hidden group shadow-2xl shadow-blue-500/20">
            <div class="absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"></div>
            <h2 class="text-5xl font-extrabold mb-6 text-white relative z-10">GeleceÄŸi Birlikte Ä°nÅŸa Edelim!</h2>
            <p class="text-2xl text-white/90 mb-10 max-w-2xl mx-auto relative z-10">
              ArduMind ile hayallerinizi koda, kodlarÄ±nÄ±zÄ± gerÃ§eÄŸe dÃ¶nÃ¼ÅŸtÃ¼rÃ¼n.
            </p>
            <button onclick="handleAboutCTA()" class="px-10 py-5 bg-white text-blue-600 rounded-2xl font-bold text-xl hover:scale-105 hover:shadow-xl transition-all relative z-10 active:scale-95">
              ${appState.currentUser ? 'EÄŸitime Devam Et' : 'Hemen AramÄ±za KatÄ±l'}
            </button>
          </div>
        </div>
      `;
    }

    function renderProfile() {
      if (!appState.currentUser) {
        navigateTo('home');
        return '';
      }

      const levelNames = {
        'beginner': 'BaÅŸlangÄ±Ã§',
        'basic': 'Temel',
        'intermediate': 'Orta'
      };

      const goalNames = {
        'project': 'Proje Yapmak',
        'learn': 'Arduino Ã–ÄŸrenmek'
      };

      const user = appState.currentUser;
      const nextLevelXP = 500; // Ã–rnek hedef
      const xpProgress = Math.min((user.xp / nextLevelXP) * 100, 100);

      return `
        ${renderNavbar()}
        
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
          <!-- Ãœst Profil KartÄ± -->
          <div class="bg-slate-800 rounded-3xl p-8 mb-8 border border-slate-700 shadow-2xl relative overflow-hidden">
            <div class="absolute top-0 right-0 p-8 opacity-10">
              <svg class="w-32 h-32" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08s5.97 1.09 6 3.08c-1.29 1.94-3.5 3.22-6 3.22z"/></svg>
            </div>
            
            <div class="flex flex-col md:flex-row items-center md:items-start gap-8 relative z-10">
              <div class="relative">
                <div class="w-32 h-32 rounded-3xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-5xl font-bold shadow-xl transform rotate-3">
                  ${user.name.charAt(0).toUpperCase()}
                </div>
                <div class="absolute -bottom-2 -right-2 bg-yellow-400 text-slate-900 px-3 py-1 rounded-full text-xs font-bold shadow-lg">
                  LVL ${Math.floor(user.xp / 100) + 1}
                </div>
              </div>
              
              <div class="flex-1 text-center md:text-left">
                <h1 class="text-4xl font-black mb-2 text-white">${user.name}</h1>
                <p class="text-slate-400 mb-4 flex items-center justify-center md:justify-start gap-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                  ${user.email}
                </p>
                
                <div class="bg-slate-900/50 rounded-2xl p-4 inline-flex items-center gap-4">
                  <div class="text-center px-4 border-r border-slate-700">
                    <div class="text-2xl font-black text-yellow-400">${user.xp}</div>
                    <div class="text-[10px] uppercase tracking-widest text-slate-500 font-bold">Toplam XP</div>
                  </div>
                  <div class="text-center px-4">
                    <div class="text-2xl font-black text-blue-400">${user.completedModules.length}</div>
                    <div class="text-[10px] uppercase tracking-widest text-slate-500 font-bold">ModÃ¼l</div>
                  </div>
                </div>
              </div>

              <div class="flex flex-col gap-3 w-full md:w-auto">
                <button onclick="logout()" class="px-6 py-3 bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-xl font-bold transition-all border border-red-500/20 flex items-center justify-center gap-2">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/></svg>
                  Ã‡Ä±kÄ±ÅŸ Yap
                </button>
              </div>
            </div>

            <!-- XP Bar -->
            <div class="mt-10">
              <div class="flex justify-between items-end mb-2">
                <span class="text-sm font-bold text-slate-400 uppercase tracking-widest">Sonraki Seviye Ä°lerlemesi</span>
                <span class="text-sm font-black text-white">${user.xp} / ${nextLevelXP} XP</span>
              </div>
              <div class="w-full h-4 bg-slate-900 rounded-full overflow-hidden border border-slate-700">
                <div class="h-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-1000" style="width: ${xpProgress}%"></div>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Sol Kolon: Rozetler -->
            <div class="lg:col-span-2 space-y-8">
              <div class="bg-slate-800 rounded-3xl p-8 border border-slate-700">
                <h3 class="text-xl font-black mb-6 flex items-center gap-3">
                  <span class="p-2 bg-purple-500/20 text-purple-400 rounded-lg">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/></svg>
                  </span>
                  BaÅŸarÄ± Rozetleri
                </h3>
                
                <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                  ${Object.entries(badgeDefinitions).map(([id, badge]) => {
                    const isEarned = user.badges && user.badges.includes(id);
                    return `
                      <div class="group relative bg-slate-900/50 rounded-2xl p-4 border border-slate-700/50 flex flex-col items-center text-center transition-all ${isEarned ? 'hover:scale-105 border-purple-500/30' : 'opacity-40 grayscale'}">
                        <div class="w-16 h-16 rounded-2xl bg-gradient-to-br ${isEarned ? badge.color : 'from-slate-700 to-slate-800'} flex items-center justify-center text-3xl mb-3 shadow-lg group-hover:rotate-12 transition-transform">
                          ${badge.icon}
                        </div>
                        <div class="font-black text-xs uppercase tracking-tighter mb-1">${badge.title}</div>
                        <p class="text-[10px] text-slate-500 leading-tight">${badge.description}</p>
                        
                        ${!isEarned ? `
                          <div class="absolute inset-0 flex items-center justify-center bg-slate-900/80 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity">
                            <span class="text-[10px] font-bold text-slate-400">HenÃ¼z KazanÄ±lmadÄ±</span>
                          </div>
                        ` : ''}
                      </div>
                    `;
                  }).join('')}
                </div>
              </div>

              <!-- Ä°statistikler ve Bilgiler -->
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                <div class="bg-slate-800 rounded-3xl p-6 border border-slate-700">
                  <h4 class="text-slate-400 text-xs font-bold uppercase tracking-widest mb-4">Seviye & Hedef</h4>
                  <div class="space-y-4">
                    <div class="flex items-center gap-4">
                      <div class="w-10 h-10 rounded-xl bg-blue-500/20 text-blue-400 flex items-center justify-center">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
                      </div>
                      <div>
                        <div class="text-xs text-slate-500 font-bold uppercase">Mevcut Seviye</div>
                        <div class="font-black text-white">${levelNames[user.level]}</div>
                      </div>
                    </div>
                    <div class="flex items-center gap-4">
                      <div class="w-10 h-10 rounded-xl bg-emerald-500/20 text-emerald-400 flex items-center justify-center">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                      </div>
                      <div>
                        <div class="text-xs text-slate-500 font-bold uppercase">Ã–ÄŸrenme Hedefi</div>
                        <div class="font-black text-white">${goalNames[user.goal]}</div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="bg-slate-800 rounded-3xl p-6 border border-slate-700">
                  <h4 class="text-slate-400 text-xs font-bold uppercase tracking-widest mb-4">Hesap Ã–zeti</h4>
                  <div class="space-y-4">
                    <div class="flex justify-between items-center">
                      <span class="text-slate-500 text-sm font-bold">KayÄ±t Tarihi</span>
                      <span class="text-white font-black">${new Date(user.createdAt).toLocaleDateString('tr-TR')}</span>
                    </div>
                    <div class="flex justify-between items-center">
                      <span class="text-slate-500 text-sm font-bold">Tamamlanan Testler</span>
                      <span class="text-white font-black">${user.activities.filter(a => a.text.includes('testini tamamladÄ±n')).length}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- SaÄŸ Kolon: Son Aktiviteler -->
            <div class="space-y-6">
              <div class="bg-slate-800 rounded-3xl p-8 border border-slate-700 h-full">
                <h3 class="text-xl font-black mb-6 flex items-center gap-3">
                  <span class="p-2 bg-blue-500/20 text-blue-400 rounded-lg">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  </span>
                  Son Hareketler
                </h3>
                
                <div class="space-y-6 relative before:absolute before:left-5 before:top-2 before:bottom-2 before:w-px before:bg-slate-700">
                  ${user.activities.slice(0, 8).map(activity => `
                    <div class="relative pl-12">
                      <div class="absolute left-0 w-10 h-10 rounded-xl bg-slate-900 border border-slate-700 flex items-center justify-center text-lg z-10">
                        ${activity.icon || 'âœ¨'}
                      </div>
                      <div>
                        <div class="text-xs font-black text-slate-300 leading-tight mb-1">${activity.text}</div>
                        <div class="text-[10px] font-bold text-slate-500 uppercase">${new Date(activity.timestamp).toLocaleDateString('tr-TR')}</div>
                      </div>
                    </div>
                  `).join('')}
                  
                  ${user.activities.length === 0 ? `
                    <div class="text-center py-10">
                      <div class="text-4xl mb-4">ğŸŒ±</div>
                      <p class="text-slate-500 text-sm font-bold">HenÃ¼z bir hareketin yok.<br>Hemen Ã¶ÄŸrenmeye baÅŸla!</p>
                    </div>
                  ` : ''}
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function renderArduinoPage() {
      const sections = [
        {
          title: "Arduino Nedir?",
          description: "Arduino, elektronik devreler kurup programlayabileceÄŸimiz bir geliÅŸtirme kartÄ±dÄ±r. SensÃ¶rlerden bilgi alÄ±r ve motor, Ä±ÅŸÄ±k gibi Ã§Ä±ktÄ±larÄ± kontrol eder.",
          details: `
            <div class="space-y-4">
              <div>
                <h4 class="text-xl font-bold text-blue-400 mb-2">Temel Ä°ÅŸlevi</h4>
                <p class="text-slate-300">Arduino bir beyin gibi Ã§alÄ±ÅŸÄ±r. GÃ¶zlerimiz ve kulaklarÄ±mÄ±z gibi sensÃ¶rleri kullanarak Ã§evresini algÄ±lar; ellerimiz ve kollarÄ±mÄ±z gibi motorlarÄ± ve Ä±ÅŸÄ±klarÄ± kullanarak tepki verir. Robotik projeler, akÄ±llÄ± ev sistemleri, hÄ±rsÄ±z alarmlarÄ± ve otomatik sulama sistemleri gibi sayÄ±sÄ±z proje yapÄ±labilir.</p>
              </div>
              <div>
                <h4 class="text-xl font-bold text-purple-400 mb-2">Orijinal ve Klon FarkÄ±</h4>
                <ul class="list-disc ml-5 text-slate-300 space-y-1">
                  <li><strong>USB Ã‡ipi:</strong> Orijinalde ATmega16U2 (sÃ¼rÃ¼cÃ¼sÃ¼z Ã§alÄ±ÅŸÄ±r), Klon modellerde genellikle CH340 Ã§ipi bulunur ve bilgisayara tanÄ±tmak iÃ§in ek sÃ¼rÃ¼cÃ¼ (driver) yÃ¼klenmesi gerekir.</li>
                  <li><strong>Malzeme Kalitesi:</strong> Orijinal kartlar daha kaliteli bileÅŸenlerden Ã¼retilir, klonlar daha uygun fiyatlÄ± parÃ§alar kullanÄ±r.</li>
                  <li><strong>Performans:</strong> Kodlama ve Ã§alÄ±ÅŸma mantÄ±ÄŸÄ± aÃ§Ä±sÄ±ndan hiÃ§bir fark yoktur. Ä°kisi de aynÄ± iÅŸi yapar.</li>
                </ul>
              </div>
            </div>
          `,
          path: "Teknofest 2026/1.KÄ±sÄ±m(Arduino Nedir)",
          images: [
            { src: "ArduinoUno GÃ¶rsel.jpg", caption: "Arduino Uno" },
            { src: "ArduinoMega GÃ¶rsel.webp", caption: "Arduino Mega" },
            { src: "ArduinoNano GÃ¶rsel.jpg", caption: "Arduino Nano" },
            { src: "SumoRobotu.jpg", caption: "Sumo Robotu" },
            { src: "Ã‡izgiÄ°zleyen.jpg", caption: "Ã‡izgi Ä°zleyen Robot" }
          ]
        },
        {
          title: "Arduino TÃ¼rleri",
          description: "Projenin ihtiyacÄ±na gÃ¶re farklÄ± boyut ve Ã¶zelliklerde Arduino kartlarÄ± vardÄ±r.",
          details: `
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
              <div class="bg-slate-700/50 p-4 rounded-xl">
                <h4 class="text-lg font-bold text-yellow-400 mb-2">Arduino UNO</h4>
                <p class="text-sm text-slate-300">En popÃ¼ler ve baÅŸlangÄ±Ã§ iÃ§in en uygun karttÄ±r. ATmega328P mikrodenetleyicisini kullanÄ±r. 14 Dijital, 6 Analog giriÅŸi vardÄ±r. USB kablosu ile bilgisayara kolayca baÄŸlanÄ±r.</p>
              </div>
              <div class="bg-slate-700/50 p-4 rounded-xl">
                <h4 class="text-lg font-bold text-blue-400 mb-2">Arduino MEGA</h4>
                <p class="text-sm text-slate-300">Daha bÃ¼yÃ¼k ve karmaÅŸÄ±k projeler iÃ§indir. ATmega2560 kullanÄ±r. 54 Dijital, 16 Analog giriÅŸi vardÄ±r. 3D yazÄ±cÄ±, drone gibi Ã§ok pin gerektiren projelerde tercih edilir.</p>
              </div>
              <div class="bg-slate-700/50 p-4 rounded-xl">
                <h4 class="text-lg font-bold text-green-400 mb-2">Arduino NANO</h4>
                <p class="text-sm text-slate-300">UNO ile aynÄ± Ã¶zelliklere sahiptir ancak boyutu Ã§ok kÃ¼Ã§Ã¼ktÃ¼r. Breadboard Ã¼zerine direkt takÄ±labilir. Yer sÄ±kÄ±ntÄ±sÄ± olan mini robotlar ve giyilebilir teknolojiler iÃ§in idealdir.</p>
              </div>
            </div>
          `,
          path: "Teknofest 2026/2.KÄ±sÄ±m(Arduino TÃ¼rleri)",
          images: [
            { src: "ArduinoUno GÃ¶rsel.jpg", caption: "Arduino Uno" },
            { src: "ArduinoMega GÃ¶rsel.webp", caption: "Arduino Mega" },
            { src: "ArduinoNano GÃ¶rsel.jpg", caption: "Arduino Nano" }
          ]
        },
        {
          title: "Arduino BacaklarÄ± (Pinler)",
          description: "Arduino Ã¼zerindeki giriÅŸ ve Ã§Ä±kÄ±ÅŸ portlarÄ±nÄ±n gÃ¶revleri.",
          details: `
            <div class="space-y-4">
              <div>
                <h4 class="text-lg font-bold text-red-400">GÃ¼Ã§ Pinleri (Power)</h4>
                <p class="text-slate-300 text-sm"><strong>5V / 3.3V:</strong> Enerji Ã§Ä±kÄ±ÅŸlarÄ±dÄ±r. <br><strong>GND:</strong> Toprak (Eksi) hattÄ±dÄ±r. <br><strong>Vin:</strong> Harici gÃ¼Ã§ giriÅŸidir.</p>
              </div>
              <div>
                <h4 class="text-lg font-bold text-green-400">Dijital Pinler (0-13)</h4>
                <p class="text-slate-300 text-sm">Sadece 1 (VAR) veya 0 (YOK) deÄŸerini alÄ±rlar. LED yakmak, buton okumak iÃ§in kullanÄ±lÄ±r. <br><strong>PWM (~) Pinleri (3,5,6,9,10,11):</strong> Motor hÄ±zÄ± veya LED parlaklÄ±ÄŸÄ± gibi analog benzeri Ã§Ä±kÄ±ÅŸlar verebilir.<br><strong>TX/RX (0-1):</strong> HaberleÅŸme pinleridir, kod yÃ¼klerken boÅŸ bÄ±rakÄ±lmalÄ±dÄ±r.</p>
              </div>
              <div>
                <h4 class="text-lg font-bold text-blue-400">Analog Pinler (A0-A5)</h4>
                <p class="text-slate-300 text-sm">SÄ±caklÄ±k, Ä±ÅŸÄ±k, nem gibi deÄŸiÅŸken deÄŸerleri okumak iÃ§in kullanÄ±lÄ±r. 0 ile 1023 arasÄ±nda hassas deÄŸer Ã¼retirler.</p>
              </div>
            </div>
          `,
          path: "Teknofest 2026/3.KÄ±sÄ±m(Arduino BacaklarÄ±)",
          images: [
            { src: "ArduinoUno BacaklarÄ±.jpg", caption: "Arduino Uno Pin DiyagramÄ±" }
          ]
        },
        // Temel Elemanlar bÃ¶lÃ¼mÃ¼ kaldÄ±rÄ±ldÄ±
      ];

      return `
        ${renderNavbar()}
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
          <div class="text-center mb-16">
            <h1 class="text-5xl font-extrabold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">
              Arduino EÄŸitim Materyalleri
            </h1>
            <p class="text-xl text-slate-400 max-w-2xl mx-auto">
              Teknofest 2026 hazÄ±rlÄ±k sÃ¼reci iÃ§in kapsamlÄ± teknik bilgiler ve devre ÅŸemalarÄ±.
            </p>
          </div>

          <div class="space-y-16">
            ${sections.map(section => `
              <div class="bg-slate-800 rounded-3xl p-8 shadow-2xl border border-slate-700">
                <div class="mb-8">
                  <h2 class="text-3xl font-bold mb-4 text-white border-b border-slate-700 pb-4">${section.title}</h2>
                  <p class="text-slate-300 text-lg mb-6 leading-relaxed">${section.description}</p>
                  ${section.details ? `
                    <div class="bg-slate-900/50 p-6 rounded-2xl border border-slate-700/50 backdrop-blur-sm">
                      ${section.details}
                      ${section.thumbnails && section.thumbnails.length ? `
                        <div class="mt-6">
                          <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                            ${section.thumbnails.map(img => `
                              <div class="bg-slate-800 rounded-xl border border-slate-700/50 p-3 flex flex-col items-center">
                                <img
                                  src="${section.path}/${img.src}"
                                  alt="${img.caption}"
                                  class="h-20 w-full object-contain"
                                  loading="lazy"
                                />
                                <span class="mt-2 text-xs text-slate-300">${img.caption}</span>
                              </div>
                            `).join('')}
                          </div>
                        </div>
                      ` : ''}
                    </div>
                  ` : ''}
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-8">
                  ${section.images.map(img => `
                    <div class="group relative bg-slate-900 rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all hover:scale-[1.02] border border-slate-700/30">
                      <div class="aspect-w-16 aspect-h-12 w-full overflow-hidden bg-slate-800">
                        <img 
                          src="${section.path}/${img.src}" 
                          alt="${img.caption}" 
                          class="w-full h-64 object-cover transform group-hover:scale-110 transition-transform duration-500"
                          loading="lazy"
                        />
                      </div>
                      <div class="absolute bottom-0 inset-x-0 bg-gradient-to-t from-slate-900 via-slate-900/90 to-transparent p-4 pt-16">
                        <p class="text-white font-bold text-lg text-center shadow-black drop-shadow-md">${img.caption}</p>
                      </div>
                    </div>
                  `).join('')}
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    function renderEduKit() {
      const projects = [
        {
          id: 'distance-alarm',
          title: 'Mesafe AlarmÄ±',
          icon: 'ğŸ“',
          description: 'HC-SR04 ultrasonik mesafe sensÃ¶rÃ¼ ile 20cm altÄ±ndaki cisimleri algÄ±layÄ±p buzzer ile sesli uyarÄ± verir.',
          code: `// Pin tanÄ±mlamalarÄ±
const int trigPin = 9;
const int echoPin = 10;
const int buzzerPin = 8;

void setup() {
  pinMode(trigPin, OUTPUT);
  pinMode(echoPin, INPUT);
  pinMode(buzzerPin, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  long duration, distance;
  
  // Mesafe Ã¶lÃ§Ã¼mÃ¼
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);
  
  duration = pulseIn(echoPin, HIGH);
  distance = (duration/2) / 29.1;
  
  // 20cm kontrolÃ¼
  if (distance < 20) {
    digitalWrite(buzzerPin, HIGH);
    delay(100);
    digitalWrite(buzzerPin, LOW);
  }
  
  delay(100);
}`,
          difficulty: 'BaÅŸlangÄ±Ã§',
          color: 'from-blue-500 to-cyan-500'
        },
        {
          id: 'smart-lamp',
          title: 'AkÄ±llÄ± Gece LambasÄ±',
          icon: 'ğŸ’¡',
          description: 'LDR Ä±ÅŸÄ±k sensÃ¶rÃ¼ kullanarak ortam karanlÄ±k olduÄŸunda LED\'leri otomatik olarak yakar.',
          code: `const int ldrPin = A0;
const int ledPin = 13;

void setup() {
  pinMode(ledPin, OUTPUT);
}

void loop() {
  int isik = analogRead(ldrPin);
  
  if (isik < 300) { // KaranlÄ±k eÅŸiÄŸi
    digitalWrite(ledPin, HIGH);
  } else {
    digitalWrite(ledPin, LOW);
  }
}`,
          difficulty: 'BaÅŸlangÄ±Ã§',
          color: 'from-amber-500 to-orange-500'
        },
        {
          id: 'temperature-monitor',
          title: 'SÄ±caklÄ±k Takibi',
          icon: 'ğŸŒ¡ï¸',
          description: 'DHT11 sensÃ¶rÃ¼ ile ortam sÄ±caklÄ±ÄŸÄ±nÄ± Ã¶lÃ§er ve LCD ekranda gÃ¶rÃ¼ntÃ¼ler.',
          code: `#include <DHT.h>
#include <LiquidCrystal_I2C.h>

DHT dht(2, DHT11);
LiquidCrystal_I2C lcd(0x27, 16, 2);

void setup() {
  dht.begin();
  lcd.init();
  lcd.backlight();
}

void loop() {
  float t = dht.readTemperature();
  lcd.setCursor(0, 0);
  lcd.print("Sicaklik: ");
  lcd.print(t);
  lcd.print("C");
  delay(2000);
}`,
          difficulty: 'Orta',
          color: 'from-emerald-500 to-teal-500'
        }
      ];

      return `
        ${renderNavbar()}
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
          <!-- Header -->
          <div class="text-center mb-16">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">
              ArduMind EÄŸitim Seti
            </h1>
            <p class="text-xl text-slate-400 max-w-3xl mx-auto">
              Kablo karmaÅŸasÄ±na son! TÃ¼m temel sensÃ¶r ve bileÅŸenlerin tek bir kartta toplandÄ±ÄŸÄ±, Ã¶ÄŸrenme odaklÄ± geliÅŸtirme platformu.
            </p>
          </div>

          <!-- Kit GÃ¶rseli ve Ã–zellikler -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mb-20 items-center">
            <div class="relative group">
              <div class="absolute -inset-1 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl blur opacity-25 group-hover:opacity-50 transition duration-1000"></div>
              <div class="relative bg-slate-900 rounded-2xl p-4 border border-slate-800">
                <img src="images/edukit_placeholder.png" alt="EÄŸitim Seti" class="w-full rounded-xl shadow-2xl" onerror="this.src='https://raw.githubusercontent.com/ArduMind/ArduMind/main/images/edu_kit_mockup.png'; this.onerror=null;">
                <div class="absolute bottom-8 right-8 bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-bold shadow-xl animate-bounce">
                  Hepsi Bir Arada
                </div>
              </div>
            </div>
            
            <div class="space-y-6">
              <h2 class="text-3xl font-bold">Neden ArduMind EÄŸitim Seti?</h2>
              <div class="space-y-4">
                <div class="flex items-start space-x-4">
                  <div class="w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center text-blue-400 flex-shrink-0">âœ“</div>
                  <div>
                    <h4 class="font-bold text-lg">SÄ±fÄ±r Kablo KarmaÅŸasÄ±</h4>
                    <p class="text-slate-400">Jumper kablo hatalarÄ±nÄ± en aza indirerek doÄŸrudan kodlamaya odaklanÄ±n.</p>
                  </div>
                </div>
                <div class="flex items-start space-x-4">
                  <div class="w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center text-purple-400 flex-shrink-0">âœ“</div>
                  <div>
                    <h4 class="font-bold text-lg">Zengin BileÅŸen Seti</h4>
                    <p class="text-slate-400">Mesafe sensÃ¶rÃ¼, LCD, Buzzer, LED'ler, Potansiyometre, LDR ve daha fazlasÄ±.</p>
                  </div>
                </div>
                <div class="flex items-start space-x-4">
                  <div class="w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center text-emerald-400 flex-shrink-0">âœ“</div>
                  <div>
                    <h4 class="font-bold text-lg">DayanÄ±klÄ± TasarÄ±m</h4>
                    <p class="text-slate-400">Okul ve atÃ¶lye kullanÄ±mÄ± iÃ§in optimize edilmiÅŸ, korumalÄ± devre yapÄ±sÄ±.</p>
                  </div>
                </div>
              </div>
              <button onclick="navigateTo('editor')" class="mt-4 px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition-all transform hover:scale-105 shadow-lg shadow-blue-500/20">
                Hemen Kodlamaya BaÅŸla
              </button>
            </div>
          </div>

          <!-- Uygulamalar -->
          <div class="mb-12">
            <h2 class="text-3xl font-bold mb-8">Ã–rnek EÄŸitim UygulamalarÄ±</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
              ${projects.map(p => `
                <div class="bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6 hover:bg-slate-800 transition-all group">
                  <div class="w-12 h-12 rounded-xl bg-gradient-to-br ${p.color} flex items-center justify-center text-2xl mb-4 group-hover:scale-110 transition-transform">
                    ${p.icon}
                  </div>
                  <h3 class="text-xl font-bold mb-2">${p.title}</h3>
                  <p class="text-slate-400 text-sm mb-4 leading-relaxed">${p.description}</p>
                  <div class="flex items-center justify-between mt-auto">
                    <span class="text-xs font-bold px-2 py-1 rounded bg-slate-700 text-slate-300">${p.difficulty}</span>
                    <button onclick="copyToClipboard(\`${p.code.replace(/`/g, '\\`').replace(/\$/g, '\\$')}\`)" class="text-blue-400 hover:text-blue-300 text-sm font-semibold flex items-center space-x-1">
                      <span>Kodu Kopyala</span>
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>
                    </button>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
        </div>
      `;
    }

    // ==================== MAIN RENDER ====================
function renderApp() {
      let content = '';
      
      if (appState.currentModuleView && appState.currentUser) {
        content = renderModuleDetail();
      } else {
        switch(appState.currentPage) {
          case 'home':
            content = renderHomePage();
            break;
          case 'dashboard':
            content = appState.currentUser ? renderDashboard() : renderHomePage();
            break;
          case 'editor':
            content = renderEditor();
            break;
          case 'docs':
            content = renderDocumentation();
            break;
          case 'components':
            content = renderComponents();
            break;
          case 'videos':
            content = renderVideos();
            break;
          case 'path':
            content = renderLearningPath();
            break;
          case 'algo-builder':
            content = renderAlgoBuilder();
            break;
          case 'quiz':
            content = renderQuiz();
            break;
          case 'profile':
            content = renderProfile();
            break;
          case 'about':
            content = renderAbout();
            break;
          case 'arduino':
            content = renderArduinoPage();
            break;
          case 'edu-kit':
            content = renderEduKit();
            break;
          default:
            content = renderHomePage();
        }
      }
      
      document.getElementById('app').innerHTML = content + (appState.showAuthModal ? renderAuthModal() : '') + (appState.showIntro ? renderIntro() : '');
      
      if (appState.showIntro && !appState.introInitialized) {
        appState.introInitialized = true;
        setTimeout(() => init3DIntro(), 0);
      }
      
      if (appState.currentPage === 'algo-builder') {
        setTimeout(() => renderConnectionsSVG(), 0);
      }

      if (appState.currentPage === 'editor') {
        setTimeout(() => {
          initEditor();
          const arduinoBoard = document.getElementById('arduinoBoard');
          if (arduinoBoard) {
            arduinoBoard.innerHTML = renderArduinoBoard();
          }
          // Seri monitÃ¶rÃ¼ en alta kaydÄ±r
          const serialMonitor = document.getElementById('serialMonitor');
          if (serialMonitor) {
            serialMonitor.scrollTop = serialMonitor.scrollHeight;
          }
        }, 100);
      }
    }

    // ==================== KEDÄ° GÃ–Z TAKÄ°BÄ° ====================
    document.addEventListener('mousemove', (e) => {
      const cat = document.getElementById('cat');
      if (!cat) return;

      const pupils = document.querySelectorAll('.cat-pupil');
      pupils.forEach(pupil => {
        const eye = pupil.parentElement;
        const rect = eye.getBoundingClientRect();
        const eyeX = rect.left + rect.width / 2;
        const eyeY = rect.top + rect.height / 2;
        
        const angle = Math.atan2(e.clientY - eyeY, e.clientX - eyeX);
         const distance = Math.min(6, Math.hypot(e.clientX - eyeX, e.clientY - eyeY) / 10);
         
         const x = Math.cos(angle) * distance;
         const y = Math.sin(angle) * distance;
         
         pupil.style.setProperty('--eye-x', `${x}px`);
         pupil.style.setProperty('--eye-y', `${y}px`);
      });
    });

    renderApp();
  </script>
</body>
</html>
